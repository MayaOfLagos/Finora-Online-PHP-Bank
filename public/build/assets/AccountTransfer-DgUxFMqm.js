import{f as Y,c as f,o as i,d as l,u as s,m as q,w as m,a as t,q as F,i as p,h as P,b as g,j,F as X,r as E,n as x,t as o,e as U}from"./app-CXBRDXRL.js";import{u as z}from"./useToast-C5Rq2I1M.js";import{a as _}from"./index-BY5Pvyke.js";import{s as L}from"./index-MXRsQvUz.js";import{s as O}from"./index-Y7Bu6IOH.js";import{s as G}from"./index-BE9ITL9W.js";import{s as H}from"./index-2tTRG4qE.js";import{s as J}from"./index-Mu0dkGFt.js";import{D as K}from"./DashboardLayout-DRnp4Kx-.js";import{_ as Q}from"./PinInput-BwvFae2Y.js";import{u as W}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-BIWAly7n.js";import"./index-CFg-6R1Q.js";import"./index-DGF8Thhm.js";import"./index-DAuWDqao.js";import"./AppLogo-Ci3N4wRK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LiveChatWidget-BQDMi4wK.js";import"./PagePreloader-BDYRUMCs.js";import"./index-zwfbL8r3.js";const Z={class:"max-w-2xl mx-auto"},tt={class:"max-w-2xl mx-auto"},et={class:"space-y-6"},st={class:"space-y-3"},rt=["onClick"],at={class:"flex items-center justify-between"},ot={class:"flex items-center gap-3"},lt={class:"font-medium text-gray-900 dark:text-white"},nt={class:"text-sm text-gray-500 dark:text-gray-400"},it={class:"text-right"},dt={key:0},ut={class:"space-y-3"},ct=["onClick"],mt={class:"flex items-center justify-between"},ft={class:"flex items-center gap-3"},pt={class:"font-medium text-gray-900 dark:text-white"},xt={class:"text-sm text-gray-500 dark:text-gray-400"},yt={class:"text-right"},gt={key:1},_t={class:"flex justify-between mt-1 text-xs text-gray-500"},bt={key:0},vt={key:2},kt={class:"space-y-2 text-sm"},wt={class:"flex justify-end gap-3 pt-4"},ht={class:"py-8 text-center"},Tt={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},At={class:"space-y-3"},Ct={class:"flex justify-between"},Vt={class:"font-mono text-gray-900 dark:text-white"},jt={class:"flex justify-between"},Nt={class:"font-bold text-gray-900 dark:text-white"},St={class:"flex justify-between"},$t={class:"text-gray-900 dark:text-white"},Ft={class:"flex justify-between"},Pt={class:"text-gray-900 dark:text-white"},Xt={class:"flex justify-center gap-3 mt-6"},Ut={class:"space-y-4"},re={__name:"AccountTransfer",props:{accounts:{type:Array,default:()=>[]}},setup(M){const A=M,C=z(),{formatCurrency:b}=W(),a=Y({from_account_id:null,to_account_id:null,amount:null,description:"",pin:""}),v=j(!1),k=j(!1),V=j(!1),N=j(null),d=U(()=>A.accounts.find(n=>n.id===a.from_account_id)),S=U(()=>A.accounts.find(n=>n.id===a.to_account_id)),$=U(()=>{var n;return a.from_account_id&&a.to_account_id&&a.from_account_id!==a.to_account_id&&a.amount&&a.amount>0&&((n=d.value)==null?void 0:n.balance)>=a.amount*100}),D=()=>{if(a.pin.length!==6){C.error("Please enter your 6-digit transaction PIN","Invalid PIN");return}if(!$.value){C.error("Please verify all transfer details","Invalid Transfer");return}v.value=!1,k.value=!0,a.transform(n=>({...n,amount:Math.round((n.amount||0)*100)})).post(route("transfers.account.process"),{preserveScroll:!0,onSuccess:()=>{V.value=!0,N.value=a.data(),C.success("Your account transfer has been completed","Transfer Successful")},onError:n=>{C.error(n.pin||n.general||"Transfer could not be completed","Transfer Failed")},onFinish:()=>{k.value=!1}})},R=()=>{a.reset(),V.value=!1,N.value=null};return(n,e)=>(i(),f(X,null,[l(s(q),{title:"Account Transfer"}),l(K,{title:"Account Transfer"},{default:m(()=>[t("div",Z,[l(s(F),{href:"/transfers",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:m(()=>[...e[6]||(e[6]=[t("i",{class:"pi pi-arrow-left"},null,-1),p(" Back to Transfers ",-1)])]),_:1}),e[7]||(e[7]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Account Transfer "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Transfer funds between your own accounts instantly ")],-1))]),t("div",tt,[V.value?g("",!0):(i(),P(s(L),{key:0,class:"shadow-lg"},{title:m(()=>[...e[8]||(e[8]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-exchange text-primary-500"}),p(" Transfer Between Accounts ")],-1)])]),content:m(()=>{var c,w;return[t("div",et,[t("div",null,[e[10]||(e[10]=t("label",{class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-arrow-right text-primary-600"}),p(" From Account "),t("span",{class:"text-red-500"},"*")])],-1)),t("div",st,[(i(!0),f(X,null,E(A.accounts.filter(r=>r.is_active),r=>{var u;return i(),f("div",{key:r.id,onClick:y=>{s(a).from_account_id=r.id,s(a).to_account_id=null},class:x(["p-4 transition-all duration-300 ease-in-out border-2 rounded-lg cursor-pointer",[s(a).from_account_id===r.id?"border-green-500 bg-green-50 dark:bg-green-900/20 shadow-md shadow-green-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"]])},[t("div",at,[t("div",ot,[t("div",{class:x(["flex items-center justify-center w-10 h-10 transition-all duration-300 rounded-full",[s(a).from_account_id===r.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:x(["pi transition-all duration-300",[s(a).from_account_id===r.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",lt,o(((u=r.account_type)==null?void 0:u.name)||"Account"),1),t("p",nt," ****"+o(r.account_number.slice(-4))+" • "+o(r.currency||"USD"),1)])]),t("div",it,[t("p",{class:x(["text-lg font-bold",[s(a).from_account_id===r.id?"text-green-600":"text-gray-900 dark:text-white"]])},o(s(b)(r.balance,r.currency)),3),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500"},"Available",-1))])])],10,rt)}),128))])]),s(a).from_account_id?(i(),f("div",dt,[e[12]||(e[12]=t("label",{class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-arrow-left text-primary-600"}),p(" To Account "),t("span",{class:"text-red-500"},"*")])],-1)),t("div",ut,[(i(!0),f(X,null,E(A.accounts.filter(r=>r.is_active&&r.id!==s(a).from_account_id),r=>{var u;return i(),f("div",{key:r.id,onClick:y=>s(a).to_account_id=r.id,class:x(["p-4 transition-all duration-300 ease-in-out border-2 rounded-lg cursor-pointer",[s(a).to_account_id===r.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md shadow-blue-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"]])},[t("div",mt,[t("div",ft,[t("div",{class:x(["flex items-center justify-center w-10 h-10 transition-all duration-300 rounded-full",[s(a).to_account_id===r.id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:x(["pi transition-all duration-300",[s(a).to_account_id===r.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",pt,o(((u=r.account_type)==null?void 0:u.name)||"Account"),1),t("p",xt," ****"+o(r.account_number.slice(-4))+" • "+o(r.currency||"USD"),1)])]),t("div",yt,[t("p",{class:x(["text-lg font-bold",[s(a).to_account_id===r.id?"text-blue-600":"text-gray-900 dark:text-white"]])},o(s(b)(r.balance,r.currency)),3),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"Current balance",-1))])])],10,ct)}),128))])])):g("",!0),s(a).to_account_id?(i(),f("div",gt,[e[13]||(e[13]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[p(" Amount "),t("span",{class:"text-red-500"},"*")],-1)),l(s(O),{modelValue:s(a).amount,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).amount=r),mode:"currency",currency:((c=d.value)==null?void 0:c.currency)||"USD",locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:((w=d.value)==null?void 0:w.balance)/100||0},null,8,["modelValue","currency","max"]),t("div",_t,[d.value?(i(),f("span",bt," Available: "+o(s(b)(d.value.balance,d.value.currency)),1)):g("",!0)])])):g("",!0),s(a).to_account_id?(i(),f("div",vt,[e[14]||(e[14]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"}," Description (Optional) ",-1)),l(s(G),{modelValue:s(a).description,"onUpdate:modelValue":e[1]||(e[1]=r=>s(a).description=r),rows:"2",placeholder:"Add a note for this transfer",class:"w-full"},null,8,["modelValue"])])):g("",!0),$.value?(i(),P(s(J),{key:3,severity:"info",closable:!1},{default:m(()=>{var r,u,y,h,T,B,I;return[t("div",kt,[t("p",null,[e[15]||(e[15]=t("strong",null,"From:",-1)),p(" "+o((u=(r=d.value)==null?void 0:r.account_type)==null?void 0:u.name)+" (****"+o((y=d.value)==null?void 0:y.account_number.slice(-4))+")",1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"To:",-1)),p(" "+o((T=(h=S.value)==null?void 0:h.account_type)==null?void 0:T.name)+" (****"+o((B=S.value)==null?void 0:B.account_number.slice(-4))+")",1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Amount:",-1)),p(" "+o(s(b)(s(a).amount*100,(I=d.value)==null?void 0:I.currency)),1)])])]}),_:1})):g("",!0),t("div",wt,[l(s(F),{href:"/transfers"},{default:m(()=>[l(s(_),{label:"Cancel",outlined:""})]),_:1}),l(s(_),{label:"Transfer",icon:"pi pi-send",disabled:!$.value,onClick:e[2]||(e[2]=r=>v.value=!0)},null,8,["disabled"])])])]}),_:1})),V.value?(i(),P(s(L),{key:1,class:"shadow-lg"},{content:m(()=>{var c,w,r,u,y,h,T;return[t("div",ht,[e[22]||(e[22]=t("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30"},[t("i",{class:"text-4xl text-green-600 pi pi-check dark:text-green-400"})],-1)),e[23]||(e[23]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Transfer Successful! ",-1)),e[24]||(e[24]=t("p",{class:"mt-2 text-gray-500"}," Your account transfer has been completed. ",-1)),t("div",Tt,[t("div",At,[t("div",Ct,[e[18]||(e[18]=t("span",{class:"text-gray-500"},"Reference",-1)),t("span",Vt,o(((w=(c=N.value)==null?void 0:c.transfer)==null?void 0:w.reference)||"TXN-XXXXXXXX"),1)]),t("div",jt,[e[19]||(e[19]=t("span",{class:"text-gray-500"},"Amount",-1)),t("span",Nt,o(s(b)(s(a).amount*100,(r=d.value)==null?void 0:r.currency)),1)]),t("div",St,[e[20]||(e[20]=t("span",{class:"text-gray-500"},"From",-1)),t("span",$t,o((y=(u=d.value)==null?void 0:u.account_type)==null?void 0:y.name),1)]),t("div",Ft,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"To",-1)),t("span",Pt,o((T=(h=S.value)==null?void 0:h.account_type)==null?void 0:T.name),1)])])]),t("div",Xt,[l(s(_),{label:"New Transfer",icon:"pi pi-plus",outlined:"",onClick:R}),l(s(F),{href:"/accounts"},{default:m(()=>[l(s(_),{label:"View Accounts",icon:"pi pi-wallet"})]),_:1})])])]}),_:1})):g("",!0)]),l(s(H),{visible:v.value,"onUpdate:visible":e[5]||(e[5]=c=>v.value=c),modal:"",header:"Enter Transaction PIN",style:{width:"480px"},closable:!k.value},{footer:m(()=>[l(s(_),{label:"Cancel",text:"",onClick:e[4]||(e[4]=c=>v.value=!1),disabled:k.value},null,8,["disabled"]),l(s(_),{label:"Confirm",icon:"pi pi-check",loading:k.value,onClick:D},null,8,["loading"])]),default:m(()=>[t("div",Ut,[e[25]||(e[25]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Enter your 6-digit transaction PIN to confirm this transfer. ",-1)),l(Q,{modelValue:s(a).pin,"onUpdate:modelValue":e[3]||(e[3]=c=>s(a).pin=c),length:6,masked:"",onComplete:D},null,8,["modelValue"])])]),_:1},8,["visible","closable"])]),_:1})],64))}};export{re as default};
