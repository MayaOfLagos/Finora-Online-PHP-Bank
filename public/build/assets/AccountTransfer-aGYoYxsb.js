import{k as z,f as L,c as f,d as o,u as s,p as O,w as m,a as t,s as F,i as p,g as P,b as g,j,o as i,F as X,r as E,n as x,t as l,e as U}from"./app-B-kuXHFv.js";import{a as _}from"./index-Cbb5XdGh.js";import{s as M}from"./index-Bkguqmcl.js";import{s as q}from"./index-D81w7CmU.js";import{s as G}from"./index-Dx8szRdg.js";import{s as H}from"./index-Cbeh9xJJ.js";import{s as J}from"./index-Cl71K0EB.js";import{_ as K}from"./DashboardLayout-CxKpJXdt.js";import{_ as Q}from"./PinInput-BHmUjag_.js";import{u as W}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-BQO7QaEp.js";import"./index-B2KMBeGL.js";import"./index-DGirmzUV.js";import"./index-CR1mbdI2.js";import"./index-iMsXsHjH.js";import"./AppLogo-a4JQMzSy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"max-w-2xl mx-auto"},tt={class:"max-w-2xl mx-auto"},et={class:"space-y-6"},st={class:"space-y-3"},at=["onClick"],rt={class:"flex items-center justify-between"},lt={class:"flex items-center gap-3"},ot={class:"font-medium text-gray-900 dark:text-white"},nt={class:"text-sm text-gray-500 dark:text-gray-400"},it={class:"text-right"},dt={key:0},ut={class:"space-y-3"},ct=["onClick"],mt={class:"flex items-center justify-between"},ft={class:"flex items-center gap-3"},pt={class:"font-medium text-gray-900 dark:text-white"},xt={class:"text-sm text-gray-500 dark:text-gray-400"},yt={class:"text-right"},gt={key:1},_t={class:"flex justify-between mt-1 text-xs text-gray-500"},vt={key:0},bt={key:2},kt={class:"space-y-2 text-sm"},wt={class:"flex justify-end gap-3 pt-4"},ht={class:"py-8 text-center"},Tt={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},At={class:"space-y-3"},Ct={class:"flex justify-between"},Vt={class:"font-mono text-gray-900 dark:text-white"},jt={class:"flex justify-between"},Nt={class:"font-bold text-gray-900 dark:text-white"},$t={class:"flex justify-between"},St={class:"text-gray-900 dark:text-white"},Ft={class:"flex justify-between"},Pt={class:"text-gray-900 dark:text-white"},Xt={class:"flex justify-center gap-3 mt-6"},Ut={class:"space-y-4"},te={__name:"AccountTransfer",props:{accounts:{type:Array,default:()=>[]}},setup(R){const A=R,C=z(),{formatCurrency:v}=W(),r=L({from_account_id:null,to_account_id:null,amount:null,description:"",pin:""}),b=j(!1),k=j(!1),V=j(!1),N=j(null),d=U(()=>A.accounts.find(n=>n.id===r.from_account_id)),$=U(()=>A.accounts.find(n=>n.id===r.to_account_id)),S=U(()=>{var n;return r.from_account_id&&r.to_account_id&&r.from_account_id!==r.to_account_id&&r.amount&&r.amount>0&&((n=d.value)==null?void 0:n.balance)>=r.amount*100}),B=()=>{if(r.pin.length!==6){C.add({severity:"error",summary:"Invalid PIN",detail:"Please enter your 6-digit transaction PIN",life:3e3});return}if(!S.value){C.add({severity:"error",summary:"Invalid Transfer",detail:"Please verify all transfer details",life:3e3});return}b.value=!1,k.value=!0,r.transform(n=>({...n,amount:Math.round((n.amount||0)*100)})).post(route("transfers.account.process"),{preserveScroll:!0,onSuccess:()=>{V.value=!0,N.value=r.data(),C.add({severity:"success",summary:"Transfer Successful",detail:"Your account transfer has been completed",life:5e3})},onError:n=>{C.add({severity:"error",summary:"Transfer Failed",detail:n.pin||n.general||"Transfer could not be completed",life:5e3})},onFinish:()=>{k.value=!1}})},Y=()=>{r.reset(),V.value=!1,N.value=null};return(n,e)=>(i(),f(X,null,[o(s(O),{title:"Account Transfer"}),o(K,{title:"Account Transfer"},{default:m(()=>[t("div",Z,[o(s(F),{href:"/transfers",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:m(()=>[...e[6]||(e[6]=[t("i",{class:"pi pi-arrow-left"},null,-1),p(" Back to Transfers ",-1)])]),_:1}),e[7]||(e[7]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Account Transfer "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Transfer funds between your own accounts instantly ")],-1))]),t("div",tt,[V.value?g("",!0):(i(),P(s(M),{key:0,class:"shadow-lg"},{title:m(()=>[...e[8]||(e[8]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-exchange text-primary-500"}),p(" Transfer Between Accounts ")],-1)])]),content:m(()=>{var c,w;return[t("div",et,[t("div",null,[e[10]||(e[10]=t("label",{class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-arrow-right text-primary-600"}),p(" From Account "),t("span",{class:"text-red-500"},"*")])],-1)),t("div",st,[(i(!0),f(X,null,E(A.accounts.filter(a=>a.is_active),a=>{var u;return i(),f("div",{key:a.id,onClick:y=>{s(r).from_account_id=a.id,s(r).to_account_id=null},class:x(["p-4 transition-all duration-300 ease-in-out border-2 rounded-lg cursor-pointer",[s(r).from_account_id===a.id?"border-green-500 bg-green-50 dark:bg-green-900/20 shadow-md shadow-green-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"]])},[t("div",rt,[t("div",lt,[t("div",{class:x(["flex items-center justify-center w-10 h-10 transition-all duration-300 rounded-full",[s(r).from_account_id===a.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:x(["pi transition-all duration-300",[s(r).from_account_id===a.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",ot,l(((u=a.account_type)==null?void 0:u.name)||"Account"),1),t("p",nt," ****"+l(a.account_number.slice(-4))+" • "+l(a.currency||"USD"),1)])]),t("div",it,[t("p",{class:x(["text-lg font-bold",[s(r).from_account_id===a.id?"text-green-600":"text-gray-900 dark:text-white"]])},l(s(v)(a.balance,a.currency)),3),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500"},"Available",-1))])])],10,at)}),128))])]),s(r).from_account_id?(i(),f("div",dt,[e[12]||(e[12]=t("label",{class:"block mb-3 text-sm font-medium text-gray-700 dark:text-gray-300"},[t("div",{class:"flex items-center gap-2"},[t("i",{class:"pi pi-arrow-left text-primary-600"}),p(" To Account "),t("span",{class:"text-red-500"},"*")])],-1)),t("div",ut,[(i(!0),f(X,null,E(A.accounts.filter(a=>a.is_active&&a.id!==s(r).from_account_id),a=>{var u;return i(),f("div",{key:a.id,onClick:y=>s(r).to_account_id=a.id,class:x(["p-4 transition-all duration-300 ease-in-out border-2 rounded-lg cursor-pointer",[s(r).to_account_id===a.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md shadow-blue-500/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"]])},[t("div",mt,[t("div",ft,[t("div",{class:x(["flex items-center justify-center w-10 h-10 transition-all duration-300 rounded-full",[s(r).to_account_id===a.id?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:x(["pi transition-all duration-300",[s(r).to_account_id===a.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",pt,l(((u=a.account_type)==null?void 0:u.name)||"Account"),1),t("p",xt," ****"+l(a.account_number.slice(-4))+" • "+l(a.currency||"USD"),1)])]),t("div",yt,[t("p",{class:x(["text-lg font-bold",[s(r).to_account_id===a.id?"text-blue-600":"text-gray-900 dark:text-white"]])},l(s(v)(a.balance,a.currency)),3),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"Current balance",-1))])])],10,ct)}),128))])])):g("",!0),s(r).to_account_id?(i(),f("div",gt,[e[13]||(e[13]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[p(" Amount "),t("span",{class:"text-red-500"},"*")],-1)),o(s(q),{modelValue:s(r).amount,"onUpdate:modelValue":e[0]||(e[0]=a=>s(r).amount=a),mode:"currency",currency:((c=d.value)==null?void 0:c.currency)||"USD",locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:((w=d.value)==null?void 0:w.balance)/100||0},null,8,["modelValue","currency","max"]),t("div",_t,[d.value?(i(),f("span",vt," Available: "+l(s(v)(d.value.balance,d.value.currency)),1)):g("",!0)])])):g("",!0),s(r).to_account_id?(i(),f("div",bt,[e[14]||(e[14]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"}," Description (Optional) ",-1)),o(s(G),{modelValue:s(r).description,"onUpdate:modelValue":e[1]||(e[1]=a=>s(r).description=a),rows:"2",placeholder:"Add a note for this transfer",class:"w-full"},null,8,["modelValue"])])):g("",!0),S.value?(i(),P(s(J),{key:3,severity:"info",closable:!1},{default:m(()=>{var a,u,y,h,T,I,D;return[t("div",kt,[t("p",null,[e[15]||(e[15]=t("strong",null,"From:",-1)),p(" "+l((u=(a=d.value)==null?void 0:a.account_type)==null?void 0:u.name)+" (****"+l((y=d.value)==null?void 0:y.account_number.slice(-4))+")",1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"To:",-1)),p(" "+l((T=(h=$.value)==null?void 0:h.account_type)==null?void 0:T.name)+" (****"+l((I=$.value)==null?void 0:I.account_number.slice(-4))+")",1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Amount:",-1)),p(" "+l(s(v)(s(r).amount*100,(D=d.value)==null?void 0:D.currency)),1)])])]}),_:1})):g("",!0),t("div",wt,[o(s(F),{href:"/transfers"},{default:m(()=>[o(s(_),{label:"Cancel",outlined:""})]),_:1}),o(s(_),{label:"Transfer",icon:"pi pi-send",disabled:!S.value,onClick:e[2]||(e[2]=a=>b.value=!0)},null,8,["disabled"])])])]}),_:1})),V.value?(i(),P(s(M),{key:1,class:"shadow-lg"},{content:m(()=>{var c,w,a,u,y,h,T;return[t("div",ht,[e[22]||(e[22]=t("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30"},[t("i",{class:"text-4xl text-green-600 pi pi-check dark:text-green-400"})],-1)),e[23]||(e[23]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Transfer Successful! ",-1)),e[24]||(e[24]=t("p",{class:"mt-2 text-gray-500"}," Your account transfer has been completed. ",-1)),t("div",Tt,[t("div",At,[t("div",Ct,[e[18]||(e[18]=t("span",{class:"text-gray-500"},"Reference",-1)),t("span",Vt,l(((w=(c=N.value)==null?void 0:c.transfer)==null?void 0:w.reference)||"TXN-XXXXXXXX"),1)]),t("div",jt,[e[19]||(e[19]=t("span",{class:"text-gray-500"},"Amount",-1)),t("span",Nt,l(s(v)(s(r).amount*100,(a=d.value)==null?void 0:a.currency)),1)]),t("div",$t,[e[20]||(e[20]=t("span",{class:"text-gray-500"},"From",-1)),t("span",St,l((y=(u=d.value)==null?void 0:u.account_type)==null?void 0:y.name),1)]),t("div",Ft,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"To",-1)),t("span",Pt,l((T=(h=$.value)==null?void 0:h.account_type)==null?void 0:T.name),1)])])]),t("div",Xt,[o(s(_),{label:"New Transfer",icon:"pi pi-plus",outlined:"",onClick:Y}),o(s(F),{href:"/accounts"},{default:m(()=>[o(s(_),{label:"View Accounts",icon:"pi pi-wallet"})]),_:1})])])]}),_:1})):g("",!0)]),o(s(H),{visible:b.value,"onUpdate:visible":e[5]||(e[5]=c=>b.value=c),modal:"",header:"Enter Transaction PIN",style:{width:"480px"},closable:!k.value},{footer:m(()=>[o(s(_),{label:"Cancel",text:"",onClick:e[4]||(e[4]=c=>b.value=!1),disabled:k.value},null,8,["disabled"]),o(s(_),{label:"Confirm",icon:"pi pi-check",loading:k.value,onClick:B},null,8,["loading"])]),default:m(()=>[t("div",Ut,[e[25]||(e[25]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Enter your 6-digit transaction PIN to confirm this transfer. ",-1)),o(Q,{modelValue:s(r).pin,"onUpdate:modelValue":e[3]||(e[3]=c=>s(r).pin=c),length:6,masked:"",onComplete:B},null,8,["modelValue"])])]),_:1},8,["visible","closable"])]),_:1})],64))}};export{te as default};
