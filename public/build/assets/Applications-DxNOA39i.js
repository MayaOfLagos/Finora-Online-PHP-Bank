import{m as C,g as L,w as i,a as e,d as l,u as o,t as r,i as v,h as j,j as g,c as m,b as c,o as p,q as h}from"./app-nTGqf7uH.js";import{a as D,_ as N}from"./DashboardLayout-CeyUPUjq.js";import{s as T,a as n}from"./index-BoGnZv2K.js";import{a as b}from"./index-FIz9EvJm.js";import{s as w}from"./index-BzWrgb98.js";import{s as V}from"./index-IzcHhcmk.js";/* empty css            */import"./index-BF1qOYW2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-yeTD0jwg.js";import"./index-42hsQ428.js";import"./index-Dk5mjU__.js";import"./index-MJNbB2Vf.js";import"./index-CkJR40ke.js";import"./index-COs6xTZa.js";const S={class:"space-y-6"},R={class:"flex justify-between items-center"},B={class:"text-center py-8 text-gray-500"},O={class:"font-mono text-sm font-semibold"},P={class:"font-medium"},M={class:"font-semibold"},U={class:"text-sm"},z={key:0,class:"space-y-4"},I={class:"grid grid-cols-2 gap-4"},q={class:"mt-1"},E={class:"font-semibold mt-1"},F={class:"font-semibold text-lg mt-1"},H={class:"font-semibold mt-1"},K={class:"font-semibold text-blue-600 mt-1"},Y={class:"font-semibold mt-1"},G={class:"font-semibold mt-1"},J={class:"font-semibold mt-1"},Q={key:0},W={class:"mt-1 text-gray-800"},X={key:1},Z={class:"mt-1 text-green-600 font-semibold"},ee={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-4"},te={class:"mt-1 text-red-700"},se={key:3,class:"bg-green-50 border border-green-200 rounded-lg p-4"},xe={__name:"Applications",props:{applications:Object},setup(k){const a=g(null),y=g(!1),u=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d),_=d=>({pending:"warning",under_review:"info",approved:"success",rejected:"danger",disbursed:"success",active:"primary",closed:"contrast",defaulted:"danger"})[d]||"info",A=d=>{a.value=d,y.value=!0},f=()=>{h.visit("/loans/programs")};return(d,t)=>{const $=C("tooltip");return p(),L(N,{title:"My Loan Applications"},{default:i(()=>{var x;return[e("div",S,[e("div",R,[t[2]||(t[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Loan Applications"),e("p",{class:"text-gray-600 mt-1"},"Track your loan application status")],-1)),l(o(b),{label:"Apply for New Loan",icon:"pi pi-plus",onClick:f})]),l(o(V),null,{content:i(()=>[l(o(T),{value:k.applications.data,paginator:!0,rows:10,dataKey:"id",rowHover:!0,class:"p-datatable-sm"},{empty:i(()=>[e("div",B,[t[3]||(t[3]=e("i",{class:"pi pi-inbox text-4xl mb-3"},null,-1)),t[4]||(t[4]=e("p",null,"No loan applications found",-1)),l(o(b),{label:"Apply for a Loan",icon:"pi pi-plus",class:"mt-4",onClick:f})])]),default:i(()=>[l(o(n),{field:"reference_number",header:"Reference",sortable:!0},{body:i(s=>[e("div",O,r(s.data.reference_number),1)]),_:1}),l(o(n),{field:"loan_type",header:"Loan Type",sortable:!0},{body:i(s=>[e("div",P,r(s.data.loan_type),1)]),_:1}),l(o(n),{field:"amount",header:"Amount",sortable:!0},{body:i(s=>[e("div",M,r(u(s.data.amount)),1)]),_:1}),l(o(n),{field:"term_months",header:"Term",sortable:!0},{body:i(s=>[v(r(s.data.term_months)+" months ",1)]),_:1}),l(o(n),{field:"interest_rate",header:"Rate",sortable:!0},{body:i(s=>[v(r(s.data.interest_rate)+"% ",1)]),_:1}),l(o(n),{field:"monthly_payment",header:"Monthly Payment",sortable:!0},{body:i(s=>[v(r(u(s.data.monthly_payment)),1)]),_:1}),l(o(n),{field:"status",header:"Status",sortable:!0},{body:i(s=>[l(o(w),{value:s.data.status_label,severity:_(s.data.status)},null,8,["value","severity"])]),_:1}),l(o(n),{field:"created_at",header:"Applied On",sortable:!0},{body:i(s=>[e("div",U,r(s.data.created_at),1)]),_:1}),l(o(n),{header:"Actions",exportable:!1},{body:i(s=>[j(l(o(b),{icon:"pi pi-eye",size:"small",text:"",rounded:"",severity:"info",onClick:ae=>A(s.data)},null,8,["onClick"]),[[$,"View Details",void 0,{top:!0}]])]),_:1})]),_:1},8,["value"])]),_:1})]),l(o(D),{visible:y.value,"onUpdate:visible":t[1]||(t[1]=s=>y.value=s),modal:"",header:`Application ${(x=a.value)==null?void 0:x.reference_number}`,style:{width:"50rem"},breakpoints:{"960px":"75vw","640px":"90vw"}},{default:i(()=>[a.value?(p(),m("div",z,[e("div",I,[e("div",null,[t[5]||(t[5]=e("label",{class:"text-sm text-gray-600"},"Status",-1)),e("div",q,[l(o(w),{value:a.value.status_label,severity:_(a.value.status)},null,8,["value","severity"])])]),e("div",null,[t[6]||(t[6]=e("label",{class:"text-sm text-gray-600"},"Loan Type",-1)),e("p",E,r(a.value.loan_type),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm text-gray-600"},"Loan Amount",-1)),e("p",F,r(u(a.value.amount)),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"text-sm text-gray-600"},"Term",-1)),e("p",H,r(a.value.term_months)+" months",1)]),e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm text-gray-600"},"Interest Rate",-1)),e("p",K,r(a.value.interest_rate)+"%",1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"text-sm text-gray-600"},"Monthly Payment",-1)),e("p",Y,r(u(a.value.monthly_payment)),1)]),e("div",null,[t[11]||(t[11]=e("label",{class:"text-sm text-gray-600"},"Total Payable",-1)),e("p",G,r(u(a.value.total_payable)),1)]),e("div",null,[t[12]||(t[12]=e("label",{class:"text-sm text-gray-600"},"Applied On",-1)),e("p",J,r(a.value.created_at),1)])]),a.value.purpose?(p(),m("div",Q,[t[13]||(t[13]=e("label",{class:"text-sm text-gray-600"},"Purpose",-1)),e("p",W,r(a.value.purpose),1)])):c("",!0),a.value.approved_at?(p(),m("div",X,[t[14]||(t[14]=e("label",{class:"text-sm text-gray-600"},"Approved On",-1)),e("p",Z,r(a.value.approved_at),1)])):c("",!0),a.value.rejection_reason?(p(),m("div",ee,[t[15]||(t[15]=e("label",{class:"text-sm font-semibold text-red-800"},"Rejection Reason",-1)),e("p",te,r(a.value.rejection_reason),1)])):c("",!0),a.value.loan_id?(p(),m("div",se,[t[16]||(t[16]=e("p",{class:"text-green-800"},[e("i",{class:"pi pi-check-circle mr-2"}),v(" Your loan has been disbursed and is now active. ")],-1)),l(o(b),{label:"View Loan Details",icon:"pi pi-arrow-right",size:"small",class:"mt-3",onClick:t[0]||(t[0]=s=>o(h).visit("/loans"))})])):c("",!0)])):c("",!0)]),_:1},8,["visible","header"])]}),_:1})}}};export{xe as default};
