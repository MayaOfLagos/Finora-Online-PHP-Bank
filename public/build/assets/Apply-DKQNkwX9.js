import{k as A,j as h,g as D,w as x,d as n,a as e,u as o,t as u,c as l,o as a,F as f,r as b,i as k,b as v,n as $,q as w}from"./app-B-kuXHFv.js";import{_ as L}from"./DashboardLayout-CxKpJXdt.js";import{s as j}from"./index-Bkguqmcl.js";import{a as y}from"./index-Cbb5XdGh.js";import{s as E}from"./index-Dx8szRdg.js";import{s as N}from"./index-OjYpyyKW.js";import{s as C}from"./index-Cl71K0EB.js";import{s as V}from"./index-DGirmzUV.js";/* empty css            */import"./index-Cbeh9xJJ.js";import"./index-BQO7QaEp.js";import"./index-B2KMBeGL.js";import"./index-CR1mbdI2.js";import"./index-iMsXsHjH.js";import"./AppLogo-a4JQMzSy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-VmG_OLNi.js";import"./index-C2uGVgyi.js";const T={class:"space-y-6"},R={class:"flex items-center justify-between"},I={class:"text-2xl font-bold text-gray-900 dark:text-white"},G={class:"bg-gradient-to-r from-indigo-500 to-blue-600 p-6 text-white"},O={class:"text-xl font-bold"},K={class:"text-indigo-100 mt-2"},W={class:"grid gap-4 md:grid-cols-3"},H={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},J={class:"text-2xl font-bold text-gray-900 dark:text-white mt-2"},Q={class:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/30"},X={class:"mt-2 space-y-1 text-sm text-blue-900 dark:text-blue-200"},Y={class:"p-4 rounded-lg bg-orange-50 dark:bg-orange-900/30"},Z={class:"mt-2 space-y-1 text-sm text-orange-900 dark:text-orange-200"},ee={class:"flex items-center justify-between"},te={class:"flex gap-2"},se=["onClick","disabled"],ae={key:0,class:"pi pi-check text-lg"},le={key:1},re={key:0,class:"space-y-6"},oe={class:"flex justify-end"},ie={key:1,class:"space-y-6"},ne={key:0},de={class:"space-y-2"},ue={class:"flex items-center gap-3 flex-1"},ce={class:"flex-1"},me={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},pe={class:"text-xs text-gray-500 dark:text-gray-400"},ge={class:"flex justify-between"},xe={key:2,class:"space-y-6"},ye={class:"space-y-4"},ve={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700"},fe={class:"text-gray-900 dark:text-white whitespace-pre-wrap text-sm"},be={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700"},ke={class:"text-xs text-gray-600 dark:text-gray-400 mb-2 font-semibold"},he={class:"space-y-1"},_e={class:"flex justify-between"},Re={__name:"Apply",props:{program:{type:Object,required:!0}},setup(p){const F=p,g=A(),d=h({grant_program_id:F.program.id,cover_letter:"",documents:[]}),m=h([]),_=h(!1),r=h(1),z=i=>{const t=i.files;t.forEach(s=>{m.value.push({name:s.name,size:s.size,file:s}),d.value.documents.push(s)}),g.add({severity:"info",summary:"File Uploaded",detail:`${t.length} file(s) uploaded`,life:3e3})},P=i=>{m.value.splice(i,1),d.value.documents.splice(i,1)},S=i=>{if(i===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB"],c=Math.floor(Math.log(i)/Math.log(t));return Math.round(i/Math.pow(t,c)*100)/100+" "+s[c]},U=()=>{w.visit("/grants")},M=()=>{r.value--},B=()=>{if(r.value===1){if(!d.value.cover_letter.trim()){g.add({severity:"warn",summary:"Missing Information",detail:"Please fill in your cover letter",life:3e3});return}}else if(r.value===2&&d.value.documents.length===0){g.add({severity:"warn",summary:"Missing Documents",detail:"Please upload at least one required document",life:3e3});return}r.value++},q=()=>{if(!d.value.cover_letter.trim()){g.add({severity:"warn",summary:"Missing Information",detail:"Please fill in your cover letter",life:3e3}),r.value=1;return}if(d.value.documents.length===0){g.add({severity:"warn",summary:"Missing Documents",detail:"Please upload at least one required document",life:3e3}),r.value=2;return}_.value=!0;const i=new FormData;i.append("grant_program_id",d.value.grant_program_id),i.append("cover_letter",d.value.cover_letter),d.value.documents.forEach((t,s)=>{i.append(`documents[${s}]`,t)}),w.post("/grants/apply",i,{onSuccess:()=>{g.add({severity:"success",summary:"Success",detail:"Application submitted successfully",life:3e3}),setTimeout(()=>{w.visit("/grants/applications")},1500)},onError:t=>{g.add({severity:"error",summary:"Error",detail:Object.values(t)[0]||"Failed to submit application",life:3e3}),_.value=!1}})};return(i,t)=>(a(),D(L,{title:"Apply for Grant"},{default:x(()=>[n(o(V)),e("div",T,[e("div",R,[e("div",null,[e("h2",I,"Apply for "+u(p.program.name),1),t[1]||(t[1]=e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Complete the application form below",-1))]),n(o(y),{label:"Back to Grants",severity:"secondary",icon:"pi pi-arrow-left",onClick:U})]),n(o(j),null,{header:x(()=>[e("div",G,[e("h3",O,u(p.program.name),1),e("p",K,u(p.program.description),1)])]),content:x(()=>[e("div",W,[e("div",H,[t[2]||(t[2]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Available Amount",-1)),e("p",J," $"+u(p.program.amount_display.toLocaleString()),1)]),e("div",Q,[t[4]||(t[4]=e("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-semibold"},"Eligibility Criteria",-1)),e("ul",X,[(a(!0),l(f,null,b(p.program.eligibility_criteria,(s,c)=>(a(),l("li",{key:c,class:"flex items-center gap-2"},[t[3]||(t[3]=e("i",{class:"pi pi-check text-xs"},null,-1)),k(" "+u(s),1)]))),128))])]),e("div",Y,[t[6]||(t[6]=e("p",{class:"text-xs text-orange-600 dark:text-orange-400 font-semibold"},"Required Documents",-1)),e("ul",Z,[(a(!0),l(f,null,b(p.program.required_documents,(s,c)=>(a(),l("li",{key:c,class:"flex items-center gap-2"},[t[5]||(t[5]=e("i",{class:"pi pi-file text-xs"},null,-1)),k(" "+u(s),1)]))),128))])])])]),_:1}),e("div",ee,[e("div",te,[(a(),l(f,null,b([1,2,3],s=>e("div",{key:s,class:"flex items-center"},[e("button",{class:$(["w-10 h-10 rounded-full font-bold flex items-center justify-center transition-all",r.value===s?"bg-indigo-600 text-white":r.value>s?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"]),onClick:c=>r.value=s,disabled:r.value<s},[r.value>s?(a(),l("i",ae)):(a(),l("span",le,u(s),1))],10,se),s<3?(a(),l("div",{key:0,class:$(["w-12 h-1 mx-1",r.value>s?"bg-green-500":"bg-gray-200 dark:bg-gray-700"])},null,2)):v("",!0)])),64))])]),n(o(j),null,{content:x(()=>[r.value===1?(a(),l("div",re,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 1: Cover Letter",-1)),t[8]||(t[8]=e("label",{for:"cover-letter",class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},[k(" Cover Letter "),e("span",{class:"text-red-500"},"*")],-1)),n(o(E),{id:"cover-letter",modelValue:d.value.cover_letter,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value.cover_letter=s),rows:"10",placeholder:"Tell us why you are interested in this grant and how it will help you...",class:"w-full"},null,8,["modelValue"]),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Minimum 50 characters recommended",-1))]),n(o(C),{severity:"info"},{default:x(()=>[...t[10]||(t[10]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Be specific about your goals and how this grant will help you achieve them.",-1)])]),_:1}),e("div",oe,[n(o(y),{label:"Next",icon:"pi pi-arrow-right",onClick:B,disabled:!d.value.cover_letter.trim()},null,8,["disabled"])])])):v("",!0),r.value===2?(a(),l("div",ie,[e("div",null,[t[11]||(t[11]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 2: Upload Documents",-1)),t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},[k(" Upload Required Documents "),e("span",{class:"text-red-500"},"*")],-1)),n(o(N),{name:"documents",customUpload:!0,auto:!0,onUploader:z,multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",chooseLabel:"Select Files",uploadLabel:"Upload",cancelLabel:"Cancel"}),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," Supported formats: PDF, Word, Excel, Images. Max size: 5MB per file ",-1))]),m.value.length>0?(a(),l("div",ne,[t[15]||(t[15]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-3"},"Uploaded Documents",-1)),e("div",de,[(a(!0),l(f,null,b(m.value,(s,c)=>(a(),l("div",{key:c,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",ue,[t[14]||(t[14]=e("i",{class:"pi pi-file text-blue-500"},null,-1)),e("div",ce,[e("p",me,u(s.name),1),e("p",pe,u(S(s.size)),1)])]),n(o(y),{icon:"pi pi-trash",severity:"danger",text:"",size:"small",onClick:we=>P(c)},null,8,["onClick"])]))),128))])])):v("",!0),m.value.length===0?(a(),D(o(C),{key:1,severity:"warn"},{default:x(()=>[...t[16]||(t[16]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Please upload all required documents before proceeding.",-1)])]),_:1})):v("",!0),e("div",ge,[n(o(y),{label:"Previous",severity:"secondary",icon:"pi pi-arrow-left",onClick:M}),n(o(y),{label:"Next",icon:"pi pi-arrow-right",onClick:B,disabled:m.value.length===0},null,8,["disabled"])])])):v("",!0),r.value===3?(a(),l("div",xe,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 3: Review & Submit",-1)),n(o(C),{severity:"success"},{default:x(()=>[...t[17]||(t[17]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Review your application details and click Submit to send your application.",-1)])]),_:1}),e("div",ye,[e("div",ve,[t[18]||(t[18]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-semibold"},"Cover Letter",-1)),e("p",fe,u(d.value.cover_letter),1)]),e("div",be,[e("p",ke,"Documents ("+u(m.value.length)+" file(s))",1),e("ul",he,[(a(!0),l(f,null,b(m.value,s=>(a(),l("li",{key:s.name,class:"flex items-center gap-2 text-sm text-gray-900 dark:text-white"},[t[19]||(t[19]=e("i",{class:"pi pi-file text-blue-500"},null,-1)),k(" "+u(s.name)+" ("+u(S(s.size))+") ",1)]))),128))])])]),e("div",_e,[n(o(y),{label:"Previous",severity:"secondary",icon:"pi pi-arrow-left",onClick:M}),n(o(y),{label:"Submit Application",icon:"pi pi-send",loading:_.value,onClick:q},null,8,["loading"])])])):v("",!0)]),_:1})])]),_:1}))}};export{Re as default};
