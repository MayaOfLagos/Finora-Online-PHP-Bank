import{j as h,h as B,o as l,w as x,a as e,d,t as u,u as i,c as a,F as f,r as b,i as k,b as v,n as j,p as w}from"./app-pKJNfMRl.js";import{D as A}from"./DashboardLayout-DUkHFthn.js";import{s as F}from"./index-OLDQvyIc.js";import{a as y}from"./index-0Wu5cDGM.js";import{s as q}from"./index-BobMLkE4.js";import{s as E}from"./index-Dx910E8K.js";import{s as C}from"./index-KeYFm4k9.js";import{u as N}from"./useToast-Clsx83_F.js";/* empty css            */import"./index-C_ADElv8.js";import"./index-DPCvanh-.js";import"./index-C89qVnDF.js";import"./index-CfAZwmyf.js";import"./index-CNg3KC2i.js";import"./AppLogo-BTsSFa4-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LiveChatWidget-BXRvd797.js";import"./index-D9m-7Ja_.js";import"./index-BSwlfOwR.js";import"./index-BhUyYZSG.js";const V={class:"space-y-6"},T={class:"flex items-center justify-between"},R={class:"text-2xl font-bold text-gray-900 dark:text-white"},I={class:"bg-gradient-to-r from-indigo-500 to-blue-600 p-6 text-white"},G={class:"text-xl font-bold"},O={class:"text-indigo-100 mt-2"},K={class:"grid gap-4 md:grid-cols-3"},W={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},H={class:"text-2xl font-bold text-gray-900 dark:text-white mt-2"},J={class:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/30"},Q={class:"mt-2 space-y-1 text-sm text-blue-900 dark:text-blue-200"},X={class:"p-4 rounded-lg bg-orange-50 dark:bg-orange-900/30"},Y={class:"mt-2 space-y-1 text-sm text-orange-900 dark:text-orange-200"},Z={class:"flex items-center justify-between"},ee={class:"flex gap-2"},te=["onClick","disabled"],se={key:0,class:"pi pi-check text-lg"},le={key:1},ae={key:0,class:"space-y-6"},re={class:"flex justify-end"},oe={key:1,class:"space-y-6"},ie={key:0},ne={class:"space-y-2"},de={class:"flex items-center gap-3 flex-1"},ue={class:"flex-1"},ce={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},pe={class:"text-xs text-gray-500 dark:text-gray-400"},me={class:"flex justify-between"},ge={key:2,class:"space-y-6"},xe={class:"space-y-4"},ye={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700"},ve={class:"text-gray-900 dark:text-white whitespace-pre-wrap text-sm"},fe={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700"},be={class:"text-xs text-gray-600 dark:text-gray-400 mb-2 font-semibold"},ke={class:"space-y-1"},he={class:"flex justify-between"},Ie={__name:"Apply",props:{program:{type:Object,required:!0}},setup(m){const z=m,g=N(),n=h({grant_program_id:z.program.id,cover_letter:"",documents:[]}),p=h([]),_=h(!1),r=h(1),L=o=>{const t=o.files;t.forEach(s=>{p.value.push({name:s.name,size:s.size,file:s}),n.value.documents.push(s)}),g.info(`${t.length} file(s) uploaded`,"File Uploaded")},P=o=>{p.value.splice(o,1),n.value.documents.splice(o,1)},S=o=>{if(o===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB"],c=Math.floor(Math.log(o)/Math.log(t));return Math.round(o/Math.pow(t,c)*100)/100+" "+s[c]},U=()=>{w.visit("/grants")},D=()=>{r.value--},M=()=>{if(r.value===1){if(!n.value.cover_letter.trim()){g.warn("Please fill in your cover letter","Missing Information");return}}else if(r.value===2&&n.value.documents.length===0){g.warn("Please upload at least one required document","Missing Documents");return}r.value++},$=()=>{if(!n.value.cover_letter.trim()){g.warn("Please fill in your cover letter","Missing Information"),r.value=1;return}if(n.value.documents.length===0){g.warn("Please upload at least one required document","Missing Documents"),r.value=2;return}_.value=!0;const o=new FormData;o.append("grant_program_id",n.value.grant_program_id),o.append("cover_letter",n.value.cover_letter),n.value.documents.forEach((t,s)=>{o.append(`documents[${s}]`,t)}),w.post("/grants/apply",o,{onSuccess:()=>{g.success("Application submitted successfully","Success"),setTimeout(()=>{w.visit("/grants/applications")},1500)},onError:t=>{g.error(Object.values(t)[0]||"Failed to submit application","Error"),_.value=!1}})};return(o,t)=>(l(),B(A,{title:"Apply for Grant"},{default:x(()=>[e("div",V,[e("div",T,[e("div",null,[e("h2",R,"Apply for "+u(m.program.name),1),t[1]||(t[1]=e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Complete the application form below",-1))]),d(i(y),{label:"Back to Grants",severity:"secondary",icon:"pi pi-arrow-left",onClick:U})]),d(i(F),null,{header:x(()=>[e("div",I,[e("h3",G,u(m.program.name),1),e("p",O,u(m.program.description),1)])]),content:x(()=>[e("div",K,[e("div",W,[t[2]||(t[2]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400"},"Available Amount",-1)),e("p",H," $"+u(m.program.amount_display.toLocaleString()),1)]),e("div",J,[t[4]||(t[4]=e("p",{class:"text-xs text-blue-600 dark:text-blue-400 font-semibold"},"Eligibility Criteria",-1)),e("ul",Q,[(l(!0),a(f,null,b(m.program.eligibility_criteria,(s,c)=>(l(),a("li",{key:c,class:"flex items-center gap-2"},[t[3]||(t[3]=e("i",{class:"pi pi-check text-xs"},null,-1)),k(" "+u(s),1)]))),128))])]),e("div",X,[t[6]||(t[6]=e("p",{class:"text-xs text-orange-600 dark:text-orange-400 font-semibold"},"Required Documents",-1)),e("ul",Y,[(l(!0),a(f,null,b(m.program.required_documents,(s,c)=>(l(),a("li",{key:c,class:"flex items-center gap-2"},[t[5]||(t[5]=e("i",{class:"pi pi-file text-xs"},null,-1)),k(" "+u(s),1)]))),128))])])])]),_:1}),e("div",Z,[e("div",ee,[(l(),a(f,null,b([1,2,3],s=>e("div",{key:s,class:"flex items-center"},[e("button",{class:j(["w-10 h-10 rounded-full font-bold flex items-center justify-center transition-all",r.value===s?"bg-indigo-600 text-white":r.value>s?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400"]),onClick:c=>r.value=s,disabled:r.value<s},[r.value>s?(l(),a("i",se)):(l(),a("span",le,u(s),1))],10,te),s<3?(l(),a("div",{key:0,class:j(["w-12 h-1 mx-1",r.value>s?"bg-green-500":"bg-gray-200 dark:bg-gray-700"])},null,2)):v("",!0)])),64))])]),d(i(F),null,{content:x(()=>[r.value===1?(l(),a("div",ae,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 1: Cover Letter",-1)),t[8]||(t[8]=e("label",{for:"cover-letter",class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},[k(" Cover Letter "),e("span",{class:"text-red-500"},"*")],-1)),d(i(q),{id:"cover-letter",modelValue:n.value.cover_letter,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.cover_letter=s),rows:"10",placeholder:"Tell us why you are interested in this grant and how it will help you...",class:"w-full"},null,8,["modelValue"]),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Minimum 50 characters recommended",-1))]),d(i(C),{severity:"info"},{default:x(()=>[...t[10]||(t[10]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Be specific about your goals and how this grant will help you achieve them.",-1)])]),_:1}),e("div",re,[d(i(y),{label:"Next",icon:"pi pi-arrow-right",onClick:M,disabled:!n.value.cover_letter.trim()},null,8,["disabled"])])])):v("",!0),r.value===2?(l(),a("div",oe,[e("div",null,[t[11]||(t[11]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 2: Upload Documents",-1)),t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"},[k(" Upload Required Documents "),e("span",{class:"text-red-500"},"*")],-1)),d(i(E),{name:"documents",customUpload:!0,auto:!0,onUploader:L,multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",chooseLabel:"Select Files",uploadLabel:"Upload",cancelLabel:"Cancel"}),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," Supported formats: PDF, Word, Excel, Images. Max size: 5MB per file ",-1))]),p.value.length>0?(l(),a("div",ie,[t[15]||(t[15]=e("h4",{class:"font-semibold text-gray-900 dark:text-white mb-3"},"Uploaded Documents",-1)),e("div",ne,[(l(!0),a(f,null,b(p.value,(s,c)=>(l(),a("div",{key:c,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},[e("div",de,[t[14]||(t[14]=e("i",{class:"pi pi-file text-blue-500"},null,-1)),e("div",ue,[e("p",ce,u(s.name),1),e("p",pe,u(S(s.size)),1)])]),d(i(y),{icon:"pi pi-trash",severity:"danger",text:"",size:"small",onClick:_e=>P(c)},null,8,["onClick"])]))),128))])])):v("",!0),p.value.length===0?(l(),B(i(C),{key:1,severity:"warn"},{default:x(()=>[...t[16]||(t[16]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Please upload all required documents before proceeding.",-1)])]),_:1})):v("",!0),e("div",me,[d(i(y),{label:"Previous",severity:"secondary",icon:"pi pi-arrow-left",onClick:D}),d(i(y),{label:"Next",icon:"pi pi-arrow-right",onClick:M,disabled:p.value.length===0},null,8,["disabled"])])])):v("",!0),r.value===3?(l(),a("div",ge,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Step 3: Review & Submit",-1)),d(i(C),{severity:"success"},{default:x(()=>[...t[17]||(t[17]=[e("p",{class:"text-sm text-gray-900 dark:text-gray-100"},"Review your application details and click Submit to send your application.",-1)])]),_:1}),e("div",xe,[e("div",ye,[t[18]||(t[18]=e("p",{class:"text-xs text-gray-600 dark:text-gray-400 mb-1 font-semibold"},"Cover Letter",-1)),e("p",ve,u(n.value.cover_letter),1)]),e("div",fe,[e("p",be,"Documents ("+u(p.value.length)+" file(s))",1),e("ul",ke,[(l(!0),a(f,null,b(p.value,s=>(l(),a("li",{key:s.name,class:"flex items-center gap-2 text-sm text-gray-900 dark:text-white"},[t[19]||(t[19]=e("i",{class:"pi pi-file text-blue-500"},null,-1)),k(" "+u(s.name)+" ("+u(S(s.size))+") ",1)]))),128))])])]),e("div",he,[d(i(y),{label:"Previous",severity:"secondary",icon:"pi pi-arrow-left",onClick:D}),d(i(y),{label:"Submit Application",icon:"pi pi-send",loading:_.value,onClick:$},null,8,["loading"])])])):v("",!0)]),_:1})])]),_:1}))}};export{Ie as default};
