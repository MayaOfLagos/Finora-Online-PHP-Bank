import{k as K,f as Q,c as g,d as o,u as s,p as X,w as i,a as e,s as $,i as m,g as k,b as x,j as f,o as u,F as T,r as E,n as v,t as c,e as C}from"./app-DtfJ-hl9.js";import{a as p}from"./index-Dnvq49NJ.js";import{s as h}from"./index-pmc5jvfN.js";import{s as Z}from"./index-Cqo2mwGU.js";import{s as ee}from"./index-D5dZYOEM.js";import{s as D}from"./index-Cq3ZrfvC.js";import{s as q}from"./index-C1TWrlT6.js";import{_ as te}from"./DashboardLayout-C0tMUBuT.js";import{u as se}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-4aNkRZH9.js";import"./index-CCdVfenh.js";import"./index-BoHpb_3r.js";import"./index-CdYMGtEj.js";import"./index-cGcPZB9D.js";import"./index-B-YQxXsz.js";import"./index-BVmgqlv6.js";import"./AppLogo-DwpHP11T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"max-w-2xl mx-auto"},le={class:"max-w-2xl mx-auto"},oe={class:"flex items-center justify-between"},ie={class:"mt-3 text-sm font-medium text-center text-gray-600 dark:text-gray-400"},re={class:"space-y-4"},ne=["onClick"],de={class:"flex items-center justify-between"},ce={class:"flex items-center gap-3"},ue={class:"font-medium text-gray-900 dark:text-white"},me={class:"text-sm text-gray-500 dark:text-gray-400"},pe={class:"text-lg font-bold text-gray-900 dark:text-white"},ge={class:"flex justify-end gap-3 pt-4"},be={class:"space-y-4"},xe={class:"flex justify-between mt-2 text-xs text-gray-500"},ke={class:"text-sm"},ye={class:"text-sm mt-1"},fe={class:"flex justify-between gap-3 pt-4"},ve={class:"space-y-6"},he={key:0,class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer"},_e={key:1,class:"relative rounded-lg overflow-hidden"},we=["src"],Ce={key:0,class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer"},De={key:1,class:"relative rounded-lg overflow-hidden"},Se=["src"],je={class:"flex justify-between gap-3 pt-4"},Fe={class:"space-y-4"},Ae={class:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"},Be={class:"text-sm text-blue-900 dark:text-blue-200"},Ue={class:"grid gap-4"},Ve={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Le={class:"mt-1 text-lg font-bold text-gray-900 dark:text-white"},Ie={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Ne={class:"mt-1 text-lg font-bold text-gray-900 dark:text-white"},Re={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},$e={class:"mt-1 text-lg font-bold text-green-600 dark:text-green-400"},Te={class:"flex justify-between gap-3 pt-4"},Pe={class:"py-8 text-center"},Me={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},Ee={class:"space-y-3"},qe={class:"flex justify-between"},Ge={class:"font-bold text-gray-900 dark:text-white"},Ye={class:"flex justify-between"},ze={class:"font-bold text-gray-900 dark:text-white"},Je={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},Oe={class:"font-semibold text-green-600 dark:text-green-400"},We={class:"flex justify-center gap-3 mt-6"},bt={__name:"Check",props:{accounts:{type:Array,default:()=>[]},depositLimits:{type:Object,default:()=>({daily:5e4,perTransaction:25e3,holdDays:5})},todaysTotal:{type:Number,default:0}},setup(A){const y=A,B=K(),{formatCurrency:S}=se(),a=Q({bank_account_id:null,check_number:"",check_front_image:null,check_back_image:null,amount:null}),b=f(!1),U=f(!1),P=f(null),_=f(null),w=f(null),d=f(0),j=[{label:"Select Account"},{label:"Check Details"},{label:"Upload Images"},{label:"Review & Submit"},{label:"Complete"}],M=C(()=>y.accounts.find(n=>n.id===a.bank_account_id)),V=C(()=>(y.depositLimits.daily-y.todaysTotal)/100),L=C(()=>Math.min(y.depositLimits.perTransaction/100,V.value)),F=C(()=>{const n=new Date;return n.setDate(n.getDate()+y.depositLimits.holdDays),n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),G=C(()=>a.bank_account_id&&a.check_number&&a.check_front_image&&a.check_back_image&&a.amount&&a.amount>0&&a.amount<=L.value),I=()=>{d.value<3&&R()&&d.value++},N=()=>{d.value>0&&d.value--},R=()=>d.value===0?!!a.bank_account_id:d.value===1?a.check_number&&a.amount&&a.amount>0&&a.amount<=L.value:d.value===2?a.check_front_image&&a.check_back_image:!0,Y=n=>{const t=n.files[0];if(t){a.check_front_image=t;const l=new FileReader;l.onload=r=>{_.value=r.target.result},l.readAsDataURL(t)}},z=n=>{const t=n.files[0];if(t){a.check_back_image=t;const l=new FileReader;l.onload=r=>{w.value=r.target.result},l.readAsDataURL(t)}},J=()=>{a.check_front_image=null,_.value=null},O=()=>{a.check_back_image=null,w.value=null},W=()=>{if(!G.value){B.add({severity:"error",summary:"Invalid Check Deposit",detail:"Please verify all check details and images",life:3e3});return}U.value=!0,a.transform(n=>({...n,amount:Math.round((n.amount||0)*100)})).post(route("deposits.check.submit"),{preserveScroll:!0,onSuccess:n=>{b.value=!0,P.value={...a.data(),holdUntilDate:F.value},d.value=4,B.add({severity:"success",summary:"Check Deposit Submitted",detail:"Your check will be processed and funds available after hold period",life:5e3})},onError:n=>{B.add({severity:"error",summary:"Deposit Failed",detail:n.check_front_image||n.check_back_image||n.amount||"Unable to submit deposit",life:5e3})},onFinish:()=>{U.value=!1}})},H=()=>{a.reset(),d.value=0,b.value=!1,P.value=null,_.value=null,w.value=null};return(n,t)=>(u(),g(T,null,[o(s(X),{title:"Check Deposit"}),o(te,{title:"Check Deposit"},{default:i(()=>[e("div",ae,[o(s($),{href:"/deposits",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:i(()=>[...t[2]||(t[2]=[e("i",{class:"pi pi-arrow-left"},null,-1),m(" Back to Deposits ",-1)])]),_:1}),t[3]||(t[3]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Check Deposit "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Deposit checks by uploading images ")],-1))]),e("div",le,[b.value?x("",!0):(u(),k(s(h),{key:0,class:"mb-6"},{content:i(()=>[e("div",oe,[(u(),g(T,null,E(j,(l,r)=>e("div",{key:r,class:v(["flex items-center",{"flex-1":r<j.length-1}])},[e("div",{class:v(["flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold transition-all",[r===d.value?"bg-blue-500 text-white":r<d.value?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300"]])},c(r+1),3),r<j.length-1?(u(),g("div",{key:0,class:v(["flex-1 h-1 mx-2 transition-all",[r<d.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"]])},null,2)):x("",!0)],2)),64))]),e("p",ie,c(j[d.value].label),1)]),_:1})),d.value===0&&!b.value?(u(),k(s(h),{key:1,class:"shadow-lg"},{title:i(()=>[...t[4]||(t[4]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-wallet text-primary-500"}),m(" Select Deposit Account ")],-1)])]),content:i(()=>[e("div",re,[(u(!0),g(T,null,E(y.accounts,l=>{var r;return u(),g("div",{key:l.id,onClick:He=>s(a).bank_account_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).bank_account_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[e("div",de,[e("div",ce,[e("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full transition-all",[s(a).bank_account_id===l.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[e("i",{class:v(["pi",[s(a).bank_account_id===l.id?"pi-check":"pi-wallet"]])},null,2)],2),e("div",null,[e("p",ue,c((r=l.account_type)==null?void 0:r.name),1),e("p",me," ****"+c(l.account_number.slice(-4)),1)])]),e("p",pe,c(s(S)(l.balance,l.currency)),1)])],10,ne)}),128)),e("div",ge,[o(s($),{href:"/deposits"},{default:i(()=>[o(s(p),{label:"Cancel",outlined:""})]),_:1}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).bank_account_id,onClick:I},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===1&&!b.value?(u(),k(s(h),{key:2,class:"shadow-lg"},{title:i(()=>[...t[5]||(t[5]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-id-card text-primary-500"}),m(" Check Details ")],-1)])]),content:i(()=>[e("div",be,[e("div",null,[t[6]||(t[6]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Number "),e("span",{class:"text-red-500"},"*")],-1)),o(s(ee),{modelValue:s(a).check_number,"onUpdate:modelValue":t[0]||(t[0]=l=>s(a).check_number=l),type:"text",placeholder:"e.g., 123456",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Deposit Amount "),e("span",{class:"text-red-500"},"*")],-1)),o(s(Z),{modelValue:s(a).amount,"onUpdate:modelValue":t[1]||(t[1]=l=>s(a).amount=l),mode:"currency",currency:"USD",locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:L.value},null,8,["modelValue","max"]),e("div",xe,[e("span",null,"Max per check: $"+c((A.depositLimits.perTransaction/100).toFixed(2)),1),e("span",null,"Available today: "+c(s(S)(V.value*100,"USD")),1)])]),V.value<=0?(u(),k(s(D),{key:0,severity:"error",closable:!1},{default:i(()=>[...t[8]||(t[8]=[e("p",{class:"text-sm"},"Daily check deposit limit reached",-1)])]),_:1})):x("",!0),o(s(D),{severity:"info",closable:!1},{default:i(()=>{var l,r;return[e("p",ke,[t[9]||(t[9]=e("strong",null,"Account:",-1)),m(" "+c((r=(l=M.value)==null?void 0:l.account_type)==null?void 0:r.name),1)]),e("p",ye,[t[10]||(t[10]=e("strong",null,"Funds Available:",-1)),m(" "+c(F.value),1)])]}),_:1}),e("div",fe,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:N}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!R(),onClick:I},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===2&&!b.value?(u(),k(s(h),{key:3,class:"shadow-lg"},{title:i(()=>[...t[11]||(t[11]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-image text-primary-500"}),m(" Upload Check Images ")],-1)])]),content:i(()=>[e("div",ve,[o(s(D),{severity:"info",closable:!1},{default:i(()=>[...t[12]||(t[12]=[e("p",{class:"text-sm"},[e("strong",null,"Upload Requirements:")],-1),e("ul",{class:"mt-2 text-sm space-y-1 list-disc list-inside"},[e("li",null,"Maximum 5MB per image"),e("li",null,"Clear, legible images (JPG, PNG)"),e("li",null,"Front: Account holder name visible"),e("li",null,"Back: Endorsement signature required")],-1)])]),_:1}),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Front "),e("span",{class:"text-red-500"},"*")],-1)),_.value?(u(),g("div",_e,[e("img",{src:_.value,alt:"Check Front",class:"w-full h-64 object-cover"},null,8,we),o(s(p),{icon:"pi pi-times",severity:"danger",text:"",class:"absolute top-2 right-2",onClick:J})])):(u(),g("div",he,[o(s(q),{name:"check_front",onSelect:Y,accept:"image/*",auto:!1,"show-upload-button":!1,"show-cancel-button":!1},{content:i(()=>[...t[13]||(t[13]=[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"text-4xl text-gray-400 pi pi-cloud-upload"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Click to upload check front image")],-1)])]),_:1})]))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Back (Endorsement) "),e("span",{class:"text-red-500"},"*")],-1)),w.value?(u(),g("div",De,[e("img",{src:w.value,alt:"Check Back",class:"w-full h-64 object-cover"},null,8,Se),o(s(p),{icon:"pi pi-times",severity:"danger",text:"",class:"absolute top-2 right-2",onClick:O})])):(u(),g("div",Ce,[o(s(q),{name:"check_back",onSelect:z,accept:"image/*",auto:!1,"show-upload-button":!1,"show-cancel-button":!1},{content:i(()=>[...t[15]||(t[15]=[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"text-4xl text-gray-400 pi pi-cloud-upload"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Click to upload check back image")],-1)])]),_:1})]))]),e("div",je,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:N}),o(s(p),{label:"Review Deposit",icon:"pi pi-arrow-right",disabled:!R(),onClick:I},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===3&&!b.value?(u(),k(s(h),{key:4,class:"shadow-lg"},{title:i(()=>[...t[17]||(t[17]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-check-circle text-primary-500"}),m(" Review Check Deposit ")],-1)])]),content:i(()=>{var l,r;return[e("div",Fe,[e("div",Ae,[e("p",Be,[t[18]||(t[18]=e("i",{class:"mr-2 pi pi-info-circle"},null,-1)),t[19]||(t[19]=m(" Funds will be available on ",-1)),e("strong",null,c(F.value),1),m(" ("+c(A.depositLimits.holdDays)+"-day hold) ",1)])]),e("div",Ue,[e("div",Ve,[t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Account",-1)),e("p",Le,c((r=(l=M.value)==null?void 0:l.account_type)==null?void 0:r.name),1)]),e("div",Ie,[t[21]||(t[21]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Check #",-1)),e("p",Ne,c(s(a).check_number),1)]),e("div",Re,[t[22]||(t[22]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Deposit Amount",-1)),e("p",$e,c(s(S)(s(a).amount*100,"USD")),1)])]),o(s(D),{severity:"warning",closable:!1},{default:i(()=>[...t[23]||(t[23]=[e("p",{class:"text-sm"},"By submitting, you certify that the check images are clear and the deposit amount is correct.",-1)])]),_:1}),e("div",Te,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:N}),o(s(p),{label:"Submit Deposit",icon:"pi pi-send",loading:U.value,onClick:W},null,8,["loading"])])])]}),_:1})):x("",!0),b.value?(u(),k(s(h),{key:5,class:"shadow-lg"},{content:i(()=>[e("div",Pe,[t[28]||(t[28]=e("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30"},[e("i",{class:"text-4xl text-green-600 pi pi-check dark:text-green-400"})],-1)),t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Check Deposit Submitted ",-1)),t[30]||(t[30]=e("p",{class:"mt-2 text-gray-500"}," Your check has been received and is pending verification ",-1)),e("div",Me,[e("div",Ee,[e("div",qe,[t[24]||(t[24]=e("span",{class:"text-gray-500"},"Check #",-1)),e("span",Ge,c(s(a).check_number),1)]),e("div",Ye,[t[25]||(t[25]=e("span",{class:"text-gray-500"},"Amount",-1)),e("span",ze,c(s(S)(s(a).amount*100,"USD")),1)]),e("div",Je,[t[26]||(t[26]=e("span",{class:"text-gray-500"},"Funds Available",-1)),e("span",Oe,c(F.value),1)])])]),o(s(D),{severity:"info",closable:!1,class:"mt-4"},{default:i(()=>[...t[27]||(t[27]=[e("p",{class:"text-sm"},"We'll verify your check images and notify you via email when processing is complete.",-1)])]),_:1}),e("div",We,[o(s(p),{label:"New Deposit",icon:"pi pi-plus",outlined:"",onClick:H}),o(s($),{href:"/deposits"},{default:i(()=>[o(s(p),{label:"Back to Deposits",icon:"pi pi-arrow-left"})]),_:1})])])]),_:1})):x("",!0)])]),_:1})],64))}};export{bt as default};
