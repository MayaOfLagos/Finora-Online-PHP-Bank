import{k as X,f as Z,c as g,d as o,u as s,p as ee,w as i,a as e,s as T,i as m,h as y,b as x,j as f,o as u,F as $,r as q,n as v,t as c,e as h,A as te}from"./app-BTmqTPFI.js";import{a as p}from"./index-B9kb_fgF.js";import{s as _}from"./index-ukHySufX.js";import{s as se}from"./index-p4pRHJ1w.js";import{s as ae}from"./index-DZ1BMyBN.js";import{s as j}from"./index-DL4BWZ5E.js";import{s as G}from"./index-DyraSSGA.js";import{_ as le}from"./DashboardLayout-DLpur63g.js";import{u as oe}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-w1hA638j.js";import"./index-DCmi3N4J.js";import"./index-CVxa242K.js";import"./index-BpROmj6E.js";import"./index-lQnEeHiM.js";import"./index-DKy2-VhW.js";import"./index-DIIYjyrO.js";import"./AppLogo-BZy6E-qR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-v9Vk3IOX.js";const re={class:"max-w-2xl mx-auto"},ie={class:"max-w-2xl mx-auto"},ne={class:"flex items-center justify-between"},de={class:"mt-3 text-sm font-medium text-center text-gray-600 dark:text-gray-400"},ce={class:"space-y-4"},ue=["onClick"],me={class:"flex items-center justify-between"},pe={class:"flex items-center gap-3"},ge={class:"font-medium text-gray-900 dark:text-white"},be={class:"text-sm text-gray-500 dark:text-gray-400"},xe={class:"text-lg font-bold text-gray-900 dark:text-white"},ye={class:"flex justify-end gap-3 pt-4"},ke={class:"space-y-4"},fe={class:"flex justify-between mt-2 text-xs text-gray-500"},ve={class:"text-sm"},he={class:"text-sm mt-1"},_e={class:"flex justify-between gap-3 pt-4"},we={class:"space-y-6"},Ce={key:0,class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer"},De={key:1,class:"relative rounded-lg overflow-hidden"},Se=["src"],je={key:0,class:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-gray-400 transition-colors cursor-pointer"},Ae={key:1,class:"relative rounded-lg overflow-hidden"},Be=["src"],Fe={class:"flex justify-between gap-3 pt-4"},Ue={class:"space-y-4"},Ve={class:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"},Le={class:"text-sm text-blue-900 dark:text-blue-200"},Ie={class:"grid gap-4"},Ne={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Re={class:"mt-1 text-lg font-bold text-gray-900 dark:text-white"},Pe={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Te={class:"mt-1 text-lg font-bold text-gray-900 dark:text-white"},$e={class:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Me={class:"mt-1 text-lg font-bold text-green-600 dark:text-green-400"},Ee={class:"flex justify-between gap-3 pt-4"},qe={class:"py-8 text-center"},Ge={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},Ye={class:"space-y-3"},ze={class:"flex justify-between"},Je={class:"font-bold text-gray-900 dark:text-white"},Oe={class:"flex justify-between"},We={class:"font-bold text-gray-900 dark:text-white"},He={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},Ke={class:"font-semibold text-green-600 dark:text-green-400"},Qe={class:"flex justify-center gap-3 mt-6"},ft={__name:"Check",props:{accounts:{type:Array,default:()=>[]},depositLimits:{type:Object,default:()=>({daily:5e4,perTransaction:25e3,holdDays:5})},todaysTotal:{type:Number,default:0}},setup(F){const k=F,U=X(),{formatCurrency:w}=oe(),Y=te(),C=h(()=>{var r;return((r=Y.props.auth)==null?void 0:r.currency)||"USD"}),a=Z({bank_account_id:null,check_number:"",check_front_image:null,check_back_image:null,amount:null}),b=f(!1),V=f(!1),M=f(null),D=f(null),S=f(null),d=f(0),A=[{label:"Select Account"},{label:"Check Details"},{label:"Upload Images"},{label:"Review & Submit"},{label:"Complete"}],E=h(()=>k.accounts.find(r=>r.id===a.bank_account_id)),L=h(()=>(k.depositLimits.daily-k.todaysTotal)/100),I=h(()=>Math.min(k.depositLimits.perTransaction/100,L.value)),B=h(()=>{const r=new Date;return r.setDate(r.getDate()+k.depositLimits.holdDays),r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),z=h(()=>a.bank_account_id&&a.check_number&&a.check_front_image&&a.check_back_image&&a.amount&&a.amount>0&&a.amount<=I.value),N=()=>{d.value<3&&P()&&d.value++},R=()=>{d.value>0&&d.value--},P=()=>d.value===0?!!a.bank_account_id:d.value===1?a.check_number&&a.amount&&a.amount>0&&a.amount<=I.value:d.value===2?a.check_front_image&&a.check_back_image:!0,J=r=>{const t=r.files[0];if(t){a.check_front_image=t;const l=new FileReader;l.onload=n=>{D.value=n.target.result},l.readAsDataURL(t)}},O=r=>{const t=r.files[0];if(t){a.check_back_image=t;const l=new FileReader;l.onload=n=>{S.value=n.target.result},l.readAsDataURL(t)}},W=()=>{a.check_front_image=null,D.value=null},H=()=>{a.check_back_image=null,S.value=null},K=()=>{if(!z.value){U.add({severity:"error",summary:"Invalid Check Deposit",detail:"Please verify all check details and images",life:3e3});return}V.value=!0,a.transform(r=>({...r,amount:Math.round((r.amount||0)*100)})).post(route("deposits.check.submit"),{preserveScroll:!0,onSuccess:r=>{b.value=!0,M.value={...a.data(),holdUntilDate:B.value},d.value=4,U.add({severity:"success",summary:"Check Deposit Submitted",detail:"Your check will be processed and funds available after hold period",life:5e3})},onError:r=>{U.add({severity:"error",summary:"Deposit Failed",detail:r.check_front_image||r.check_back_image||r.amount||"Unable to submit deposit",life:5e3})},onFinish:()=>{V.value=!1}})},Q=()=>{a.reset(),d.value=0,b.value=!1,M.value=null,D.value=null,S.value=null};return(r,t)=>(u(),g($,null,[o(s(ee),{title:"Check Deposit"}),o(le,{title:"Check Deposit"},{default:i(()=>[e("div",re,[o(s(T),{href:"/deposits",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:i(()=>[...t[2]||(t[2]=[e("i",{class:"pi pi-arrow-left"},null,-1),m(" Back to Deposits ",-1)])]),_:1}),t[3]||(t[3]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Check Deposit "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Deposit checks by uploading images ")],-1))]),e("div",ie,[b.value?x("",!0):(u(),y(s(_),{key:0,class:"mb-6"},{content:i(()=>[e("div",ne,[(u(),g($,null,q(A,(l,n)=>e("div",{key:n,class:v(["flex items-center",{"flex-1":n<A.length-1}])},[e("div",{class:v(["flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold transition-all",[n===d.value?"bg-blue-500 text-white":n<d.value?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300"]])},c(n+1),3),n<A.length-1?(u(),g("div",{key:0,class:v(["flex-1 h-1 mx-2 transition-all",[n<d.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"]])},null,2)):x("",!0)],2)),64))]),e("p",de,c(A[d.value].label),1)]),_:1})),d.value===0&&!b.value?(u(),y(s(_),{key:1,class:"shadow-lg"},{title:i(()=>[...t[4]||(t[4]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-wallet text-primary-500"}),m(" Select Deposit Account ")],-1)])]),content:i(()=>[e("div",ce,[(u(!0),g($,null,q(k.accounts,l=>{var n;return u(),g("div",{key:l.id,onClick:Xe=>s(a).bank_account_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).bank_account_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[e("div",me,[e("div",pe,[e("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full transition-all",[s(a).bank_account_id===l.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[e("i",{class:v(["pi",[s(a).bank_account_id===l.id?"pi-check":"pi-wallet"]])},null,2)],2),e("div",null,[e("p",ge,c((n=l.account_type)==null?void 0:n.name),1),e("p",be," ****"+c(l.account_number.slice(-4)),1)])]),e("p",xe,c(s(w)(l.balance,l.currency)),1)])],10,ue)}),128)),e("div",ye,[o(s(T),{href:"/deposits"},{default:i(()=>[o(s(p),{label:"Cancel",outlined:""})]),_:1}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).bank_account_id,onClick:N},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===1&&!b.value?(u(),y(s(_),{key:2,class:"shadow-lg"},{title:i(()=>[...t[5]||(t[5]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-id-card text-primary-500"}),m(" Check Details ")],-1)])]),content:i(()=>[e("div",ke,[e("div",null,[t[6]||(t[6]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Number "),e("span",{class:"text-red-500"},"*")],-1)),o(s(ae),{modelValue:s(a).check_number,"onUpdate:modelValue":t[0]||(t[0]=l=>s(a).check_number=l),type:"text",placeholder:"e.g., 123456",class:"w-full"},null,8,["modelValue"])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Deposit Amount "),e("span",{class:"text-red-500"},"*")],-1)),o(s(se),{modelValue:s(a).amount,"onUpdate:modelValue":t[1]||(t[1]=l=>s(a).amount=l),mode:"currency",currency:C.value,locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:I.value},null,8,["modelValue","currency","max"]),e("div",fe,[e("span",null,"Max per check: "+c(s(w)(F.depositLimits.perTransaction,C.value)),1),e("span",null,"Available today: "+c(s(w)(L.value*100,C.value)),1)])]),L.value<=0?(u(),y(s(j),{key:0,severity:"error",closable:!1},{default:i(()=>[...t[8]||(t[8]=[e("p",{class:"text-sm"},"Daily check deposit limit reached",-1)])]),_:1})):x("",!0),o(s(j),{severity:"info",closable:!1},{default:i(()=>{var l,n;return[e("p",ve,[t[9]||(t[9]=e("strong",null,"Account:",-1)),m(" "+c((n=(l=E.value)==null?void 0:l.account_type)==null?void 0:n.name),1)]),e("p",he,[t[10]||(t[10]=e("strong",null,"Funds Available:",-1)),m(" "+c(B.value),1)])]}),_:1}),e("div",_e,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:R}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!P(),onClick:N},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===2&&!b.value?(u(),y(s(_),{key:3,class:"shadow-lg"},{title:i(()=>[...t[11]||(t[11]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-image text-primary-500"}),m(" Upload Check Images ")],-1)])]),content:i(()=>[e("div",we,[o(s(j),{severity:"info",closable:!1},{default:i(()=>[...t[12]||(t[12]=[e("p",{class:"text-sm"},[e("strong",null,"Upload Requirements:")],-1),e("ul",{class:"mt-2 text-sm space-y-1 list-disc list-inside"},[e("li",null,"Maximum 5MB per image"),e("li",null,"Clear, legible images (JPG, PNG)"),e("li",null,"Front: Account holder name visible"),e("li",null,"Back: Endorsement signature required")],-1)])]),_:1}),e("div",null,[t[14]||(t[14]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Front "),e("span",{class:"text-red-500"},"*")],-1)),D.value?(u(),g("div",De,[e("img",{src:D.value,alt:"Check Front",class:"w-full h-64 object-cover"},null,8,Se),o(s(p),{icon:"pi pi-times",severity:"danger",text:"",class:"absolute top-2 right-2",onClick:W})])):(u(),g("div",Ce,[o(s(G),{name:"check_front",onSelect:J,accept:"image/*",auto:!1,"show-upload-button":!1,"show-cancel-button":!1},{content:i(()=>[...t[13]||(t[13]=[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"text-4xl text-gray-400 pi pi-cloud-upload"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Click to upload check front image")],-1)])]),_:1})]))]),e("div",null,[t[16]||(t[16]=e("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[m(" Check Back (Endorsement) "),e("span",{class:"text-red-500"},"*")],-1)),S.value?(u(),g("div",Ae,[e("img",{src:S.value,alt:"Check Back",class:"w-full h-64 object-cover"},null,8,Be),o(s(p),{icon:"pi pi-times",severity:"danger",text:"",class:"absolute top-2 right-2",onClick:H})])):(u(),g("div",je,[o(s(G),{name:"check_back",onSelect:O,accept:"image/*",auto:!1,"show-upload-button":!1,"show-cancel-button":!1},{content:i(()=>[...t[15]||(t[15]=[e("div",{class:"flex flex-col items-center gap-2"},[e("i",{class:"text-4xl text-gray-400 pi pi-cloud-upload"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Click to upload check back image")],-1)])]),_:1})]))]),e("div",Fe,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:R}),o(s(p),{label:"Review Deposit",icon:"pi pi-arrow-right",disabled:!P(),onClick:N},null,8,["disabled"])])])]),_:1})):x("",!0),d.value===3&&!b.value?(u(),y(s(_),{key:4,class:"shadow-lg"},{title:i(()=>[...t[17]||(t[17]=[e("div",{class:"flex items-center gap-2 text-lg"},[e("i",{class:"pi pi-check-circle text-primary-500"}),m(" Review Check Deposit ")],-1)])]),content:i(()=>{var l,n;return[e("div",Ue,[e("div",Ve,[e("p",Le,[t[18]||(t[18]=e("i",{class:"mr-2 pi pi-info-circle"},null,-1)),t[19]||(t[19]=m(" Funds will be available on ",-1)),e("strong",null,c(B.value),1),m(" ("+c(F.depositLimits.holdDays)+"-day hold) ",1)])]),e("div",Ie,[e("div",Ne,[t[20]||(t[20]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Account",-1)),e("p",Re,c((n=(l=E.value)==null?void 0:l.account_type)==null?void 0:n.name),1)]),e("div",Pe,[t[21]||(t[21]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Check #",-1)),e("p",Te,c(s(a).check_number),1)]),e("div",$e,[t[22]||(t[22]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Deposit Amount",-1)),e("p",Me,c(s(w)(s(a).amount*100,C.value)),1)])]),o(s(j),{severity:"warning",closable:!1},{default:i(()=>[...t[23]||(t[23]=[e("p",{class:"text-sm"},"By submitting, you certify that the check images are clear and the deposit amount is correct.",-1)])]),_:1}),e("div",Ee,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:R}),o(s(p),{label:"Submit Deposit",icon:"pi pi-send",loading:V.value,onClick:K},null,8,["loading"])])])]}),_:1})):x("",!0),b.value?(u(),y(s(_),{key:5,class:"shadow-lg"},{content:i(()=>[e("div",qe,[t[28]||(t[28]=e("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30"},[e("i",{class:"text-4xl text-green-600 pi pi-check dark:text-green-400"})],-1)),t[29]||(t[29]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Check Deposit Submitted ",-1)),t[30]||(t[30]=e("p",{class:"mt-2 text-gray-500"}," Your check has been received and is pending verification ",-1)),e("div",Ge,[e("div",Ye,[e("div",ze,[t[24]||(t[24]=e("span",{class:"text-gray-500"},"Check #",-1)),e("span",Je,c(s(a).check_number),1)]),e("div",Oe,[t[25]||(t[25]=e("span",{class:"text-gray-500"},"Amount",-1)),e("span",We,c(s(w)(s(a).amount*100,C.value)),1)]),e("div",He,[t[26]||(t[26]=e("span",{class:"text-gray-500"},"Funds Available",-1)),e("span",Ke,c(B.value),1)])])]),o(s(j),{severity:"info",closable:!1,class:"mt-4"},{default:i(()=>[...t[27]||(t[27]=[e("p",{class:"text-sm"},"We'll verify your check images and notify you via email when processing is complete.",-1)])]),_:1}),e("div",Qe,[o(s(p),{label:"New Deposit",icon:"pi pi-plus",outlined:"",onClick:Q}),o(s(T),{href:"/deposits"},{default:i(()=>[o(s(p),{label:"Back to Deposits",icon:"pi pi-arrow-left"})]),_:1})])])]),_:1})):x("",!0)])]),_:1})],64))}};export{ft as default};
