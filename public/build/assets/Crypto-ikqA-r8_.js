import{k as at,f as lt,G as O,j as k,c as m,d as o,u as s,p as rt,w as d,a as t,s as $,i as g,g as b,b as x,o as u,F as U,r as N,n as v,t as i,z as ot,e as A,A as it}from"./app-hixBo1YZ.js";import{a as p}from"./index-CWTuD0JT.js";import{s as w}from"./index-BKtBbAyo.js";import{s as G}from"./index-CrBINPYw.js";import{s as nt}from"./index-BR6ZdKd0.js";import{s as h}from"./index-ClS7HuVO.js";import{s as I}from"./index-DpmGojx7.js";import{_ as dt}from"./DashboardLayout-DA5xStwr.js";import{u as ut}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-B4kxRiD_.js";import"./index-jvoKO99l.js";import"./index-DAUY6hyi.js";import"./index-DLwBm_ef.js";import"./index-CRjhjN-x.js";import"./AppLogo-DK8jkjTq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ct={class:"max-w-3xl mx-auto"},pt={class:"max-w-3xl mx-auto"},yt={class:"flex items-center justify-between overflow-x-auto pb-2"},mt={class:"mt-3 text-sm font-medium text-center text-gray-600 dark:text-gray-400"},gt={class:"space-y-4"},xt=["onClick"],ft={class:"flex items-center justify-between"},bt={class:"flex items-center gap-3"},vt={class:"font-medium text-gray-900 dark:text-white"},_t={class:"text-sm text-gray-500 dark:text-gray-400"},kt={class:"text-lg font-bold text-gray-900 dark:text-white"},wt={class:"flex justify-end gap-3 pt-4"},ht={class:"space-y-3"},Ct=["onClick"],Dt={class:"flex items-center gap-4"},jt={class:"flex-1"},St={class:"font-semibold text-gray-900 dark:text-white"},At={class:"text-sm text-gray-500 dark:text-gray-400"},Ft={key:0,class:"flex items-center justify-center w-6 h-6 rounded-full bg-orange-500 text-white"},Tt={class:"flex justify-end gap-3 pt-4"},Ut={class:"flex items-center gap-2 text-lg"},Bt={class:"space-y-4"},Vt={class:"text-sm"},Et={class:"space-y-3"},$t=["onClick"],Nt={class:"flex items-start justify-between"},Pt={class:"flex-1"},Lt={class:"text-sm font-semibold text-gray-900 dark:text-white"},Rt={class:"mt-2 p-2 rounded bg-gray-100 dark:bg-gray-800 text-xs font-mono text-gray-600 dark:text-gray-300 break-all"},Wt={key:0,class:"flex items-center justify-center w-6 h-6 rounded-full bg-green-500 text-white flex-shrink-0"},Yt={class:"flex justify-between gap-3 pt-4"},Mt={class:"space-y-4"},zt={class:"text-sm"},Ht={class:"grid gap-4 md:grid-cols-2"},Ot={class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},Gt={class:"text-xs text-gray-500"},It={class:"text-sm"},qt={class:"flex justify-between gap-3 pt-4"},Qt={class:"space-y-4"},Xt={class:"space-y-3 p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Jt={class:"flex justify-between"},Kt={class:"font-semibold text-gray-900 dark:text-white"},Zt={class:"flex justify-between"},te={class:"font-semibold text-gray-900 dark:text-white"},ee={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},se={class:"text-lg font-bold text-green-600 dark:text-green-400"},ae={class:"flex justify-between"},le={class:"text-sm text-gray-900 dark:text-white font-mono"},re={class:"flex justify-between gap-3 pt-4"},oe={class:"py-8 text-center"},ie={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},ne={class:"space-y-3"},de={class:"flex justify-between"},ue={class:"font-semibold text-gray-900 dark:text-white"},ce={class:"flex justify-between"},pe={class:"font-semibold text-gray-900 dark:text-white"},ye={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},me={class:"font-bold text-orange-600 dark:text-orange-400"},ge={class:"flex justify-center gap-3 mt-6"},Ve={__name:"Crypto",props:{accounts:{type:Array,default:()=>[]},cryptocurrencies:{type:Array,default:()=>[]},depositLimits:{type:Object,default:()=>({daily:5e5,perTransaction:1e5})},todaysTotal:{type:Number,default:0}},setup(P){const C=P,q=it(),D=at(),{formatCurrency:j}=ut(),F=A(()=>{var n;return((n=q.props.auth)==null?void 0:n.currency)||"USD"}),a=lt({bank_account_id:null,cryptocurrency_id:null,crypto_wallet_id:null,crypto_amount:null,usd_amount:null,transaction_hash:""}),y=k(null),T=k([]),c=k(0),L=k(!1),_=k(!1),Q=k(!1),f=k(null),B=k(!0),V=[{label:"Select Account"},{label:"Select Cryptocurrency"},{label:"Wallet Address"},{label:"Enter Amount"},{label:"Transaction Hash"},{label:"Complete"}],R=A(()=>(C.depositLimits.daily-C.todaysTotal)/100),W=A(()=>Math.min(C.depositLimits.perTransaction/100,R.value)),M=A(()=>C.cryptocurrencies.find(n=>n.id===a.cryptocurrency_id)),X=A(()=>T.value.find(n=>n.id===a.crypto_wallet_id));O(()=>a.usd_amount,n=>{B.value&&n&&f.value&&(a.crypto_amount=parseFloat((n/f.value).toFixed(8)))}),O(()=>a.crypto_amount,n=>{!B.value&&n&&f.value&&(a.usd_amount=parseFloat((n*f.value).toFixed(2)))});const J=n=>({BTC:"pi-bitcoin",ETH:"pi-wallet",USDT:"pi-dollar",USDC:"pi-dollar",BNB:"pi-wallet",XRP:"pi-wallet",ADA:"pi-wallet",DOGE:"pi-wallet"})[n]||"pi-money-bill",z=A(()=>a.bank_account_id&&a.cryptocurrency_id&&a.crypto_wallet_id&&a.crypto_amount&&a.usd_amount&&a.usd_amount>0&&a.usd_amount<=W.value&&a.transaction_hash&&a.transaction_hash.trim().length>0),E=()=>{c.value<4&&H()&&c.value++},Y=()=>{c.value>0&&c.value--},H=()=>c.value===0?!!a.bank_account_id:c.value===1?!!a.cryptocurrency_id:c.value===2?!!a.crypto_wallet_id:c.value===3?a.crypto_amount&&a.usd_amount&&a.usd_amount>0&&a.usd_amount<=W.value:!0,K=async n=>{var e,l;a.cryptocurrency_id=n,a.crypto_wallet_id=null,a.usd_amount=null,a.crypto_amount=null,T.value=[];try{const S=await(await fetch(route("deposits.crypto.wallet",{cryptocurrency:n}))).json();T.value=S.wallets||[],y.value=M.value,f.value=((e=S.cryptocurrency)==null?void 0:e.exchange_rate)||((l=M.value)==null?void 0:l.exchange_rate),f.value||D.add({severity:"warn",summary:"Exchange Rate Unavailable",detail:"Please contact support for current rates",life:4e3})}catch{D.add({severity:"error",summary:"Error",detail:"Unable to load wallet addresses",life:3e3})}},Z=n=>{navigator.clipboard.writeText(n).then(()=>{D.add({severity:"success",summary:"Copied",detail:"Wallet address copied to clipboard",life:2e3})})},tt=()=>{if(!z.value){D.add({severity:"error",summary:"Invalid Crypto Deposit",detail:"Please verify all deposit details",life:3e3});return}L.value=!0,a.post(route("deposits.crypto.register"),{preserveScroll:!0,onSuccess:n=>{_.value=!0,c.value=5,D.add({severity:"success",summary:"Crypto Deposit Registered",detail:"Your transaction is pending verification",life:5e3})},onError:n=>{D.add({severity:"error",summary:"Deposit Failed",detail:n.transaction_hash||n.usd_amount||"Unable to register deposit",life:5e3})},onFinish:()=>{L.value=!1}})},et=()=>{a.reset(),c.value=0,_.value=!1,y.value=null,T.value=[],Q.value=!1};return(n,e)=>(u(),m(U,null,[o(s(rt),{title:"Crypto Deposit"}),o(dt,{title:"Crypto Deposit"},{default:d(()=>[t("div",ct,[o(s($),{href:"/deposits",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:d(()=>[...e[5]||(e[5]=[t("i",{class:"pi pi-arrow-left"},null,-1),g(" Back to Deposits ",-1)])]),_:1}),e[6]||(e[6]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Cryptocurrency Deposit "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Deposit Bitcoin, Ethereum, and other cryptocurrencies ")],-1))]),t("div",pt,[_.value?x("",!0):(u(),b(s(w),{key:0,class:"mb-6"},{content:d(()=>[t("div",yt,[(u(),m(U,null,N(V,(l,r)=>t("div",{key:r,class:v(["flex items-center flex-shrink-0",{"flex-1":r<V.length-1}])},[t("div",{class:v(["flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold transition-all flex-shrink-0",[r===c.value?"bg-orange-500 text-white":r<c.value?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300"]])},i(r+1),3),r<V.length-1?(u(),m("div",{key:0,class:v(["h-1 mx-2 transition-all flex-1",[r<c.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"]])},null,2)):x("",!0)],2)),64))]),t("p",mt,i(V[c.value].label),1)]),_:1})),c.value===0&&!_.value?(u(),b(s(w),{key:1,class:"shadow-lg"},{title:d(()=>[...e[7]||(e[7]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-wallet text-primary-500"}),g(" Select Deposit Account ")],-1)])]),content:d(()=>[t("div",gt,[(u(!0),m(U,null,N(C.accounts,l=>{var r;return u(),m("div",{key:l.id,onClick:S=>s(a).bank_account_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).bank_account_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",ft,[t("div",bt,[t("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full transition-all",[s(a).bank_account_id===l.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:v(["pi",[s(a).bank_account_id===l.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",vt,i((r=l.account_type)==null?void 0:r.name),1),t("p",_t," ****"+i(l.account_number.slice(-4)),1)])]),t("p",kt,i(s(j)(l.balance,l.currency)),1)])],10,xt)}),128)),t("div",wt,[o(s($),{href:"/deposits"},{default:d(()=>[o(s(p),{label:"Cancel",outlined:""})]),_:1}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).bank_account_id,onClick:E},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===1&&!_.value?(u(),b(s(w),{key:2,class:"shadow-lg"},{title:d(()=>[...e[8]||(e[8]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-coins text-primary-500"}),g(" Select Cryptocurrency ")],-1)])]),content:d(()=>[t("div",ht,[(u(!0),m(U,null,N(C.cryptocurrencies,l=>(u(),m("div",{key:l.id,onClick:r=>K(l.id),class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).cryptocurrency_id===l.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",Dt,[t("div",{class:v(["flex items-center justify-center w-12 h-12 rounded-full transition-all flex-shrink-0",[s(a).cryptocurrency_id===l.id?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:v(["text-lg pi",J(l.symbol)])},null,2)],2),t("div",jt,[t("p",St,i(l.name),1),t("p",At,i(l.symbol)+" â€¢ "+i(l.network),1)]),s(a).cryptocurrency_id===l.id?(u(),m("div",Ft,[...e[9]||(e[9]=[t("i",{class:"pi pi-check text-sm"},null,-1)])])):x("",!0)])],10,Ct))),128)),t("div",Tt,[o(s($),{href:"/deposits"},{default:d(()=>[o(s(p),{label:"Cancel",outlined:""})]),_:1}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).cryptocurrency_id,onClick:E},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===2&&!_.value?(u(),b(s(w),{key:3,class:"shadow-lg"},{title:d(()=>{var l;return[t("div",Ut,[e[10]||(e[10]=t("i",{class:"pi pi-wallet text-primary-500"},null,-1)),g(" "+i((l=y.value)==null?void 0:l.name)+" Wallet Address ",1)])]}),content:d(()=>[t("div",Bt,[o(s(h),{severity:"info",closable:!1},{default:d(()=>{var l;return[t("p",Vt,"Select or copy the wallet address to send your "+i((l=y.value)==null?void 0:l.symbol)+" to this address.",1)]}),_:1}),t("div",Et,[(u(!0),m(U,null,N(T.value,l=>(u(),m("div",{key:l.id,onClick:r=>s(a).crypto_wallet_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).crypto_wallet_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",Nt,[t("div",Pt,[t("p",Lt,i(l.label),1),t("p",Rt,i(l.wallet_address),1),o(s(p),{label:"Copy Address",icon:"pi pi-copy",text:"",size:"small",class:"mt-2",onClick:ot(r=>Z(l.wallet_address),["stop"])},null,8,["onClick"])]),s(a).crypto_wallet_id===l.id?(u(),m("div",Wt,[...e[11]||(e[11]=[t("i",{class:"pi pi-check text-sm"},null,-1)])])):x("",!0)])],10,$t))),128))]),t("div",Yt,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:Y}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).crypto_wallet_id,onClick:E},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===3&&!_.value?(u(),b(s(w),{key:4,class:"shadow-lg"},{title:d(()=>[...e[12]||(e[12]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-dollar text-primary-500"}),g(" Enter Amount ")],-1)])]),content:d(()=>{var l;return[t("div",Mt,[f.value?(u(),b(s(h),{key:0,severity:"info",closable:!1},{default:d(()=>{var r;return[t("p",zt,[e[13]||(e[13]=t("strong",null,"Current Rate:",-1)),g(" 1 "+i((r=y.value)==null?void 0:r.symbol)+" = $"+i(f.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])]}),_:1})):(u(),b(s(h),{key:1,severity:"warn",closable:!1},{default:d(()=>[...e[14]||(e[14]=[t("p",{class:"text-sm"},"Exchange rate unavailable. Please contact support.",-1)])]),_:1})),t("div",Ht,[t("div",null,[e[15]||(e[15]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" USD Amount "),t("span",{class:"text-red-500"},"*")],-1)),o(s(G),{modelValue:s(a).usd_amount,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).usd_amount=r),onFocus:e[1]||(e[1]=r=>B.value=!0),mode:"currency",currency:"USD",locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:W.value,disabled:!f.value},null,8,["modelValue","max","disabled"]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-gray-500"}," Enter USD amount to auto-calculate crypto ",-1))]),t("div",null,[t("label",Ot,[g(i((l=y.value)==null?void 0:l.symbol)+" Amount ",1),e[17]||(e[17]=t("span",{class:"text-red-500"},"*",-1))]),o(s(G),{modelValue:s(a).crypto_amount,"onUpdate:modelValue":e[2]||(e[2]=r=>s(a).crypto_amount=r),onFocus:e[3]||(e[3]=r=>B.value=!1),placeholder:"0.00",class:"w-full",min:1e-5,"max-fraction-digits":8,disabled:!f.value},null,8,["modelValue","disabled"]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-gray-500"}," Auto-calculated based on USD amount ",-1))])]),o(s(I)),t("div",Gt," Max daily: "+i(s(j)(P.depositLimits.daily,F.value))+" | Max per tx: "+i(s(j)(P.depositLimits.perTransaction,F.value))+" | Available today: "+i(s(j)(R.value*100,F.value)),1),R.value<=0?(u(),b(s(h),{key:2,severity:"error",closable:!1},{default:d(()=>[...e[19]||(e[19]=[t("p",{class:"text-sm"},"Daily crypto deposit limit reached",-1)])]),_:1})):x("",!0),o(s(h),{severity:"warning",closable:!1},{default:d(()=>{var r;return[t("p",It,[e[20]||(e[20]=t("strong",null,"Important:",-1)),g(" Network fees are not included in this amount. You'll need to pay additional fees to the "+i((r=y.value)==null?void 0:r.symbol)+" network.",1)])]}),_:1}),t("div",qt,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:Y}),o(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!H(),onClick:E},null,8,["disabled"])])])]}),_:1})):x("",!0),c.value===4&&!_.value?(u(),b(s(w),{key:5,class:"shadow-lg"},{title:d(()=>[...e[21]||(e[21]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-check text-primary-500"}),g(" Confirm Transaction ")],-1)])]),content:d(()=>{var l,r,S;return[t("div",Qt,[t("div",null,[e[22]||(e[22]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" Blockchain Transaction Hash "),t("span",{class:"text-red-500"},"*")],-1)),o(s(nt),{modelValue:s(a).transaction_hash,"onUpdate:modelValue":e[4]||(e[4]=st=>s(a).transaction_hash=st),placeholder:"0x... or txid",class:"w-full font-mono text-xs"},null,8,["modelValue"]),e[23]||(e[23]=t("p",{class:"mt-2 text-xs text-gray-500"}," Paste the transaction hash from your wallet or block explorer ",-1))]),o(s(I)),t("div",Xt,[t("div",Jt,[e[24]||(e[24]=t("span",{class:"text-gray-500"},"Cryptocurrency",-1)),t("span",Kt,i((l=y.value)==null?void 0:l.symbol),1)]),t("div",Zt,[e[25]||(e[25]=t("span",{class:"text-gray-500"},"Crypto Amount",-1)),t("span",te,i(s(a).crypto_amount)+" "+i((r=y.value)==null?void 0:r.symbol),1)]),t("div",ee,[e[26]||(e[26]=t("span",{class:"text-gray-500"},"Fiat Equivalent",-1)),t("span",se,i(s(j)(s(a).usd_amount*100,F.value)),1)]),t("div",ae,[e[27]||(e[27]=t("span",{class:"text-gray-500"},"Wallet",-1)),t("span",le," ..."+i((S=X.value)==null?void 0:S.wallet_address.slice(-8)),1)])]),o(s(h),{severity:"info",closable:!1},{default:d(()=>[...e[28]||(e[28]=[t("p",{class:"text-sm"},"Your transaction will be verified by our team. This usually takes 10-30 minutes.",-1)])]),_:1}),t("div",re,[o(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:Y}),o(s(p),{label:"Submit Deposit",icon:"pi pi-send",loading:L.value,disabled:!z.value,onClick:tt},null,8,["loading","disabled"])])])]}),_:1})):x("",!0),_.value?(u(),b(s(w),{key:6,class:"shadow-lg"},{content:d(()=>{var l,r;return[t("div",oe,[e[34]||(e[34]=t("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-orange-100 dark:bg-orange-900/30"},[t("i",{class:"text-4xl text-orange-600 pi pi-check dark:text-orange-400"})],-1)),e[35]||(e[35]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Deposit Registered ",-1)),e[36]||(e[36]=t("p",{class:"mt-2 text-gray-500"}," Your crypto deposit is pending verification ",-1)),t("div",ie,[t("div",ne,[t("div",de,[e[29]||(e[29]=t("span",{class:"text-gray-500"},"Cryptocurrency",-1)),t("span",ue,i((l=y.value)==null?void 0:l.symbol),1)]),t("div",ce,[e[30]||(e[30]=t("span",{class:"text-gray-500"},"Amount",-1)),t("span",pe,i(s(a).crypto_amount)+" "+i((r=y.value)==null?void 0:r.symbol),1)]),t("div",ye,[e[31]||(e[31]=t("span",{class:"text-gray-500"},"Fiat Value",-1)),t("span",me,i(s(j)(s(a).usd_amount*100,F.value)),1)]),e[32]||(e[32]=t("div",{class:"flex justify-between"},[t("span",{class:"text-gray-500"},"Status"),t("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}," Pending Verification ")],-1))])]),o(s(h),{severity:"success",closable:!1,class:"mt-4"},{default:d(()=>[...e[33]||(e[33]=[t("p",{class:"text-sm"},"We've received your transaction. Once verified by our team, the funds will be added to your account. You'll receive an email notification.",-1)])]),_:1}),t("div",ge,[o(s(p),{label:"New Deposit",icon:"pi pi-plus",outlined:"",onClick:et}),o(s($),{href:"/deposits"},{default:d(()=>[o(s(p),{label:"Back to Deposits",icon:"pi pi-arrow-left"})]),_:1})])])]}),_:1})):x("",!0)])]),_:1})],64))}};export{Ve as default};
