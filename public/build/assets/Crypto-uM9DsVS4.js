import{k as et,f as st,G as H,j as k,c as m,d as r,u as s,p as at,w as n,a as t,s as V,i as g,g as b,b as x,o as u,F as A,r as E,n as v,t as i,z as lt,e as U}from"./app-DtfJ-hl9.js";import{a as p}from"./index-Dnvq49NJ.js";import{s as w}from"./index-pmc5jvfN.js";import{s as O}from"./index-Cqo2mwGU.js";import{s as ot}from"./index-D5dZYOEM.js";import{s as h}from"./index-Cq3ZrfvC.js";import{s as G}from"./index-B3eDXlXW.js";import{_ as rt}from"./DashboardLayout-C0tMUBuT.js";import{u as it}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-4aNkRZH9.js";import"./index-CdYMGtEj.js";import"./index-cGcPZB9D.js";import"./index-B-YQxXsz.js";import"./index-BVmgqlv6.js";import"./AppLogo-DwpHP11T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const nt={class:"max-w-3xl mx-auto"},dt={class:"max-w-3xl mx-auto"},ut={class:"flex items-center justify-between overflow-x-auto pb-2"},ct={class:"mt-3 text-sm font-medium text-center text-gray-600 dark:text-gray-400"},pt={class:"space-y-4"},yt=["onClick"],mt={class:"flex items-center justify-between"},gt={class:"flex items-center gap-3"},xt={class:"font-medium text-gray-900 dark:text-white"},ft={class:"text-sm text-gray-500 dark:text-gray-400"},bt={class:"text-lg font-bold text-gray-900 dark:text-white"},vt={class:"flex justify-end gap-3 pt-4"},_t={class:"space-y-3"},kt=["onClick"],wt={class:"flex items-center gap-4"},ht={class:"flex-1"},Ct={class:"font-semibold text-gray-900 dark:text-white"},Dt={class:"text-sm text-gray-500 dark:text-gray-400"},St={key:0,class:"flex items-center justify-center w-6 h-6 rounded-full bg-orange-500 text-white"},jt={class:"flex justify-end gap-3 pt-4"},At={class:"flex items-center gap-2 text-lg"},Ut={class:"space-y-4"},Ft={class:"text-sm"},Tt={class:"space-y-3"},$t=["onClick"],Bt={class:"flex items-start justify-between"},Vt={class:"flex-1"},Et={class:"text-sm font-semibold text-gray-900 dark:text-white"},Nt={class:"mt-2 p-2 rounded bg-gray-100 dark:bg-gray-800 text-xs font-mono text-gray-600 dark:text-gray-300 break-all"},Lt={key:0,class:"flex items-center justify-center w-6 h-6 rounded-full bg-green-500 text-white flex-shrink-0"},Pt={class:"flex justify-between gap-3 pt-4"},Rt={class:"space-y-4"},Wt={class:"text-sm"},Yt={class:"grid gap-4 md:grid-cols-2"},Mt={class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},zt={class:"text-xs text-gray-500"},Ht={class:"text-sm"},Ot={class:"flex justify-between gap-3 pt-4"},Gt={class:"space-y-4"},It={class:"space-y-3 p-4 rounded-lg bg-gray-50 dark:bg-gray-800"},Qt={class:"flex justify-between"},Xt={class:"font-semibold text-gray-900 dark:text-white"},qt={class:"flex justify-between"},Jt={class:"font-semibold text-gray-900 dark:text-white"},Kt={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},Zt={class:"text-lg font-bold text-green-600 dark:text-green-400"},te={class:"flex justify-between"},ee={class:"text-sm text-gray-900 dark:text-white font-mono"},se={class:"flex justify-between gap-3 pt-4"},ae={class:"py-8 text-center"},le={class:"p-4 mt-6 text-left rounded-lg bg-gray-50 dark:bg-gray-800"},oe={class:"space-y-3"},re={class:"flex justify-between"},ie={class:"font-semibold text-gray-900 dark:text-white"},ne={class:"flex justify-between"},de={class:"font-semibold text-gray-900 dark:text-white"},ue={class:"border-t border-gray-200 dark:border-gray-700 pt-3 flex justify-between"},ce={class:"font-bold text-orange-600 dark:text-orange-400"},pe={class:"flex justify-center gap-3 mt-6"},Fe={__name:"Crypto",props:{accounts:{type:Array,default:()=>[]},cryptocurrencies:{type:Array,default:()=>[]},depositLimits:{type:Object,default:()=>({daily:5e5,perTransaction:1e5})},todaysTotal:{type:Number,default:0}},setup(N){const C=N,D=et(),{formatCurrency:F}=it(),a=st({bank_account_id:null,cryptocurrency_id:null,crypto_wallet_id:null,crypto_amount:null,usd_amount:null,transaction_hash:""}),y=k(null),j=k([]),c=k(0),L=k(!1),_=k(!1),I=k(!1),f=k(null),T=k(!0),$=[{label:"Select Account"},{label:"Select Cryptocurrency"},{label:"Wallet Address"},{label:"Enter Amount"},{label:"Transaction Hash"},{label:"Complete"}],P=U(()=>(C.depositLimits.daily-C.todaysTotal)/100),R=U(()=>Math.min(C.depositLimits.perTransaction/100,P.value)),Y=U(()=>C.cryptocurrencies.find(d=>d.id===a.cryptocurrency_id)),Q=U(()=>j.value.find(d=>d.id===a.crypto_wallet_id));H(()=>a.usd_amount,d=>{T.value&&d&&f.value&&(a.crypto_amount=parseFloat((d/f.value).toFixed(8)))}),H(()=>a.crypto_amount,d=>{!T.value&&d&&f.value&&(a.usd_amount=parseFloat((d*f.value).toFixed(2)))});const X=d=>({BTC:"pi-bitcoin",ETH:"pi-wallet",USDT:"pi-dollar",USDC:"pi-dollar",BNB:"pi-wallet",XRP:"pi-wallet",ADA:"pi-wallet",DOGE:"pi-wallet"})[d]||"pi-money-bill",M=U(()=>a.bank_account_id&&a.cryptocurrency_id&&a.crypto_wallet_id&&a.crypto_amount&&a.usd_amount&&a.usd_amount>0&&a.usd_amount<=R.value&&a.transaction_hash&&a.transaction_hash.trim().length>0),B=()=>{c.value<4&&z()&&c.value++},W=()=>{c.value>0&&c.value--},z=()=>c.value===0?!!a.bank_account_id:c.value===1?!!a.cryptocurrency_id:c.value===2?!!a.crypto_wallet_id:c.value===3?a.crypto_amount&&a.usd_amount&&a.usd_amount>0&&a.usd_amount<=R.value:!0,q=async d=>{var e,l;a.cryptocurrency_id=d,a.crypto_wallet_id=null,a.usd_amount=null,a.crypto_amount=null,j.value=[];try{const S=await(await fetch(route("deposits.crypto.wallet",{cryptocurrency:d}))).json();j.value=S.wallets||[],y.value=Y.value,f.value=((e=S.cryptocurrency)==null?void 0:e.exchange_rate)||((l=Y.value)==null?void 0:l.exchange_rate),f.value||D.add({severity:"warn",summary:"Exchange Rate Unavailable",detail:"Please contact support for current rates",life:4e3})}catch{D.add({severity:"error",summary:"Error",detail:"Unable to load wallet addresses",life:3e3})}},J=d=>{navigator.clipboard.writeText(d).then(()=>{D.add({severity:"success",summary:"Copied",detail:"Wallet address copied to clipboard",life:2e3})})},K=()=>{if(!M.value){D.add({severity:"error",summary:"Invalid Crypto Deposit",detail:"Please verify all deposit details",life:3e3});return}L.value=!0,a.post(route("deposits.crypto.register"),{preserveScroll:!0,onSuccess:d=>{_.value=!0,c.value=5,D.add({severity:"success",summary:"Crypto Deposit Registered",detail:"Your transaction is pending verification",life:5e3})},onError:d=>{D.add({severity:"error",summary:"Deposit Failed",detail:d.transaction_hash||d.usd_amount||"Unable to register deposit",life:5e3})},onFinish:()=>{L.value=!1}})},Z=()=>{a.reset(),c.value=0,_.value=!1,y.value=null,j.value=[],I.value=!1};return(d,e)=>(u(),m(A,null,[r(s(at),{title:"Crypto Deposit"}),r(rt,{title:"Crypto Deposit"},{default:n(()=>[t("div",nt,[r(s(V),{href:"/deposits",class:"inline-flex items-center gap-2 mb-6 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:n(()=>[...e[5]||(e[5]=[t("i",{class:"pi pi-arrow-left"},null,-1),g(" Back to Deposits ",-1)])]),_:1}),e[6]||(e[6]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Cryptocurrency Deposit "),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Deposit Bitcoin, Ethereum, and other cryptocurrencies ")],-1))]),t("div",dt,[_.value?x("",!0):(u(),b(s(w),{key:0,class:"mb-6"},{content:n(()=>[t("div",ut,[(u(),m(A,null,E($,(l,o)=>t("div",{key:o,class:v(["flex items-center flex-shrink-0",{"flex-1":o<$.length-1}])},[t("div",{class:v(["flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold transition-all flex-shrink-0",[o===c.value?"bg-orange-500 text-white":o<c.value?"bg-green-500 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300"]])},i(o+1),3),o<$.length-1?(u(),m("div",{key:0,class:v(["h-1 mx-2 transition-all flex-1",[o<c.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"]])},null,2)):x("",!0)],2)),64))]),t("p",ct,i($[c.value].label),1)]),_:1})),c.value===0&&!_.value?(u(),b(s(w),{key:1,class:"shadow-lg"},{title:n(()=>[...e[7]||(e[7]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-wallet text-primary-500"}),g(" Select Deposit Account ")],-1)])]),content:n(()=>[t("div",pt,[(u(!0),m(A,null,E(C.accounts,l=>{var o;return u(),m("div",{key:l.id,onClick:S=>s(a).bank_account_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).bank_account_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",mt,[t("div",gt,[t("div",{class:v(["flex items-center justify-center w-10 h-10 rounded-full transition-all",[s(a).bank_account_id===l.id?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:v(["pi",[s(a).bank_account_id===l.id?"pi-check":"pi-wallet"]])},null,2)],2),t("div",null,[t("p",xt,i((o=l.account_type)==null?void 0:o.name),1),t("p",ft," ****"+i(l.account_number.slice(-4)),1)])]),t("p",bt,i(s(F)(l.balance,l.currency)),1)])],10,yt)}),128)),t("div",vt,[r(s(V),{href:"/deposits"},{default:n(()=>[r(s(p),{label:"Cancel",outlined:""})]),_:1}),r(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).bank_account_id,onClick:B},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===1&&!_.value?(u(),b(s(w),{key:2,class:"shadow-lg"},{title:n(()=>[...e[8]||(e[8]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-coins text-primary-500"}),g(" Select Cryptocurrency ")],-1)])]),content:n(()=>[t("div",_t,[(u(!0),m(A,null,E(C.cryptocurrencies,l=>(u(),m("div",{key:l.id,onClick:o=>q(l.id),class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).cryptocurrency_id===l.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",wt,[t("div",{class:v(["flex items-center justify-center w-12 h-12 rounded-full transition-all flex-shrink-0",[s(a).cryptocurrency_id===l.id?"bg-orange-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500"]])},[t("i",{class:v(["text-lg pi",X(l.symbol)])},null,2)],2),t("div",ht,[t("p",Ct,i(l.name),1),t("p",Dt,i(l.symbol)+" â€¢ "+i(l.network),1)]),s(a).cryptocurrency_id===l.id?(u(),m("div",St,[...e[9]||(e[9]=[t("i",{class:"pi pi-check text-sm"},null,-1)])])):x("",!0)])],10,kt))),128)),t("div",jt,[r(s(V),{href:"/deposits"},{default:n(()=>[r(s(p),{label:"Cancel",outlined:""})]),_:1}),r(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).cryptocurrency_id,onClick:B},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===2&&!_.value?(u(),b(s(w),{key:3,class:"shadow-lg"},{title:n(()=>{var l;return[t("div",At,[e[10]||(e[10]=t("i",{class:"pi pi-wallet text-primary-500"},null,-1)),g(" "+i((l=y.value)==null?void 0:l.name)+" Wallet Address ",1)])]}),content:n(()=>[t("div",Ut,[r(s(h),{severity:"info",closable:!1},{default:n(()=>{var l;return[t("p",Ft,"Select or copy the wallet address to send your "+i((l=y.value)==null?void 0:l.symbol)+" to this address.",1)]}),_:1}),t("div",Tt,[(u(!0),m(A,null,E(j.value,l=>(u(),m("div",{key:l.id,onClick:o=>s(a).crypto_wallet_id=l.id,class:v(["p-4 transition-all duration-300 border-2 rounded-lg cursor-pointer",[s(a).crypto_wallet_id===l.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"]])},[t("div",Bt,[t("div",Vt,[t("p",Et,i(l.label),1),t("p",Nt,i(l.wallet_address),1),r(s(p),{label:"Copy Address",icon:"pi pi-copy",text:"",size:"small",class:"mt-2",onClick:lt(o=>J(l.wallet_address),["stop"])},null,8,["onClick"])]),s(a).crypto_wallet_id===l.id?(u(),m("div",Lt,[...e[11]||(e[11]=[t("i",{class:"pi pi-check text-sm"},null,-1)])])):x("",!0)])],10,$t))),128))]),t("div",Pt,[r(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:W}),r(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!s(a).crypto_wallet_id,onClick:B},null,8,["disabled"])])])]),_:1})):x("",!0),c.value===3&&!_.value?(u(),b(s(w),{key:4,class:"shadow-lg"},{title:n(()=>[...e[12]||(e[12]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-dollar text-primary-500"}),g(" Enter Amount ")],-1)])]),content:n(()=>{var l;return[t("div",Rt,[f.value?(u(),b(s(h),{key:0,severity:"info",closable:!1},{default:n(()=>{var o;return[t("p",Wt,[e[13]||(e[13]=t("strong",null,"Current Rate:",-1)),g(" 1 "+i((o=y.value)==null?void 0:o.symbol)+" = $"+i(f.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])]}),_:1})):(u(),b(s(h),{key:1,severity:"warn",closable:!1},{default:n(()=>[...e[14]||(e[14]=[t("p",{class:"text-sm"},"Exchange rate unavailable. Please contact support.",-1)])]),_:1})),t("div",Yt,[t("div",null,[e[15]||(e[15]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" USD Amount "),t("span",{class:"text-red-500"},"*")],-1)),r(s(O),{modelValue:s(a).usd_amount,"onUpdate:modelValue":e[0]||(e[0]=o=>s(a).usd_amount=o),onFocus:e[1]||(e[1]=o=>T.value=!0),mode:"currency",currency:"USD",locale:"en-US",placeholder:"0.00",class:"w-full",min:1,max:R.value,disabled:!f.value},null,8,["modelValue","max","disabled"]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-gray-500"}," Enter USD amount to auto-calculate crypto ",-1))]),t("div",null,[t("label",Mt,[g(i((l=y.value)==null?void 0:l.symbol)+" Amount ",1),e[17]||(e[17]=t("span",{class:"text-red-500"},"*",-1))]),r(s(O),{modelValue:s(a).crypto_amount,"onUpdate:modelValue":e[2]||(e[2]=o=>s(a).crypto_amount=o),onFocus:e[3]||(e[3]=o=>T.value=!1),placeholder:"0.00",class:"w-full",min:1e-5,"max-fraction-digits":8,disabled:!f.value},null,8,["modelValue","disabled"]),e[18]||(e[18]=t("p",{class:"mt-1 text-xs text-gray-500"}," Auto-calculated based on USD amount ",-1))])]),r(s(G)),t("div",zt," Max daily: $"+i((N.depositLimits.daily/100).toFixed(2))+" | Max per tx: $"+i((N.depositLimits.perTransaction/100).toFixed(2))+" | Available today: "+i(s(F)(P.value*100,"USD")),1),P.value<=0?(u(),b(s(h),{key:2,severity:"error",closable:!1},{default:n(()=>[...e[19]||(e[19]=[t("p",{class:"text-sm"},"Daily crypto deposit limit reached",-1)])]),_:1})):x("",!0),r(s(h),{severity:"warning",closable:!1},{default:n(()=>{var o;return[t("p",Ht,[e[20]||(e[20]=t("strong",null,"Important:",-1)),g(" Network fees are not included in this amount. You'll need to pay additional fees to the "+i((o=y.value)==null?void 0:o.symbol)+" network.",1)])]}),_:1}),t("div",Ot,[r(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:W}),r(s(p),{label:"Continue",icon:"pi pi-arrow-right",disabled:!z(),onClick:B},null,8,["disabled"])])])]}),_:1})):x("",!0),c.value===4&&!_.value?(u(),b(s(w),{key:5,class:"shadow-lg"},{title:n(()=>[...e[21]||(e[21]=[t("div",{class:"flex items-center gap-2 text-lg"},[t("i",{class:"pi pi-check text-primary-500"}),g(" Confirm Transaction ")],-1)])]),content:n(()=>{var l,o,S;return[t("div",Gt,[t("div",null,[e[22]||(e[22]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"},[g(" Blockchain Transaction Hash "),t("span",{class:"text-red-500"},"*")],-1)),r(s(ot),{modelValue:s(a).transaction_hash,"onUpdate:modelValue":e[4]||(e[4]=tt=>s(a).transaction_hash=tt),placeholder:"0x... or txid",class:"w-full font-mono text-xs"},null,8,["modelValue"]),e[23]||(e[23]=t("p",{class:"mt-2 text-xs text-gray-500"}," Paste the transaction hash from your wallet or block explorer ",-1))]),r(s(G)),t("div",It,[t("div",Qt,[e[24]||(e[24]=t("span",{class:"text-gray-500"},"Cryptocurrency",-1)),t("span",Xt,i((l=y.value)==null?void 0:l.symbol),1)]),t("div",qt,[e[25]||(e[25]=t("span",{class:"text-gray-500"},"Crypto Amount",-1)),t("span",Jt,i(s(a).crypto_amount)+" "+i((o=y.value)==null?void 0:o.symbol),1)]),t("div",Kt,[e[26]||(e[26]=t("span",{class:"text-gray-500"},"USD Amount",-1)),t("span",Zt,i(s(F)(s(a).usd_amount*100,"USD")),1)]),t("div",te,[e[27]||(e[27]=t("span",{class:"text-gray-500"},"Wallet",-1)),t("span",ee," ..."+i((S=Q.value)==null?void 0:S.wallet_address.slice(-8)),1)])]),r(s(h),{severity:"info",closable:!1},{default:n(()=>[...e[28]||(e[28]=[t("p",{class:"text-sm"},"Your transaction will be verified by our team. This usually takes 10-30 minutes.",-1)])]),_:1}),t("div",se,[r(s(p),{label:"Back",icon:"pi pi-arrow-left",outlined:"",onClick:W}),r(s(p),{label:"Submit Deposit",icon:"pi pi-send",loading:L.value,disabled:!M.value,onClick:K},null,8,["loading","disabled"])])])]}),_:1})):x("",!0),_.value?(u(),b(s(w),{key:6,class:"shadow-lg"},{content:n(()=>{var l,o;return[t("div",ae,[e[34]||(e[34]=t("div",{class:"flex items-center justify-center w-20 h-20 mx-auto mb-4 rounded-full bg-orange-100 dark:bg-orange-900/30"},[t("i",{class:"text-4xl text-orange-600 pi pi-check dark:text-orange-400"})],-1)),e[35]||(e[35]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"}," Deposit Registered ",-1)),e[36]||(e[36]=t("p",{class:"mt-2 text-gray-500"}," Your crypto deposit is pending verification ",-1)),t("div",le,[t("div",oe,[t("div",re,[e[29]||(e[29]=t("span",{class:"text-gray-500"},"Cryptocurrency",-1)),t("span",ie,i((l=y.value)==null?void 0:l.symbol),1)]),t("div",ne,[e[30]||(e[30]=t("span",{class:"text-gray-500"},"Amount",-1)),t("span",de,i(s(a).crypto_amount)+" "+i((o=y.value)==null?void 0:o.symbol),1)]),t("div",ue,[e[31]||(e[31]=t("span",{class:"text-gray-500"},"USD Value",-1)),t("span",ce,i(s(F)(s(a).usd_amount*100,"USD")),1)]),e[32]||(e[32]=t("div",{class:"flex justify-between"},[t("span",{class:"text-gray-500"},"Status"),t("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200"}," Pending Verification ")],-1))])]),r(s(h),{severity:"success",closable:!1,class:"mt-4"},{default:n(()=>[...e[33]||(e[33]=[t("p",{class:"text-sm"},"We've received your transaction. Once verified by our team, the funds will be added to your account. You'll receive an email notification.",-1)])]),_:1}),t("div",pe,[r(s(p),{label:"New Deposit",icon:"pi pi-plus",outlined:"",onClick:Z}),r(s(V),{href:"/deposits"},{default:n(()=>[r(s(p),{label:"Back to Deposits",icon:"pi pi-arrow-left"})]),_:1})])])]}),_:1})):x("",!0)])]),_:1})],64))}};export{Fe as default};
