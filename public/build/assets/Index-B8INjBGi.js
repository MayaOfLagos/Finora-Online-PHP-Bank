import{k as P,j as c,E as B,c as p,d as a,u as r,p as H,w as i,a as e,b as _,t as l,e as z,n as m,o as g,F as $,r as E,q as S}from"./app-CxFppgts.js";import{a as q}from"./index-aDCvlhZR.js";import{a as Y,b as G,s as J}from"./index-Dl1HrChy.js";import{s as V}from"./index-DxyD8NdG.js";import{s as F}from"./index--tVWlMs1.js";import{s as K,a as b,b as M}from"./index-CKe61OTP.js";import{s as U}from"./index-2H_aItCj.js";import{_ as Q}from"./DashboardLayout-BPweOnjp.js";import{u as W}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-DiNE95s0.js";import"./index-CWqCf06g.js";import"./index-CbksB8Dp.js";import"./index-C5dzmf6u.js";import"./index-DeRTakqL.js";import"./index-CetHTJ_y.js";import"./index-CmolEBEl.js";import"./index-BI2B-DzX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"space-y-6"},Z={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},ee={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-indigo-500"},te={class:"flex items-center justify-between"},se={class:"mt-1 text-3xl font-bold text-gray-900 dark:text-white"},re={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-green-500"},ae={class:"flex items-center justify-between"},le={class:"mt-1 text-3xl font-bold text-green-600 dark:text-green-400"},oe={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-red-500"},de={class:"flex items-center justify-between"},ne={class:"mt-1 text-3xl font-bold text-red-600 dark:text-red-400"},ie={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-amber-500"},ue={class:"flex items-center justify-between"},ce={class:"mt-1 text-3xl font-bold text-amber-600 dark:text-amber-400"},pe={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},me={class:"flex flex-col gap-4"},ge={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},xe={class:"flex flex-col gap-4 md:flex-row md:items-center"},ye={class:"flex flex-col gap-2 md:flex-row md:items-center"},fe={class:"hidden lg:block"},be={class:"overflow-hidden bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},ve={class:"text-sm"},we={class:"font-medium text-gray-900 dark:text-white"},he={class:"text-xs text-gray-500 dark:text-gray-400"},ke={class:"font-mono text-sm text-gray-900 dark:text-white"},_e={class:"flex items-center gap-3"},Se={class:"font-medium text-gray-900 dark:text-white"},Ve={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},je={class:"lg:hidden space-y-3"},Te=["onClick"],De={class:"flex items-start justify-between mb-3"},Ce={class:"flex items-center gap-3"},$e={class:"font-medium text-gray-900 dark:text-white"},Fe={class:"text-xs text-gray-500 dark:text-gray-400"},Ue={class:"flex items-center justify-between"},Ae={class:"font-mono text-xs text-gray-500 dark:text-gray-400"},Oe={key:0,class:"flex flex-col items-center justify-center py-16 text-center"},Ie={key:0,class:"flex justify-center"},st={__name:"Index",props:{transactions:{type:Object,default:()=>({data:[],meta:{}})},accounts:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(o){const n=o;P();const{formatCurrency:v}=W(),x=c(n.filters.search||""),w=c(n.filters.account||null),h=c(n.filters.type||null),k=c(n.filters.status||null),y=c(n.filters.date_from?new Date(n.filters.date_from):null),f=c(n.filters.date_to?new Date(n.filters.date_to):null),A=z(()=>[{label:"All Accounts",value:null},...n.accounts.map(d=>({label:`${d.account_name||"Account"} (****${d.account_number.slice(-4)})`,value:d.uuid}))]),O=[{label:"All Types",value:null},{label:"Credit",value:"credit"},{label:"Debit",value:"debit"}],I=[{label:"All Status",value:null},{label:"Completed",value:"completed"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"},{label:"Reversed",value:"reversed"}],L={internal_transfer:"pi-arrows-h",wire_transfer:"pi-globe",domestic_transfer:"pi-building",deposit:"pi-download",withdrawal:"pi-upload",fee:"pi-percentage",interest:"pi-chart-line",refund:"pi-replay"},j=d=>L[d]||"pi-credit-card",T=d=>({completed:"success",pending:"warning",failed:"danger",reversed:"info"})[d]||"secondary",u=()=>{S.get(route("transactions.index"),{search:x.value||void 0,account:w.value||void 0,type:h.value||void 0,status:k.value||void 0,date_from:y.value?y.value.toISOString().split("T")[0]:void 0,date_to:f.value?f.value.toISOString().split("T")[0]:void 0},{preserveState:!0,preserveScroll:!0})},N=()=>{x.value="",w.value=null,h.value=null,k.value=null,y.value=null,f.value=null,u()},R=d=>{S.get(route("transactions.index"),{...n.filters,page:d.page+1},{preserveState:!0,preserveScroll:!0})},D=d=>{S.visit(route("transactions.show",{transaction:d.uuid}))};let C;return B(x,()=>{clearTimeout(C),C=setTimeout(u,500)}),(d,s)=>(g(),p($,null,[a(r(H),{title:"Transaction History"}),a(Q,null,{default:i(()=>[e("div",X,[s[18]||(s[18]=e("div",{class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Transaction History "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," View and track all your transactions ")])],-1)),e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Transactions",-1)),e("p",se,l(o.stats.total_transactions||0),1)]),s[8]||(s[8]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30"},[e("i",{class:"pi pi-list text-xl text-indigo-600 dark:text-indigo-400"})],-1))])]),e("div",re,[e("div",ae,[e("div",null,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Credits",-1)),e("p",le,l(r(v)((o.stats.total_credits||0)*100,"USD")),1)]),s[10]||(s[10]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30"},[e("i",{class:"pi pi-arrow-down text-xl text-green-600 dark:text-green-400"})],-1))])]),e("div",oe,[e("div",de,[e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Debits",-1)),e("p",ne,l(r(v)((o.stats.total_debits||0)*100,"USD")),1)]),s[12]||(s[12]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30"},[e("i",{class:"pi pi-arrow-up text-xl text-red-600 dark:text-red-400"})],-1))])]),e("div",ie,[e("div",ue,[e("div",null,[s[13]||(s[13]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Pending",-1)),e("p",ce,l(o.stats.pending_transactions||0),1)]),s[14]||(s[14]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-amber-100 dark:bg-amber-900/30"},[e("i",{class:"pi pi-clock text-xl text-amber-600 dark:text-amber-400"})],-1))])])]),e("div",pe,[e("div",me,[e("div",ge,[a(r(Y),null,{default:i(()=>[a(r(G),{class:"pi pi-search"}),a(r(J),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),placeholder:"Search by reference...",class:"w-full"},null,8,["modelValue"])]),_:1}),a(r(V),{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t),options:A.value,optionLabel:"label",optionValue:"value",placeholder:"Select Account",class:"w-full",onChange:u},null,8,["modelValue","options"]),a(r(V),{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),options:O,optionLabel:"label",optionValue:"value",placeholder:"Transaction Type",class:"w-full",onChange:u},null,8,["modelValue"]),a(r(V),{modelValue:k.value,"onUpdate:modelValue":s[3]||(s[3]=t=>k.value=t),options:I,optionLabel:"label",optionValue:"value",placeholder:"Status",class:"w-full",onChange:u},null,8,["modelValue"])]),e("div",xe,[e("div",ye,[a(r(F),{modelValue:y.value,"onUpdate:modelValue":s[4]||(s[4]=t=>y.value=t),placeholder:"From Date",dateFormat:"yy-mm-dd",showIcon:"",class:"w-full md:w-40",onDateSelect:u},null,8,["modelValue"]),s[15]||(s[15]=e("span",{class:"text-gray-500 dark:text-gray-400"},"to",-1)),a(r(F),{modelValue:f.value,"onUpdate:modelValue":s[5]||(s[5]=t=>f.value=t),placeholder:"To Date",dateFormat:"yy-mm-dd",showIcon:"",class:"w-full md:w-40",onDateSelect:u},null,8,["modelValue"])]),a(r(q),{label:"Clear Filters",icon:"pi pi-times",outlined:"",size:"small",onClick:N})])])]),e("div",fe,[e("div",be,[a(r(K),{value:o.transactions.data,rows:15,responsiveLayout:"scroll",class:"p-datatable-sm",rowHover:!0,onRowClick:s[6]||(s[6]=t=>D(t.data))},{empty:i(()=>[...s[16]||(s[16]=[e("div",{class:"flex flex-col items-center justify-center py-12"},[e("i",{class:"pi pi-inbox text-4xl text-gray-300 dark:text-gray-600 mb-3"}),e("p",{class:"text-gray-500 dark:text-gray-400"},"No transactions found")],-1)])]),default:i(()=>[a(r(b),{header:"Date",style:{width:"140px"}},{body:i(({data:t})=>[e("div",ve,[e("p",we,l(new Date(t.created_at).toLocaleDateString()),1),e("p",he,l(new Date(t.created_at).toLocaleTimeString()),1)])]),_:1}),a(r(b),{header:"Reference",style:{width:"160px"}},{body:i(({data:t})=>[e("span",ke,l(t.reference_number),1)]),_:1}),a(r(b),{header:"Description"},{body:i(({data:t})=>[e("div",_e,[e("div",{class:m(["flex items-center justify-center w-10 h-10 rounded-lg",t.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[e("i",{class:m(["pi",j(t.transaction_type),"text-lg",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},null,2)],2),e("div",null,[e("p",Se,l(t.description||t.transaction_type),1),t.bank_account?(g(),p("p",Ve," ****"+l(t.bank_account.account_number.slice(-4)),1)):_("",!0)])])]),_:1}),a(r(b),{header:"Amount",style:{width:"160px"}},{body:i(({data:t})=>[e("span",{class:m(["text-lg font-bold",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},l(t.type==="credit"?"+":"-")+l(r(v)(t.amount,t.currency||"USD")),3)]),_:1}),a(r(b),{header:"Status",style:{width:"120px"}},{body:i(({data:t})=>[a(r(U),{value:t.status,severity:T(t.status),class:"uppercase"},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])])]),e("div",je,[(g(!0),p($,null,E(o.transactions.data,t=>(g(),p("div",{key:t.uuid,class:"p-4 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:Le=>D(t)},[e("div",De,[e("div",Ce,[e("div",{class:m(["flex items-center justify-center w-10 h-10 rounded-lg",t.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[e("i",{class:m(["pi",j(t.transaction_type),"text-lg",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},null,2)],2),e("div",null,[e("p",$e,l(t.description||t.transaction_type),1),e("p",Fe,l(t.created_at_human),1)])]),a(r(U),{value:t.status,severity:T(t.status),class:"uppercase text-xs"},null,8,["value","severity"])]),e("div",Ue,[e("span",Ae,l(t.reference_number),1),e("span",{class:m(["text-lg font-bold",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},l(t.type==="credit"?"+":"-")+l(r(v)(t.amount,t.currency||"USD")),3)])],8,Te))),128)),o.transactions.data.length===0?(g(),p("div",Oe,[...s[17]||(s[17]=[e("div",{class:"flex items-center justify-center w-20 h-20 mb-4 rounded-full bg-gray-100 dark:bg-gray-800"},[e("i",{class:"pi pi-inbox text-3xl text-gray-400"})],-1),e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," No transactions found ",-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Your transaction history will appear here ",-1)])])):_("",!0)]),o.transactions.data.length>0?(g(),p("div",Ie,[a(r(M),{rows:o.transactions.per_page,totalRecords:o.transactions.total,first:(o.transactions.current_page-1)*o.transactions.per_page,onPage:R},null,8,["rows","totalRecords","first"])])):_("",!0)])]),_:1})],64))}};export{st as default};
