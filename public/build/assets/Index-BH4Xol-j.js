import{f as B,m as O,g as j,w as i,a as t,d as n,u as s,t as o,q as _,i as c,h as $,j as f,c as h,b as D,o as g,e as U,a0 as T}from"./app-ouRiD5HY.js";import{a as M,_ as F}from"./DashboardLayout-Bgq4JauI.js";import{s as I,a as m}from"./index-BL2ZSOOQ.js";import{a as u}from"./index-BbivnfWc.js";import{s as L}from"./index-bpbmNmRT.js";import{s as x}from"./index-DKtzkE36.js";import{s as R}from"./index-DXbMLQl6.js";import{s as N}from"./index-Qjxjmd6A.js";/* empty css            */import"./_plugin-vue_export-helper-DfEtbB7c.js";import"./index-BN0GHOu-.js";import"./index-DA-SbFYT.js";import"./index-DBYAA0SZ.js";import"./index-CSAAcObk.js";import"./index-BjIe5G4N.js";const z={class:"space-y-6"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},E={class:"text-center"},H={class:"text-3xl font-bold text-gray-900"},K={class:"text-center"},G={class:"text-3xl font-bold text-red-600"},J={class:"text-center"},Q={class:"text-3xl font-bold text-blue-600"},W={class:"flex flex-wrap gap-3"},X={class:"text-center py-8 text-gray-500"},Y={class:"font-medium"},Z={class:"text-xs text-gray-500"},tt={class:"font-semibold text-red-600"},et={class:"text-sm"},st={class:"flex gap-2"},at={key:0,class:"space-y-6"},lt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},nt={class:"flex justify-between items-center mb-2"},ot={class:"text-sm font-semibold text-blue-900"},it={class:"w-full bg-gray-200 rounded-full h-3"},dt={class:"flex justify-between mt-2 text-xs text-gray-600"},rt={class:"grid grid-cols-2 gap-4"},ut={class:"font-semibold mt-1"},mt={class:"font-semibold mt-1"},pt={class:"font-semibold text-lg mt-1"},vt={class:"font-semibold text-lg text-red-600 mt-1"},yt={class:"font-semibold text-blue-600 mt-1"},ct={class:"font-semibold mt-1"},bt={class:"font-semibold mt-1"},xt={class:"font-semibold mt-1"},_t={class:"font-semibold mt-1"},ft={class:"mt-1"},gt={class:"flex gap-3 pt-4 border-t"},wt={key:0,class:"space-y-4"},kt={class:"text-sm"},Pt={class:"text-sm"},Ct={class:"text-gray-500"},$t={class:"flex gap-3 pt-4"},Rt={__name:"Index",props:{loans:Object,stats:Object},setup(b){const a=f(null),v=f(!1),y=f(!1),p=B({amount:null}),d=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r),w=r=>({active:"success",disbursed:"info",closed:"contrast",defaulted:"danger"})[r]||"info",k=U(()=>{if(!a.value)return 0;const r=a.value.principal_amount-a.value.outstanding_balance;return Math.round(r/a.value.principal_amount*100)}),V=r=>{a.value=r,v.value=!0},P=r=>{a.value=r,p.amount=r.monthly_payment,y.value=!0},A=()=>{console.log("Payment submitted:",p.amount),y.value=!1};return(r,e)=>{const C=O("tooltip");return g(),j(F,{title:"My Loans"},{default:i(()=>[t("div",z,[t("div",q,[n(s(x),null,{content:i(()=>[t("div",E,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-600 mb-2"},"Active Loans",-1)),t("p",H,o(b.stats.total_loans),1)])]),_:1}),n(s(x),null,{content:i(()=>[t("div",K,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-600 mb-2"},"Total Outstanding",-1)),t("p",G,o(d(b.stats.total_outstanding)),1)])]),_:1}),n(s(x),null,{content:i(()=>[t("div",J,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-600 mb-2"},"Next Payment",-1)),t("p",Q,o(d(b.stats.next_payment)),1)])]),_:1})]),t("div",W,[n(s(u),{label:"Browse Loan Programs",icon:"pi pi-book",onClick:e[0]||(e[0]=l=>s(_).visit("/loans/programs"))}),n(s(u),{label:"My Applications",icon:"pi pi-file",severity:"secondary",onClick:e[1]||(e[1]=l=>s(_).visit("/loans/applications"))})]),n(s(x),null,{title:i(()=>[...e[12]||(e[12]=[t("div",{class:"flex justify-between items-center"},[t("span",null,"Active Loans")],-1)])]),content:i(()=>[n(s(I),{value:b.loans.data,paginator:!0,rows:10,dataKey:"id",rowHover:!0,loading:!1,class:"p-datatable-sm"},{empty:i(()=>[t("div",X,[e[13]||(e[13]=t("i",{class:"pi pi-inbox text-4xl mb-3"},null,-1)),e[14]||(e[14]=t("p",null,"No active loans found",-1)),n(s(u),{label:"Apply for a Loan",icon:"pi pi-plus",class:"mt-4",onClick:e[2]||(e[2]=l=>s(_).visit("/loans/programs"))})])]),default:i(()=>[n(s(m),{field:"loan_type",header:"Loan Type",sortable:!0},{body:i(l=>[t("div",Y,o(l.data.loan_type),1),t("div",Z,o(l.data.account_number),1)]),_:1}),n(s(m),{field:"principal_amount",header:"Principal",sortable:!0},{body:i(l=>[c(o(d(l.data.principal_amount)),1)]),_:1}),n(s(m),{field:"outstanding_balance",header:"Outstanding",sortable:!0},{body:i(l=>[t("div",tt,o(d(l.data.outstanding_balance)),1)]),_:1}),n(s(m),{field:"monthly_payment",header:"Monthly Payment",sortable:!0},{body:i(l=>[c(o(d(l.data.monthly_payment)),1)]),_:1}),n(s(m),{field:"interest_rate",header:"Rate",sortable:!0},{body:i(l=>[c(o(l.data.interest_rate)+"% ",1)]),_:1}),n(s(m),{field:"next_payment_date",header:"Next Payment",sortable:!0},{body:i(l=>[t("div",et,o(l.data.next_payment_date),1)]),_:1}),n(s(m),{field:"status",header:"Status",sortable:!0},{body:i(l=>[n(s(L),{value:l.data.status_label,severity:w(l.data.status)},null,8,["value","severity"])]),_:1}),n(s(m),{header:"Actions",exportable:!1},{body:i(l=>[t("div",st,[$(n(s(u),{icon:"pi pi-eye",size:"small",text:"",rounded:"",severity:"info",onClick:S=>V(l.data)},null,8,["onClick"]),[[C,"View Details",void 0,{top:!0}]]),$(n(s(u),{icon:"pi pi-dollar",size:"small",text:"",rounded:"",severity:"success",onClick:S=>P(l.data)},null,8,["onClick"]),[[C,"Make Payment",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value"])]),_:1})]),n(s(M),{visible:v.value,"onUpdate:visible":e[5]||(e[5]=l=>v.value=l),modal:"",header:"Loan Details",style:{width:"50rem"},breakpoints:{"960px":"75vw","640px":"90vw"}},{default:i(()=>[a.value?(g(),h("div",at,[t("div",lt,[t("div",nt,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-600"},"Repayment Progress",-1)),t("span",ot,o(k.value)+"%",1)]),t("div",it,[t("div",{class:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:T({width:k.value+"%"})},null,4)]),t("div",dt,[t("span",null,o(d(a.value.principal_amount-a.value.outstanding_balance))+" paid",1),t("span",null,o(d(a.value.outstanding_balance))+" remaining",1)])]),t("div",rt,[t("div",null,[e[16]||(e[16]=t("label",{class:"text-sm text-gray-600"},"Loan Type",-1)),t("p",ut,o(a.value.loan_type),1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"text-sm text-gray-600"},"Account",-1)),t("p",mt,o(a.value.account_number),1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-sm text-gray-600"},"Principal Amount",-1)),t("p",pt,o(d(a.value.principal_amount)),1)]),t("div",null,[e[19]||(e[19]=t("label",{class:"text-sm text-gray-600"},"Outstanding Balance",-1)),t("p",vt,o(d(a.value.outstanding_balance)),1)]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-sm text-gray-600"},"Interest Rate",-1)),t("p",yt,o(a.value.interest_rate)+"% APR",1)]),t("div",null,[e[21]||(e[21]=t("label",{class:"text-sm text-gray-600"},"Monthly Payment",-1)),t("p",ct,o(d(a.value.monthly_payment)),1)]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-sm text-gray-600"},"Next Payment Due",-1)),t("p",bt,o(a.value.next_payment_date),1)]),t("div",null,[e[23]||(e[23]=t("label",{class:"text-sm text-gray-600"},"Final Payment Date",-1)),t("p",xt,o(a.value.final_payment_date),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"text-sm text-gray-600"},"Disbursed On",-1)),t("p",_t,o(a.value.disbursed_at),1)]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-sm text-gray-600"},"Status",-1)),t("div",ft,[n(s(L),{value:a.value.status_label,severity:w(a.value.status)},null,8,["value","severity"])])])]),t("div",gt,[n(s(u),{label:"Make Payment",icon:"pi pi-dollar",onClick:e[3]||(e[3]=l=>{v.value=!1,P(a.value)})}),n(s(u),{label:"Close",severity:"secondary",outlined:"",onClick:e[4]||(e[4]=l=>v.value=!1)})])])):D("",!0)]),_:1},8,["visible"]),n(s(M),{visible:y.value,"onUpdate:visible":e[8]||(e[8]=l=>y.value=l),modal:"",header:"Make Loan Payment",style:{width:"35rem"},breakpoints:{"960px":"75vw","640px":"90vw"}},{default:i(()=>[a.value?(g(),h("div",wt,[n(s(N),{severity:"info",closable:!1},{default:i(()=>[t("p",kt,[e[26]||(e[26]=c(" Monthly Payment: ",-1)),t("strong",null,o(d(a.value.monthly_payment)),1)]),t("p",Pt,[e[27]||(e[27]=c(" Outstanding Balance: ",-1)),t("strong",null,o(d(a.value.outstanding_balance)),1)])]),_:1}),t("div",null,[e[28]||(e[28]=t("label",{for:"payment_amount",class:"block text-sm font-medium text-gray-700 mb-2"}," Payment Amount ",-1)),n(s(R),{id:"payment_amount",modelValue:s(p).amount,"onUpdate:modelValue":e[6]||(e[6]=l=>s(p).amount=l),mode:"currency",currency:"USD",min:a.value.monthly_payment,max:a.value.outstanding_balance,class:"w-full"},null,8,["modelValue","min","max"]),t("small",Ct," Minimum: "+o(d(a.value.monthly_payment))+" | Maximum: "+o(d(a.value.outstanding_balance)),1)]),n(s(N),{severity:"warn",closable:!1},{default:i(()=>[...e[29]||(e[29]=[t("p",{class:"text-sm"}," Note: This is a demo feature. In production, this would integrate with your payment gateway. ",-1)])]),_:1}),t("div",$t,[n(s(u),{label:"Submit Payment",icon:"pi pi-check",onClick:A,disabled:!s(p).amount||s(p).amount<a.value.monthly_payment},null,8,["disabled"]),n(s(u),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[7]||(e[7]=l=>y.value=!1)})])])):D("",!0)]),_:1},8,["visible"])]),_:1})}}};export{Rt as default};
