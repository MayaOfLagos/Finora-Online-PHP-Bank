import{k as q,f as $,h as A,w as c,a as e,d as n,u as s,c as o,o as l,F as v,r as k,b as p,t as i,i as y,j as D,z as F,n as g,e as U,q as B}from"./app-C8_YI8N-.js";import{D as L}from"./DashboardLayout-DnzOksDG.js";import{s as w}from"./index-D3CEqdBk.js";import{s as M}from"./index-C8QerdRZ.js";import{s as E}from"./index-CpW1w6SW.js";import{a as x}from"./index-DXK8Q9K_.js";import{s as I}from"./index-CZEAb2CO.js";import{s as _}from"./index-B2Ufd3vB.js";import{s as O}from"./index-CvODXvXH.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-DrT5wC6Z.js";import"./index-BjgIoK0t.js";import"./index-DUpdi1BB.js";import"./index-DRpsq_L0.js";import"./index-BFvmfWzx.js";import"./AppLogo-BHj5-vZy.js";import"./index-DVqxlV8X.js";import"./index-DeAiVhPO.js";const z={class:"space-y-6"},G={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},H={class:"grid gap-6 lg:grid-cols-3"},P={key:0,class:"space-y-3"},Y=["onClick"],J={class:"flex items-start justify-between gap-4"},K={class:"flex-1 min-w-0"},R={class:"flex items-center gap-2 mb-1"},W={class:"font-semibold text-gray-900 dark:text-white truncate"},X={key:0,class:"flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full"},Z={class:"flex flex-wrap items-center gap-2 text-sm text-gray-500 dark:text-gray-400"},ee={class:"font-mono"},te={key:0,class:"mt-2 text-sm text-gray-600 dark:text-gray-400 line-clamp-2"},se={class:"flex flex-col items-end gap-2"},re={class:"text-xs text-gray-500 dark:text-gray-400"},ae={key:1,class:"text-center py-8"},le={class:"space-y-3"},oe={class:"font-semibold text-gray-900 dark:text-white text-sm"},ie={class:"text-sm text-gray-600 dark:text-gray-400 mt-1 pl-5"},ne={key:0,class:"text-sm text-gray-600 dark:text-gray-400 text-center py-4"},de={key:0,class:"text-red-500"},ue={key:0,class:"text-red-500"},ce={key:0,class:"text-red-500"},pe={class:"flex justify-end gap-2 pt-4"},me={__name:"Index",props:{tickets:Array,categories:Array,priorities:Array,faqs:Array},setup(d){const h=d,b=q(),m=D(!1),a=$({subject:"",message:"",category_id:null,priority:"medium"}),V={open:"info",in_progress:"warning",waiting:"secondary",resolved:"success",closed:"secondary"},j=U(()=>h.priorities||[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]),C=()=>{a.reset(),m.value=!0},S=()=>{a.post(route("support.store"),{onSuccess:()=>{m.value=!1,b.add({severity:"success",summary:"Ticket Created",detail:"Your support ticket has been submitted successfully.",life:5e3})},onError:u=>{b.add({severity:"error",summary:"Error",detail:Object.values(u)[0]||"Failed to create ticket.",life:5e3})}})},T=u=>{B.visit(route("support.show",u.uuid))},N=u=>V[u]||"info";return(u,t)=>(l(),A(L,{title:"Support"},{default:c(()=>[e("div",z,[e("div",G,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Support"),e("p",{class:"text-gray-600 dark:text-gray-400"},"Get help, browse FAQs, or open a ticket.")],-1)),n(s(x),{label:"New Ticket",icon:"pi pi-plus",onClick:C,class:"w-full sm:w-auto"})]),e("div",H,[n(s(w),{class:"lg:col-span-2"},{title:c(()=>[...t[7]||(t[7]=[e("div",{class:"flex items-center gap-2"},[e("i",{class:"pi pi-ticket text-primary"}),y(" My Tickets ")],-1)])]),content:c(()=>[d.tickets&&d.tickets.length?(l(),o("div",P,[(l(!0),o(v,null,k(d.tickets,r=>(l(),o("div",{key:r.uuid,onClick:f=>T(r),class:"p-4 border rounded-xl dark:border-gray-700 bg-white dark:bg-gray-800 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors"},[e("div",J,[e("div",K,[e("div",R,[e("h3",W,i(r.subject),1),r.unread_count?(l(),o("span",X,i(r.unread_count),1)):p("",!0)]),e("div",Z,[e("span",ee,i(r.ticket_number),1),t[8]||(t[8]=e("span",null,"•",-1)),e("span",null,i(r.category),1),t[9]||(t[9]=e("span",null,"•",-1)),e("span",null,i(r.updated_at),1)]),r.last_message?(l(),o("p",te,i(r.last_message),1)):p("",!0)]),e("div",se,[n(s(I),{value:r.status_label,severity:N(r.status)},null,8,["value","severity"]),e("span",re,i(r.priority_label),1)])])],8,Y))),128))])):(l(),o("div",ae,[...t[10]||(t[10]=[e("i",{class:"pi pi-inbox text-4xl text-gray-300 dark:text-gray-600 mb-3"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"No tickets yet",-1),e("p",{class:"text-sm text-gray-400 dark:text-gray-500 mt-1"},'Click "New Ticket" to get started',-1)])]))]),_:1}),n(s(w),null,{title:c(()=>[...t[11]||(t[11]=[e("div",{class:"flex items-center gap-2"},[e("i",{class:"pi pi-question-circle text-primary"}),y(" Quick Answers ")],-1)])]),content:c(()=>[e("div",le,[(l(!0),o(v,null,k(d.faqs,(r,f)=>(l(),o("div",{key:f,class:"p-3 border rounded-lg dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},[e("p",oe,[t[12]||(t[12]=e("i",{class:"pi pi-question-circle mr-1 text-primary"},null,-1)),y(" "+i(r.question),1)]),e("p",ie,i(r.answer),1)]))),128)),!d.faqs||!d.faqs.length?(l(),o("p",ne," No FAQs available. ")):p("",!0)])]),_:1})])]),n(s(O),{visible:m.value,"onUpdate:visible":t[5]||(t[5]=r=>m.value=r),header:"Open New Ticket",modal:!0,closable:!0,style:{width:"500px"},class:"p-fluid"},{default:c(()=>[e("form",{onSubmit:F(S,["prevent"]),class:"space-y-4 pt-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Category *",-1)),n(s(_),{modelValue:s(a).category_id,"onUpdate:modelValue":t[0]||(t[0]=r=>s(a).category_id=r),options:d.categories,optionLabel:"name",optionValue:"id",placeholder:"Select a category",class:g(["w-full",{"p-invalid":s(a).errors.category_id}])},null,8,["modelValue","options","class"]),s(a).errors.category_id?(l(),o("small",de,i(s(a).errors.category_id),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Subject *",-1)),n(s(M),{modelValue:s(a).subject,"onUpdate:modelValue":t[1]||(t[1]=r=>s(a).subject=r),placeholder:"Brief summary of your issue",class:g(["w-full",{"p-invalid":s(a).errors.subject}])},null,8,["modelValue","class"]),s(a).errors.subject?(l(),o("small",ue,i(s(a).errors.subject),1)):p("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Priority",-1)),n(s(_),{modelValue:s(a).priority,"onUpdate:modelValue":t[2]||(t[2]=r=>s(a).priority=r),options:j.value,optionLabel:"label",optionValue:"value",placeholder:"Select priority",class:"w-full"},null,8,["modelValue","options"])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Message *",-1)),n(s(E),{modelValue:s(a).message,"onUpdate:modelValue":t[3]||(t[3]=r=>s(a).message=r),rows:"5",placeholder:"Describe your issue in detail...",class:g(["w-full",{"p-invalid":s(a).errors.message}])},null,8,["modelValue","class"]),s(a).errors.message?(l(),o("small",ce,i(s(a).errors.message),1)):p("",!0)]),e("div",pe,[n(s(x),{type:"button",label:"Cancel",severity:"secondary",outlined:"",onClick:t[4]||(t[4]=r=>m.value=!1)}),n(s(x),{type:"submit",label:"Submit Ticket",icon:"pi pi-send",loading:s(a).processing},null,8,["loading"])])],32)]),_:1},8,["visible"])]),_:1}))}},De=Q(me,[["__scopeId","data-v-9f47e9b2"]]);export{De as default};
