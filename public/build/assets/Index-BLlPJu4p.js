import{k as U,f as E,g as h,w as l,a as t,d as c,u as a,c as i,b as m,o as r,t as d,i as p,F as V,r as w,e as R}from"./app-Bj2ecinv.js";import{_ as $}from"./DashboardLayout-C3XP9jlB.js";import{s as y}from"./index-ctO1EBkw.js";import{s as j}from"./index-CoBUb9mQ.js";import{s as C}from"./index-m7w0eITA.js";import{a as D}from"./index-xUUOuKbi.js";import{s as T}from"./index-B00ZtrSj.js";import{s as B}from"./index-El9hP9u4.js";/* empty css            */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CzXYpUdU.js";import"./index-B0Cy0DpT.js";const F={class:"space-y-6"},L={class:"grid gap-6 lg:grid-cols-3"},O={class:"grid gap-4 md:grid-cols-2"},I={class:"md:col-span-2"},M={key:0,class:"text-sm text-red-500"},Y={class:"md:col-span-2"},q={key:0,class:"text-sm text-red-500"},z={class:"md:col-span-2 flex justify-end"},G={class:"space-y-3"},H={class:"text-sm text-gray-600 dark:text-gray-400"},J={class:"font-semibold text-gray-900 dark:text-white"},K={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},P={class:"flex items-center justify-between"},Q={class:"font-semibold text-gray-900 dark:text-white"},W={class:"text-sm text-gray-600 dark:text-gray-400"},X={class:"text-sm text-gray-600 dark:text-gray-400"},Z={class:"text-xs text-gray-500"},ee={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},pe={__name:"Index",props:{vouchers:{type:Object,default:()=>({data:[]})},stats:{type:Object,default:()=>({})},bankAccounts:{type:Array,default:()=>[]}},setup(n){var _,b;const u=n,A=U(),o=E({voucher_code:"",bank_account_id:((b=(_=u.bankAccounts)==null?void 0:_[0])==null?void 0:b.id)??null}),x=(v,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format((v||0)/100),g={active:{label:"Active",severity:"success"},used:{label:"Used",severity:"secondary"},expired:{label:"Expired",severity:"danger"}},N=()=>{o.post("/vouchers/redeem",{preserveScroll:!0,onSuccess:()=>{A.add({severity:"success",summary:"Redeemed",detail:"Voucher applied.",life:2500}),o.reset("voucher_code")}})},S=R(()=>[{label:"Active",value:u.stats.active??0},{label:"Used",value:u.stats.used??0},{label:"Expired",value:u.stats.expired??0},{label:"Total Value Used",value:x((u.stats.total_value??0)*100)}]);return(v,e)=>(r(),h($,{title:"Vouchers"},{default:l(()=>[t("div",F,[e[8]||(e[8]=t("div",{class:"space-y-1"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Vouchers"),t("p",{class:"text-gray-600 dark:text-gray-400"},"Redeem vouchers to credit your accounts.")],-1)),t("div",L,[c(a(y),{class:"lg:col-span-2"},{title:l(()=>[...e[2]||(e[2]=[p("Redeem Voucher",-1)])]),content:l(()=>[t("div",O,[t("div",I,[e[3]||(e[3]=t("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Voucher Code",-1)),c(a(j),{modelValue:a(o).voucher_code,"onUpdate:modelValue":e[0]||(e[0]=s=>a(o).voucher_code=s),placeholder:"ENTER-CODE",class:"w-full mt-1"},null,8,["modelValue"]),a(o).errors.voucher_code?(r(),i("p",M,d(a(o).errors.voucher_code),1)):m("",!0)]),t("div",Y,[e[5]||(e[5]=t("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Deposit To",-1)),c(a(C),{modelValue:a(o).bank_account_id,"onUpdate:modelValue":e[1]||(e[1]=s=>a(o).bank_account_id=s),options:n.bankAccounts,optionLabel:"account_number",optionValue:"id",class:"w-full mt-1",placeholder:"Select account"},null,8,["modelValue","options"]),a(o).errors.bank_account_id?(r(),i("p",q,d(a(o).errors.bank_account_id),1)):m("",!0),n.bankAccounts.length?m("",!0):(r(),h(a(B),{key:1,severity:"warn",closable:!1,class:"mt-2"},{default:l(()=>[...e[4]||(e[4]=[p("No bank accounts found. Add an account first.",-1)])]),_:1}))]),t("div",z,[c(a(D),{label:"Redeem",icon:"pi pi-ticket",loading:a(o).processing,onClick:N},null,8,["loading"])])])]),_:1}),c(a(y),null,{title:l(()=>[...e[6]||(e[6]=[p("Stats",-1)])]),content:l(()=>[t("div",G,[(r(!0),i(V,null,w(S.value,s=>(r(),i("div",{key:s.label,class:"flex items-center justify-between p-3 border rounded-xl dark:border-gray-700"},[t("span",H,d(s.label),1),t("span",J,d(s.value),1)]))),128))])]),_:1})]),c(a(y),null,{title:l(()=>[...e[7]||(e[7]=[p("Your Vouchers",-1)])]),content:l(()=>[t("div",K,[(r(!0),i(V,null,w(n.vouchers.data,s=>{var f,k;return r(),i("div",{key:s.id,class:"p-4 border rounded-xl dark:border-gray-700 bg-white dark:bg-gray-800 space-y-2"},[t("div",P,[t("h3",Q,d(s.code),1),c(a(T),{value:((f=g[s.status])==null?void 0:f.label)||s.status,severity:((k=g[s.status])==null?void 0:k.severity)||"info"},null,8,["value","severity"])]),t("p",W,"Value: "+d(x(s.amount,s.currency||"USD")),1),t("p",X,"Expires: "+d(s.expires_at||"N/A"),1),t("p",Z,d(s.description||"Voucher credit"),1)])}),128))]),n.vouchers.data.length?m("",!0):(r(),i("p",ee,"No vouchers yet."))]),_:1})])]),_:1}))}};export{pe as default};
