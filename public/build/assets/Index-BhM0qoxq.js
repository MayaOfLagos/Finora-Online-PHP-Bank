import{k as A,f as D,g as v,w as d,a,d as r,u as s,c,b as u,o as n,t as i,i as $,e as F,n as z,F as j,r as S,q as E}from"./app-CvydF_v8.js";import{_ as M}from"./DashboardLayout-BzxfP-Lv.js";import{s as k}from"./index-kGn3S0Oa.js";import{a as y}from"./index-BypMu-dR.js";import{s as T}from"./index-CYAgiUNe.js";import{s as G}from"./index-C0d_cuHV.js";import{s as U}from"./index-BDxn40fn.js";import{s as O}from"./index-v9A9dLjY.js";import{s as f}from"./index-BHGaicL7.js";import{s as L,a as C}from"./index-CYaNnxJe.js";import{s as I}from"./index-DAwen2D7.js";/* empty css            */import"./index-xKB_zved.js";import"./index-COyFtG5m.js";import"./index-DRuIyVKW.js";import"./index-CyYx-0Vc.js";import"./index-D1T-yJd0.js";import"./AppLogo-BRPeOsCN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-KWX2Xv1z.js";import"./index-DWB2QRXL.js";import"./index-DW4czyJ2.js";import"./index-BlnjUIN5.js";const W={class:"space-y-6"},H={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},J={class:"flex gap-2"},K={class:"grid gap-6 lg:grid-cols-3"},P={class:"grid gap-4 md:grid-cols-2"},Q={class:"space-y-1 md:col-span-2"},X={key:0,class:"text-sm text-red-500"},Y={class:"space-y-1"},Z={key:0,class:"text-sm text-red-500"},ee={class:"space-y-1"},te={key:0,class:"text-sm text-red-500"},se={class:"space-y-1"},ae={class:"space-y-1 md:col-span-2"},le={key:0,class:"text-sm text-red-500"},re={class:"md:col-span-2 flex justify-end"},oe={class:"font-semibold text-gray-900 dark:text-white capitalize"},ne={class:"text-sm text-gray-600 dark:text-gray-400"},ie={class:"text-xs text-gray-500 dark:text-gray-500"},de={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},ce={class:"space-y-3"},ue={class:"space-y-1"},me={class:"text-sm text-gray-600 dark:text-gray-400"},pe={class:"text-lg font-semibold text-gray-900 dark:text-white"},ye={class:"text-sm text-gray-600 dark:text-gray-400"},xe={class:"flex gap-2"},ge={class:"flex flex-col gap-2"},ve={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},fe={class:"space-y-3"},_e={class:"space-y-1"},be={class:"text-sm text-gray-600 dark:text-gray-400"},ke={class:"text-lg font-semibold text-gray-900 dark:text-white"},he={class:"text-sm text-gray-600 dark:text-gray-400"},Re={class:"flex gap-2"},we={class:"flex flex-col gap-2"},Ve={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Pe={__name:"Index",props:{sentRequests:{type:Object,default:()=>({data:[]})},receivedRequests:{type:Object,default:()=>({data:[]})}},setup(p){const h=p,R=A(),N=[{label:"USD",value:"USD"},{label:"EUR",value:"EUR"},{label:"GBP",value:"GBP"},{label:"NGN",value:"NGN"}],l=D({responder_email:"",amount:null,currency:"USD",reason:"",type:"personal",expires_at:""}),q=[{label:"Personal",value:"personal"},{label:"Business",value:"business"},{label:"Other",value:"other"}],_=(o,t="USD")=>o==null?`${t} 0.00`:new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(o/100),x=o=>({pending:{label:"Pending",severity:"warning"},accepted:{label:"Accepted",severity:"success"},rejected:{label:"Rejected",severity:"danger"},cancelled:{label:"Cancelled",severity:"secondary"}})[o]||{label:o,severity:"info"},B=()=>{l.transform(o=>({...o,amount:Math.round((o.amount||0)*100)})).post("/money-requests",{preserveScroll:!0,onSuccess:()=>{R.add({severity:"success",summary:"Sent",detail:"Money request sent.",life:2500}),l.reset("responder_email","amount","reason")}})},b=(o,t,e={})=>{const m={accept:`/money-requests/${o}/accept`,reject:`/money-requests/${o}/reject`,cancel:`/money-requests/${o}`},g=t==="cancel"?"delete":"post";if(t==="reject"&&!e.rejection_reason){const V=window.prompt("Why are you rejecting this request?");if(!V)return;e.rejection_reason=V}E[g](m[t],e,{preserveScroll:!0,onSuccess:()=>R.add({severity:"success",summary:"Updated",detail:"Request updated.",life:2500})})},w=F(()=>[...h.sentRequests.data||[],...h.receivedRequests.data||[]].slice(0,6).map(t=>({status:t.status,date:t.created_at,detail:`${t.type||"personal"} Â· ${_(t.amount,t.currency)}`})));return(o,t)=>(n(),v(M,{title:"Money Requests"},{default:d(()=>[a("div",W,[a("div",H,[t[5]||(t[5]=a("div",null,[a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Money Requests"),a("p",{class:"text-gray-600 dark:text-gray-400"},"Send or respond to payment requests quickly.")],-1)),a("div",J,[r(s(y),{icon:"pi pi-history",label:"History",severity:"secondary",text:""})])]),a("div",K,[r(s(k),{class:"lg:col-span-2"},{title:d(()=>[...t[6]||(t[6]=[$("Request Money",-1)])]),content:d(()=>[a("div",P,[a("div",Q,[t[7]||(t[7]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Recipient Email",-1)),r(s(T),{modelValue:s(l).responder_email,"onUpdate:modelValue":t[0]||(t[0]=e=>s(l).responder_email=e),placeholder:"customer@example.com",class:"w-full"},null,8,["modelValue"]),s(l).errors.responder_email?(n(),c("p",X,i(s(l).errors.responder_email),1)):u("",!0)]),a("div",Y,[t[8]||(t[8]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Amount",-1)),r(s(G),{modelValue:s(l).amount,"onUpdate:modelValue":t[1]||(t[1]=e=>s(l).amount=e),mode:"decimal",min:1,maxFractionDigits:2,class:"w-full",placeholder:"0.00"},null,8,["modelValue"]),s(l).errors.amount?(n(),c("p",Z,i(s(l).errors.amount),1)):u("",!0)]),a("div",ee,[t[9]||(t[9]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Currency",-1)),r(s(U),{modelValue:s(l).currency,"onUpdate:modelValue":t[2]||(t[2]=e=>s(l).currency=e),options:N,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"]),s(l).errors.currency?(n(),c("p",te,i(s(l).errors.currency),1)):u("",!0)]),a("div",se,[t[10]||(t[10]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Request Type",-1)),r(s(U),{modelValue:s(l).type,"onUpdate:modelValue":t[3]||(t[3]=e=>s(l).type=e),options:q,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue"])]),a("div",ae,[t[11]||(t[11]=a("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Reason",-1)),r(s(O),{modelValue:s(l).reason,"onUpdate:modelValue":t[4]||(t[4]=e=>s(l).reason=e),rows:"3",placeholder:"What is this for?",class:"w-full"},null,8,["modelValue"]),s(l).errors.reason?(n(),c("p",le,i(s(l).errors.reason),1)):u("",!0)]),a("div",re,[r(s(y),{label:"Send Request",icon:"pi pi-send",loading:s(l).processing,onClick:B},null,8,["loading"])])])]),_:1}),r(s(k),null,{title:d(()=>[...t[12]||(t[12]=[$("Recent Activity",-1)])]),content:d(()=>[r(s(I),{value:w.value,align:"left",class:"w-full"},{marker:d(e=>[a("span",{class:z(["flex items-center justify-center w-6 h-6 rounded-full",{"bg-amber-100 text-amber-600":e.item.status==="pending","bg-emerald-100 text-emerald-600":e.item.status==="accepted","bg-rose-100 text-rose-600":e.item.status==="rejected"}])},[...t[13]||(t[13]=[a("i",{class:"pi pi-circle-fill text-xs"},null,-1)])],2)]),content:d(e=>[a("div",null,[a("p",oe,i(e.item.status),1),a("p",ne,i(e.item.detail),1),a("p",ie,i(e.item.date),1)])]),_:1},8,["value"]),w.value.length?u("",!0):(n(),c("p",de,"No activity yet."))]),_:1})]),r(s(k),null,{content:d(()=>[r(s(L),null,{default:d(()=>[r(s(C),{header:"Received Requests"},{default:d(()=>[a("div",ce,[(n(!0),c(j,null,S(p.receivedRequests.data,e=>{var m;return n(),c("div",{key:e.id,class:"flex items-start justify-between p-4 border rounded-xl dark:border-gray-700 bg-white dark:bg-gray-800"},[a("div",ue,[a("p",me,"From "+i(((m=e.requester)==null?void 0:m.email)||"Unknown"),1),a("p",pe,i(_(e.amount,e.currency)),1),a("p",ye,i(e.reason),1),a("div",xe,[r(s(f),{value:x(e.status).label,severity:x(e.status).severity},null,8,["value","severity"]),r(s(f),{value:e.type||"personal",severity:"secondary"},null,8,["value"])])]),a("div",ge,[e.status==="pending"?(n(),v(s(y),{key:0,label:"Approve",icon:"pi pi-check",size:"small",onClick:g=>b(e.id,"accept")},null,8,["onClick"])):u("",!0),e.status==="pending"?(n(),v(s(y),{key:1,label:"Reject",icon:"pi pi-times",size:"small",severity:"secondary",outlined:"",onClick:g=>b(e.id,"reject")},null,8,["onClick"])):u("",!0)])])}),128)),p.receivedRequests.data.length?u("",!0):(n(),c("p",ve,"No incoming requests."))])]),_:1}),r(s(C),{header:"Sent Requests"},{default:d(()=>[a("div",fe,[(n(!0),c(j,null,S(p.sentRequests.data,e=>{var m;return n(),c("div",{key:e.id,class:"flex items-start justify-between p-4 border rounded-xl dark:border-gray-700 bg-white dark:bg-gray-800"},[a("div",_e,[a("p",be,"To "+i(((m=e.responder)==null?void 0:m.email)||"Recipient"),1),a("p",ke,i(_(e.amount,e.currency)),1),a("p",he,i(e.reason),1),a("div",Re,[r(s(f),{value:x(e.status).label,severity:x(e.status).severity},null,8,["value","severity"]),r(s(f),{value:e.type||"personal",severity:"secondary"},null,8,["value"])])]),a("div",we,[e.status==="pending"?(n(),v(s(y),{key:0,label:"Cancel",icon:"pi pi-ban",size:"small",severity:"secondary",outlined:"",onClick:g=>b(e.id,"cancel")},null,8,["onClick"])):u("",!0)])])}),128)),p.sentRequests.data.length?u("",!0):(n(),c("p",Ve,"No sent requests."))])]),_:1})]),_:1})]),_:1})])]),_:1}))}};export{Pe as default};
