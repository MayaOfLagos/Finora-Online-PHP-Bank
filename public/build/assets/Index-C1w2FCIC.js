import{k as z,j as c,D as q,c as p,d as a,u as r,p as E,w as i,a as e,b as _,t as l,e as A,n as m,o as g,F,r as Y,q as V,A as G}from"./app-ByJBeT-m.js";import{a as J}from"./index-BkJYATvh.js";import{s as K}from"./index-DStDE7p1.js";import{s as M,a as Q}from"./index-BbBn2_Wy.js";import{s as S}from"./index-D8dCvuA8.js";import{s as U}from"./index-DRkMixj2.js";import{s as W,a as b,b as X}from"./index-BfIP8HOB.js";import{s as L}from"./index-CWE2crOn.js";import{D as Z}from"./DashboardLayout-iPb0HOTG.js";import{u as ee}from"./useCurrency-0zMdEeak.js";/* empty css            */import"./index-DD8e_-mt.js";import"./index-Bl-16GkD.js";import"./index-CfB-NDUh.js";import"./index-B2hWmGmP.js";import"./index-zoc7NA-R.js";import"./index-D-VSxfzB.js";import"./index-BiJ3ixx-.js";import"./index-CPdJ4c6_.js";import"./index-DVOZvCXJ.js";import"./index-BUB67lGk.js";import"./index-DUUPPehw.js";import"./index-0GTEbBaE.js";import"./index-UJlFA6Ya.js";import"./index-BpbGPw1f.js";import"./AppLogo-DNiKt_wm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DZqPgUrT.js";const te={class:"space-y-6"},se={class:"grid grid-cols-1 gap-4 md:grid-cols-4"},re={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-indigo-500"},ae={class:"flex items-center justify-between"},le={class:"mt-1 text-3xl font-bold text-gray-900 dark:text-white"},oe={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-green-500"},de={class:"flex items-center justify-between"},ne={class:"mt-1 text-3xl font-bold text-green-600 dark:text-green-400"},ie={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-red-500"},ue={class:"flex items-center justify-between"},ce={class:"mt-1 text-3xl font-bold text-red-600 dark:text-red-400"},pe={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm border-l-4 border-l-amber-500"},me={class:"flex items-center justify-between"},ge={class:"mt-1 text-3xl font-bold text-amber-600 dark:text-amber-400"},xe={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},ye={class:"flex flex-col gap-4"},fe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4"},be={class:"flex flex-col gap-4 md:flex-row md:items-center"},ve={class:"flex flex-col gap-2 md:flex-row md:items-center"},we={class:"hidden lg:block"},he={class:"overflow-hidden bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},ke={class:"text-sm"},_e={class:"font-medium text-gray-900 dark:text-white"},Ve={class:"text-xs text-gray-500 dark:text-gray-400"},Se={class:"font-mono text-sm text-gray-900 dark:text-white"},je={class:"flex items-center gap-3"},Te={class:"font-medium text-gray-900 dark:text-white"},De={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Ce={class:"lg:hidden space-y-3"},$e=["onClick"],Ae={class:"flex items-start justify-between mb-3"},Fe={class:"flex items-center gap-3"},Ue={class:"font-medium text-gray-900 dark:text-white"},Le={class:"text-xs text-gray-500 dark:text-gray-400"},Oe={class:"flex items-center justify-between"},Ie={class:"font-mono text-xs text-gray-500 dark:text-gray-400"},Ne={key:0,class:"flex flex-col items-center justify-center py-16 text-center"},Pe={key:0,class:"flex justify-center"},gt={__name:"Index",props:{transactions:{type:Object,default:()=>({data:[],meta:{}})},accounts:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(d){const n=d;z();const{formatCurrency:v}=ee(),O=G(),j=A(()=>{var o;return((o=O.props.auth)==null?void 0:o.currency)||"USD"}),x=c(n.filters.search||""),w=c(n.filters.account||null),h=c(n.filters.type||null),k=c(n.filters.status||null),y=c(n.filters.date_from?new Date(n.filters.date_from):null),f=c(n.filters.date_to?new Date(n.filters.date_to):null),I=A(()=>[{label:"All Accounts",value:null},...n.accounts.map(o=>({label:`${o.account_name||"Account"} (****${o.account_number.slice(-4)})`,value:o.uuid}))]),N=[{label:"All Types",value:null},{label:"Credit",value:"credit"},{label:"Debit",value:"debit"}],P=[{label:"All Status",value:null},{label:"Completed",value:"completed"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"},{label:"Reversed",value:"reversed"}],R={internal_transfer:"pi-arrows-h",wire_transfer:"pi-globe",domestic_transfer:"pi-building",deposit:"pi-download",withdrawal:"pi-upload",fee:"pi-percentage",interest:"pi-chart-line",refund:"pi-replay"},T=o=>R[o]||"pi-credit-card",D=o=>({completed:"success",pending:"warning",failed:"danger",reversed:"info"})[o]||"secondary",u=()=>{V.get(route("transactions.index"),{search:x.value||void 0,account:w.value||void 0,type:h.value||void 0,status:k.value||void 0,date_from:y.value?y.value.toISOString().split("T")[0]:void 0,date_to:f.value?f.value.toISOString().split("T")[0]:void 0},{preserveState:!0,preserveScroll:!0})},B=()=>{x.value="",w.value=null,h.value=null,k.value=null,y.value=null,f.value=null,u()},H=o=>{V.get(route("transactions.index"),{...n.filters,page:o.page+1},{preserveState:!0,preserveScroll:!0})},C=o=>{V.visit(route("transactions.show",{transaction:o.uuid}))};let $;return q(x,()=>{clearTimeout($),$=setTimeout(u,500)}),(o,s)=>(g(),p(F,null,[a(r(E),{title:"Transaction History"}),a(Z,null,{default:i(()=>[e("div",te,[s[18]||(s[18]=e("div",{class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Transaction History "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," View and track all your transactions ")])],-1)),e("div",se,[e("div",re,[e("div",ae,[e("div",null,[s[7]||(s[7]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Transactions",-1)),e("p",le,l(d.stats.total_transactions||0),1)]),s[8]||(s[8]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30"},[e("i",{class:"pi pi-list text-xl text-indigo-600 dark:text-indigo-400"})],-1))])]),e("div",oe,[e("div",de,[e("div",null,[s[9]||(s[9]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Credits",-1)),e("p",ne,l(r(v)((d.stats.total_credits||0)*100,j.value)),1)]),s[10]||(s[10]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30"},[e("i",{class:"pi pi-arrow-down text-xl text-green-600 dark:text-green-400"})],-1))])]),e("div",ie,[e("div",ue,[e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Debits",-1)),e("p",ce,l(r(v)((d.stats.total_debits||0)*100,j.value)),1)]),s[12]||(s[12]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30"},[e("i",{class:"pi pi-arrow-up text-xl text-red-600 dark:text-red-400"})],-1))])]),e("div",pe,[e("div",me,[e("div",null,[s[13]||(s[13]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Pending",-1)),e("p",ge,l(d.stats.pending_transactions||0),1)]),s[14]||(s[14]=e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-amber-100 dark:bg-amber-900/30"},[e("i",{class:"pi pi-clock text-xl text-amber-600 dark:text-amber-400"})],-1))])])]),e("div",xe,[e("div",ye,[e("div",fe,[a(r(M),null,{default:i(()=>[a(r(Q),{class:"pi pi-search"}),a(r(K),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t),placeholder:"Search by reference...",class:"w-full"},null,8,["modelValue"])]),_:1}),a(r(S),{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t),options:I.value,optionLabel:"label",optionValue:"value",placeholder:"Select Account",class:"w-full",onChange:u},null,8,["modelValue","options"]),a(r(S),{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=t=>h.value=t),options:N,optionLabel:"label",optionValue:"value",placeholder:"Transaction Type",class:"w-full",onChange:u},null,8,["modelValue"]),a(r(S),{modelValue:k.value,"onUpdate:modelValue":s[3]||(s[3]=t=>k.value=t),options:P,optionLabel:"label",optionValue:"value",placeholder:"Status",class:"w-full",onChange:u},null,8,["modelValue"])]),e("div",be,[e("div",ve,[a(r(U),{modelValue:y.value,"onUpdate:modelValue":s[4]||(s[4]=t=>y.value=t),placeholder:"From Date",dateFormat:"yy-mm-dd",showIcon:"",class:"w-full md:w-40",onDateSelect:u},null,8,["modelValue"]),s[15]||(s[15]=e("span",{class:"text-gray-500 dark:text-gray-400"},"to",-1)),a(r(U),{modelValue:f.value,"onUpdate:modelValue":s[5]||(s[5]=t=>f.value=t),placeholder:"To Date",dateFormat:"yy-mm-dd",showIcon:"",class:"w-full md:w-40",onDateSelect:u},null,8,["modelValue"])]),a(r(J),{label:"Clear Filters",icon:"pi pi-times",outlined:"",size:"small",onClick:B})])])]),e("div",we,[e("div",he,[a(r(W),{value:d.transactions.data,rows:15,responsiveLayout:"scroll",class:"p-datatable-sm",rowHover:!0,onRowClick:s[6]||(s[6]=t=>C(t.data))},{empty:i(()=>[...s[16]||(s[16]=[e("div",{class:"flex flex-col items-center justify-center py-12"},[e("i",{class:"pi pi-inbox text-4xl text-gray-300 dark:text-gray-600 mb-3"}),e("p",{class:"text-gray-500 dark:text-gray-400"},"No transactions found")],-1)])]),default:i(()=>[a(r(b),{header:"Date",style:{width:"140px"}},{body:i(({data:t})=>[e("div",ke,[e("p",_e,l(new Date(t.created_at).toLocaleDateString()),1),e("p",Ve,l(new Date(t.created_at).toLocaleTimeString()),1)])]),_:1}),a(r(b),{header:"Reference",style:{width:"160px"}},{body:i(({data:t})=>[e("span",Se,l(t.reference_number),1)]),_:1}),a(r(b),{header:"Description"},{body:i(({data:t})=>[e("div",je,[e("div",{class:m(["flex items-center justify-center w-10 h-10 rounded-lg",t.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[e("i",{class:m(["pi",T(t.transaction_type),"text-lg",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},null,2)],2),e("div",null,[e("p",Te,l(t.description||t.transaction_type),1),t.bank_account?(g(),p("p",De," ****"+l(t.bank_account.account_number.slice(-4)),1)):_("",!0)])])]),_:1}),a(r(b),{header:"Amount",style:{width:"160px"}},{body:i(({data:t})=>[e("span",{class:m(["text-lg font-bold",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},l(t.type==="credit"?"+":"-")+l(r(v)(t.amount,t.currency||"USD")),3)]),_:1}),a(r(b),{header:"Status",style:{width:"120px"}},{body:i(({data:t})=>[a(r(L),{value:t.status,severity:D(t.status),class:"uppercase"},null,8,["value","severity"])]),_:1})]),_:1},8,["value"])])]),e("div",Ce,[(g(!0),p(F,null,Y(d.transactions.data,t=>(g(),p("div",{key:t.uuid,class:"p-4 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:Re=>C(t)},[e("div",Ae,[e("div",Fe,[e("div",{class:m(["flex items-center justify-center w-10 h-10 rounded-lg",t.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[e("i",{class:m(["pi",T(t.transaction_type),"text-lg",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},null,2)],2),e("div",null,[e("p",Ue,l(t.description||t.transaction_type),1),e("p",Le,l(t.created_at_human),1)])]),a(r(L),{value:t.status,severity:D(t.status),class:"uppercase text-xs"},null,8,["value","severity"])]),e("div",Oe,[e("span",Ie,l(t.reference_number),1),e("span",{class:m(["text-lg font-bold",t.type==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},l(t.type==="credit"?"+":"-")+l(r(v)(t.amount,t.currency||"USD")),3)])],8,$e))),128)),d.transactions.data.length===0?(g(),p("div",Ne,[...s[17]||(s[17]=[e("div",{class:"flex items-center justify-center w-20 h-20 mb-4 rounded-full bg-gray-100 dark:bg-gray-800"},[e("i",{class:"pi pi-inbox text-3xl text-gray-400"})],-1),e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," No transactions found ",-1),e("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," Your transaction history will appear here ",-1)])])):_("",!0)]),d.transactions.data.length>0?(g(),p("div",Pe,[a(r(X),{rows:d.transactions.per_page,totalRecords:d.transactions.total,first:(d.transactions.current_page-1)*d.transactions.per_page,onPage:H},null,8,["rows","totalRecords","first"])])):_("",!0)])]),_:1})],64))}};export{gt as default};
