import{k as U,f as E,g as h,w as l,a as e,d as c,u as a,c as i,b as m,o as r,t as d,i as p,F as V,r as w,e as R}from"./app-V7i8qoCa.js";import{_ as $}from"./DashboardLayout-BlDo3X7Y.js";import{s as y}from"./index-CUzaLIAM.js";import{s as j}from"./index-DJmhihAG.js";import{s as C}from"./index-Dptf3oTj.js";import{a as D}from"./index-Bd_Kms0l.js";import{s as T}from"./index-ChhuWcBq.js";import{s as B}from"./index-BXXUSFBw.js";/* empty css            */import"./index-DH1UFd3l.js";import"./index-EwD9z38U.js";import"./index-CwB5UNge.js";import"./index-BUtXSJZe.js";import"./index-DYxTnBwG.js";import"./AppLogo-hmFGOWci.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Du4S__si.js";import"./index-COlL0yB9.js";const F={class:"space-y-6"},L={class:"grid gap-6 lg:grid-cols-3"},O={class:"grid gap-4 md:grid-cols-2"},I={class:"md:col-span-2"},M={key:0,class:"text-sm text-red-500"},Y={class:"md:col-span-2"},q={key:0,class:"text-sm text-red-500"},z={class:"md:col-span-2 flex justify-end"},G={class:"space-y-3"},H={class:"text-sm text-gray-600 dark:text-gray-400"},J={class:"font-semibold text-gray-900 dark:text-white"},K={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},P={class:"flex items-center justify-between"},Q={class:"font-semibold text-gray-900 dark:text-white"},W={class:"text-sm text-gray-600 dark:text-gray-400"},X={class:"text-sm text-gray-600 dark:text-gray-400"},Z={class:"text-xs text-gray-500"},tt={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},vt={__name:"Index",props:{vouchers:{type:Object,default:()=>({data:[]})},stats:{type:Object,default:()=>({})},bankAccounts:{type:Array,default:()=>[]}},setup(n){var _,b;const u=n,A=U(),o=E({voucher_code:"",bank_account_id:((b=(_=u.bankAccounts)==null?void 0:_[0])==null?void 0:b.id)??null}),x=(v,t="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format((v||0)/100),g={active:{label:"Active",severity:"success"},used:{label:"Used",severity:"secondary"},expired:{label:"Expired",severity:"danger"}},N=()=>{o.post("/vouchers/redeem",{preserveScroll:!0,onSuccess:()=>{A.add({severity:"success",summary:"Redeemed",detail:"Voucher applied.",life:2500}),o.reset("voucher_code")}})},S=R(()=>[{label:"Active",value:u.stats.active??0},{label:"Used",value:u.stats.used??0},{label:"Expired",value:u.stats.expired??0},{label:"Total Value Used",value:x((u.stats.total_value??0)*100)}]);return(v,t)=>(r(),h($,{title:"Vouchers"},{default:l(()=>[e("div",F,[t[8]||(t[8]=e("div",{class:"space-y-1"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Vouchers"),e("p",{class:"text-gray-600 dark:text-gray-400"},"Redeem vouchers to credit your accounts.")],-1)),e("div",L,[c(a(y),{class:"lg:col-span-2"},{title:l(()=>[...t[2]||(t[2]=[p("Redeem Voucher",-1)])]),content:l(()=>[e("div",O,[e("div",I,[t[3]||(t[3]=e("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Voucher Code",-1)),c(a(j),{modelValue:a(o).voucher_code,"onUpdate:modelValue":t[0]||(t[0]=s=>a(o).voucher_code=s),placeholder:"ENTER-CODE",class:"w-full mt-1"},null,8,["modelValue"]),a(o).errors.voucher_code?(r(),i("p",M,d(a(o).errors.voucher_code),1)):m("",!0)]),e("div",Y,[t[5]||(t[5]=e("label",{class:"text-sm text-gray-700 dark:text-gray-300"},"Deposit To",-1)),c(a(C),{modelValue:a(o).bank_account_id,"onUpdate:modelValue":t[1]||(t[1]=s=>a(o).bank_account_id=s),options:n.bankAccounts,optionLabel:"account_number",optionValue:"id",class:"w-full mt-1",placeholder:"Select account"},null,8,["modelValue","options"]),a(o).errors.bank_account_id?(r(),i("p",q,d(a(o).errors.bank_account_id),1)):m("",!0),n.bankAccounts.length?m("",!0):(r(),h(a(B),{key:1,severity:"warn",closable:!1,class:"mt-2"},{default:l(()=>[...t[4]||(t[4]=[p("No bank accounts found. Add an account first.",-1)])]),_:1}))]),e("div",z,[c(a(D),{label:"Redeem",icon:"pi pi-ticket",loading:a(o).processing,onClick:N},null,8,["loading"])])])]),_:1}),c(a(y),null,{title:l(()=>[...t[6]||(t[6]=[p("Stats",-1)])]),content:l(()=>[e("div",G,[(r(!0),i(V,null,w(S.value,s=>(r(),i("div",{key:s.label,class:"flex items-center justify-between p-3 border rounded-xl dark:border-gray-700"},[e("span",H,d(s.label),1),e("span",J,d(s.value),1)]))),128))])]),_:1})]),c(a(y),null,{title:l(()=>[...t[7]||(t[7]=[p("Your Vouchers",-1)])]),content:l(()=>[e("div",K,[(r(!0),i(V,null,w(n.vouchers.data,s=>{var f,k;return r(),i("div",{key:s.id,class:"p-4 border rounded-xl dark:border-gray-700 bg-white dark:bg-gray-800 space-y-2"},[e("div",P,[e("h3",Q,d(s.code),1),c(a(T),{value:((f=g[s.status])==null?void 0:f.label)||s.status,severity:((k=g[s.status])==null?void 0:k.severity)||"info"},null,8,["value","severity"])]),e("p",W,"Value: "+d(x(s.amount,s.currency||"USD")),1),e("p",X,"Expires: "+d(s.expires_at||"N/A"),1),e("p",Z,d(s.description||"Voucher credit"),1)])}),128))]),n.vouchers.data.length?m("",!0):(r(),i("p",tt,"No vouchers yet."))]),_:1})])]),_:1}))}};export{vt as default};
