import{f as N,G as T,j as _,e as k,g as c,w as u,a as t,d as a,c as x,b as w,u as l,o as r,F as C,r as S,t as y,i as j}from"./app-V7i8qoCa.js";import{_ as q}from"./DashboardLayout-BlDo3X7Y.js";import{_ as R}from"./DigitalCard-DhT3grtr.js";import{_ as f}from"./StatCard-DaMvikuo.js";import{s as D}from"./index-CwB5UNge.js";import{s as V}from"./index-Dptf3oTj.js";import{a as m}from"./index-Bd_Kms0l.js";import{s as p}from"./index-ChhuWcBq.js";import{s as F}from"./index-CUzaLIAM.js";import{s as L}from"./index-BXXUSFBw.js";/* empty css            */import"./index-DH1UFd3l.js";import"./index-EwD9z38U.js";import"./index-DJmhihAG.js";import"./index-BUtXSJZe.js";import"./index-DYxTnBwG.js";import"./AppLogo-hmFGOWci.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Du4S__si.js";import"./index-COlL0yB9.js";const U={class:"space-y-8"},B={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},I={class:"flex items-center gap-3"},M={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4"},P={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},z={key:0,class:"bg-white border border-dashed border-gray-200 rounded-xl p-8 text-center"},E={class:"space-y-4"},G={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"},O={class:"flex items-center justify-between"},H={class:"font-semibold text-gray-900"},J={class:"space-y-3"},K={class:"flex items-center gap-2 text-sm text-gray-600"},Q={class:"flex flex-wrap gap-2"},W={class:"space-y-4"},X={class:"space-y-2"},Y={class:"space-y-2"},Z={class:"flex justify-between w-full"},ee={class:"font-medium"},te={class:"text-gray-500 text-sm"},se={class:"flex justify-end gap-2 pt-2"},Ce={__name:"Index",props:{cards:{type:Array,default:()=>[]},cardTypes:{type:Array,default:()=>[]},accounts:{type:Array,default:()=>[]},cardStats:{type:Object,default:()=>({total:0,active:0,virtual:0,physical:0})}},setup(d){const g=d,n=_(!1),b=_(null),i=N({card_type_id:null,bank_account_id:null}),h=k(()=>{var o,e;return((o=g.accounts.find(s=>s.is_primary))==null?void 0:o.id)??((e=g.accounts[0])==null?void 0:e.id)??null}),v=k(()=>g.cardTypes.filter(o=>o));T(n,o=>{var e,s;o&&(i.card_type_id=((e=b.value)==null?void 0:e.id)??((s=v.value[0])==null?void 0:s.id)??null,i.bank_account_id=h.value)});const $=o=>!o&&o!==0?"â€”":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),A=()=>{i.post(route("cards.store"),{preserveScroll:!0,onSuccess:()=>{n.value=!1,i.reset(),b.value=null}})};return(o,e)=>(r(),c(q,{title:"My Cards"},{default:u(()=>[t("div",U,[t("div",B,[e[6]||(e[6]=t("div",null,[t("p",{class:"text-2xl font-semibold text-gray-900"},"Cards"),t("p",{class:"text-gray-500"},"Manage your virtual and physical cards.")],-1)),t("div",I,[a(l(p),{value:`${d.cardStats.active} Active`,severity:"success",rounded:""},null,8,["value"]),a(l(m),{icon:"pi pi-plus-circle",label:"Request New Card",onClick:e[0]||(e[0]=s=>n.value=!0)})])]),t("div",M,[a(f,{title:"Total Cards",value:d.cardStats.total,icon:"pi-credit-card",color:"indigo"},null,8,["value"]),a(f,{title:"Active",value:d.cardStats.active,icon:"pi-check-circle",color:"emerald"},null,8,["value"]),a(f,{title:"Virtual",value:d.cardStats.virtual,icon:"pi-desktop",color:"amber"},null,8,["value"]),a(f,{title:"Physical",value:d.cardStats.physical,icon:"pi-id-card",color:"rose"},null,8,["value"])]),t("div",P,[(r(!0),x(C,null,S(d.cards,s=>(r(),c(R,{key:s.uuid,card:s,"show-actions":!1},null,8,["card"]))),128))]),d.cards.length?w("",!0):(r(),x("div",z,[e[7]||(e[7]=t("div",{class:"text-4xl mb-3"},"ðŸ’³",-1)),e[8]||(e[8]=t("p",{class:"text-lg font-semibold text-gray-800"},"No cards yet",-1)),e[9]||(e[9]=t("p",{class:"text-gray-500 mb-4"},"Request a new virtual or physical card to get started.",-1)),a(l(m),{icon:"pi pi-plus",label:"Request Card",onClick:e[1]||(e[1]=s=>n.value=!0)})])),t("div",E,[e[12]||(e[12]=t("div",{class:"flex items-center justify-between"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Available Card Types"),t("p",{class:"text-sm text-gray-500"},"Configured by admin in Filament")],-1)),t("div",G,[(r(!0),x(C,null,S(v.value,s=>(r(),c(l(F),{key:s.id,class:"h-full shadow-sm"},{title:u(()=>[t("div",O,[t("span",H,y(s.name),1),a(l(p),{value:s.code,severity:"info"},null,8,["value"])])]),content:u(()=>[t("div",J,[t("div",K,[e[10]||(e[10]=t("i",{class:"pi pi-wallet text-indigo-500"},null,-1)),t("span",null,"Default limit: "+y($(s.default_limit_display)),1)]),t("div",Q,[s.is_virtual?(r(),c(l(p),{key:0,value:"Virtual",severity:"warning"})):(r(),c(l(p),{key:1,value:"Physical"})),s.is_credit?(r(),c(l(p),{key:2,value:"Credit",severity:"danger"})):(r(),c(l(p),{key:3,value:"Debit",severity:"success"}))]),a(l(m),{label:"Choose",size:"small",class:"mt-2",onClick:()=>{b.value=s,n.value=!0}},null,8,["onClick"])])]),_:2},1024))),128))]),v.value.length?w("",!0):(r(),c(l(L),{key:0,severity:"warn",icon:"pi pi-info-circle",closable:!1},{default:u(()=>[...e[11]||(e[11]=[j(" No active card types are configured by admin yet. ",-1)])]),_:1}))])]),a(l(D),{visible:n.value,"onUpdate:visible":e[5]||(e[5]=s=>n.value=s),modal:"",header:"Request a Card",style:{width:"30rem"},breakpoints:{"960px":"85vw","640px":"95vw"}},{default:u(()=>[t("div",W,[t("div",X,[e[13]||(e[13]=t("label",{class:"text-sm text-gray-700"},"Card Type",-1)),a(l(V),{modelValue:l(i).card_type_id,"onUpdate:modelValue":e[2]||(e[2]=s=>l(i).card_type_id=s),options:v.value,optionLabel:"name",optionValue:"id",placeholder:"Select card type",class:"w-full"},null,8,["modelValue","options"])]),t("div",Y,[e[14]||(e[14]=t("label",{class:"text-sm text-gray-700"},"Linked Account",-1)),a(l(V),{modelValue:l(i).bank_account_id,"onUpdate:modelValue":e[3]||(e[3]=s=>l(i).bank_account_id=s),options:d.accounts,optionLabel:"number",optionValue:"id",placeholder:"Select bank account",class:"w-full"},{option:u(({option:s})=>[t("div",Z,[t("span",ee,y(s.number),1),t("span",te,y(s.currency),1)])]),_:1},8,["modelValue","options"])]),t("div",se,[a(l(m),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[4]||(e[4]=s=>n.value=!1)}),a(l(m),{label:"Submit Request",icon:"pi pi-send",loading:l(i).processing,disabled:!l(i).card_type_id||!l(i).bank_account_id,onClick:A},null,8,["loading","disabled"])])])]),_:1},8,["visible"])]),_:1}))}};export{Ce as default};
