import{s as b,B as T,e as r,A as j,z as y}from"./app-BMfzizai.js";const I={__name:"LiveChatWidget",props:{context:{type:String,default:"dashboard",validator:n=>["public","auth","dashboard"].includes(n)}},setup(n){const d=n,h=y(),o=r(()=>{var t;return((t=h.props.settings)==null?void 0:t.livechat)||{}}),c=r(()=>{const t=o.value;if(!t.enabled||t.provider==="none"||!t.widget_id)return!1;switch(d.context){case"public":return t.show_on_public;case"auth":return t.show_on_auth;case"dashboard":return t.show_on_dashboard;default:return!1}}),m=r(()=>o.value.provider),_=r(()=>o.value.widget_id),v=t=>{var s,a;if(window.Tawk_API){(a=(s=window.Tawk_API).showWidget)==null||a.call(s);return}window.Tawk_API=window.Tawk_API||{},window.Tawk_LoadStart=new Date;const e=document.createElement("script");e.async=!0,e.src=`https://embed.tawk.to/${t}`,e.charset="UTF-8",e.setAttribute("crossorigin","*"),e.id="tawkto-script",document.head.appendChild(e)},f=t=>{if(window.smartsupp)return;window._smartsupp=window._smartsupp||{},window._smartsupp.key=t;const e=document.createElement("script");e.async=!0,e.src="https://www.smartsuppchat.com/loader.js?",e.id="smartsupp-script",(function(s,a,w,k){var i,l=s.getElementsByTagName(a)[0];s.getElementById(w)||(i=s.createElement(a),i.id=w,i.src=k,l.parentNode.insertBefore(i,l))})(document,"script","smartsupp-script","https://www.smartsuppchat.com/loader.js?")},g=t=>{if(window.jivo_api)return;const e=document.createElement("script");e.async=!0,e.src=`//code.jivosite.com/widget/${t}`,e.id="jivochat-script",document.head.appendChild(e)},p=()=>{if(!c.value)return;const t=_.value;if(t)switch(m.value){case"tawkto":v(t);break;case"smartsupp":f(t);break;case"jivochat":g(t);break}},u=()=>{var t,e;if((t=window.Tawk_API)!=null&&t.hideWidget&&window.Tawk_API.hideWidget(),window.smartsupp)try{window.smartsupp("chat:hide")}catch{}(e=window.jivo_api)!=null&&e.close&&window.jivo_api.close()};return b(()=>{p()}),T(()=>{c.value||u()}),j(()=>[o.value,d.context],()=>{c.value?p():u()},{deep:!0}),(t,e)=>null}};export{I as _};
