import{k as $,y as A,j as b,c as o,d as m,a as e,e as _,u as g,p as T,n as W,h as O,t as i,i as Y,z as G,F as u,r as w,w as H,b as C,o as l,A as J,q as I}from"./app-Co5GqKGl.js";import{a as K}from"./index-D1Eu-Yf2.js";import{s as Q}from"./index-CxnF9LSD.js";import{s as R}from"./index-fMvW-L00.js";import{_ as X}from"./CopyrightText-DW9xZn5J.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-Dj631_yV.js";const ee={class:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-950 flex flex-col transition-colors duration-300"},te={class:"w-full py-4 px-6"},se={class:"max-w-md mx-auto flex justify-between items-center"},ae=["title"],le={class:"flex-1 flex items-center justify-center px-4 pb-8"},oe={class:"w-full max-w-md"},re={class:"text-center mb-8"},ie={class:"mb-6 relative inline-block"},ne={class:"w-24 h-24 rounded-full bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-2xl shadow-primary-500/30 ring-4 ring-primary-500/20"},de={key:1,class:"text-3xl font-bold text-white"},ce={class:"text-2xl font-bold text-white mb-1"},ue={class:"text-gray-400 text-sm"},me={class:"text-gray-500 text-xs mt-2"},ge={class:"bg-gray-800/50 backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-700/50 p-8 transition-colors duration-300"},pe={class:"bg-gray-900/50 rounded-xl p-6 border border-gray-700"},be={class:"text-center"},xe={class:"text-4xl font-mono tracking-[0.5em] text-white min-h-[3rem] flex items-center justify-center select-none"},ve={class:"text-xs text-gray-500 mt-3"},he={class:"grid grid-cols-3 gap-3"},ye=["onClick","disabled"],fe={class:"text-2xl font-semibold text-white"},ke=["disabled"],_e=["disabled"],we={key:0,class:"pi pi-unlock mr-2"},Ce={class:"mt-8 text-center"},x=6,Ie={__name:"Lockscreen",props:{user:Object,lockedAt:String},setup(n){const N=J(),p=$(),S=_(()=>{var a,t;return((t=(a=N.props.settings)==null?void 0:a.general)==null?void 0:t.site_name)||"Finora Bank"}),d=b(!1);A(()=>{const a=localStorage.getItem("theme");(a==="dark"||!a&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(d.value=!0,document.documentElement.classList.add("dark"))});const j=()=>{d.value=!d.value,d.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},s=b(""),r=b(!1),L=_(()=>"•".repeat(s.value.length).padEnd(x,"·")),P=a=>a?a.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):"?",E=a=>{s.value.length<x&&(s.value+=a)},B=()=>{s.value=""},D=()=>{s.value.length>0&&(s.value=s.value.slice(0,-1))},F=()=>{if(s.value.length<4){p.add({severity:"warn",summary:"Invalid PIN",detail:"PIN must be at least 4 digits.",life:3e3});return}r.value=!0,I.post(route("lockscreen.unlock"),{pin:s.value},{onSuccess:()=>{p.add({severity:"success",summary:"Unlocked",detail:"Welcome back!",life:2e3})},onError:a=>{p.add({severity:"error",summary:"Unlock Failed",detail:a.pin||"Invalid PIN code. Please try again.",life:4e3}),s.value=""},onFinish:()=>{r.value=!1}})},M=()=>{I.post(route("lockscreen.logout"))},U=[["1","2","3"],["4","5","6"],["7","8","9"],["clear","0","backspace"]];return(a,t)=>{var v,h,y,f,k;return l(),o(u,null,[m(g(T),{title:"Locked - "+S.value},null,8,["title"]),m(g(Q)),e("div",ee,[e("div",te,[e("div",se,[t[0]||(t[0]=e("div",{class:"text-gray-400 text-sm flex items-center gap-2"},[e("i",{class:"pi pi-lock"}),e("span",null,"Session Locked")],-1)),e("button",{onClick:j,class:"p-2.5 rounded-xl bg-gray-800/80 backdrop-blur-sm border border-gray-700 text-gray-300 hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:d.value?"Switch to light mode":"Switch to dark mode"},[e("i",{class:W([d.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,ae)])]),e("div",le,[e("div",oe,[e("div",re,[e("div",ie,[e("div",ne,[(v=n.user)!=null&&v.avatar_url?(l(),O(g(R),{key:0,image:n.user.avatar_url,shape:"circle",size:"xlarge",class:"w-20 h-20"},null,8,["image"])):(l(),o("span",de,i(P((h=n.user)==null?void 0:h.name)),1))]),t[1]||(t[1]=e("div",{class:"absolute -bottom-2 -right-2 w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center border-4 border-gray-900"},[e("i",{class:"pi pi-lock text-amber-400 text-lg"})],-1))]),e("h1",ce," Welcome back, "+i((f=(y=n.user)==null?void 0:y.name)==null?void 0:f.split(" ")[0]),1),e("p",ue,i((k=n.user)==null?void 0:k.email),1),e("p",me,[t[2]||(t[2]=e("i",{class:"pi pi-clock mr-1"},null,-1)),Y(" Locked "+i(n.lockedAt),1)])]),e("div",ge,[t[7]||(t[7]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-lg font-semibold text-white mb-1"}," Enter PIN to Unlock "),e("p",{class:"text-gray-400 text-sm"}," Your session was locked due to inactivity ")],-1)),e("form",{onSubmit:G(F,["prevent"]),class:"space-y-6"},[e("div",pe,[e("div",be,[e("div",xe,i(L.value),1),e("div",ve,i(s.value.length)+" / "+i(x)+" digits ",1)])]),e("div",he,[(l(),o(u,null,w(U,(q,z)=>(l(),o(u,{key:z},[(l(!0),o(u,null,w(q,(c,V)=>(l(),o(u,{key:V},[isNaN(c)?c==="clear"?(l(),o("button",{key:1,type:"button",onClick:B,disabled:r.value||s.value.length===0,class:"aspect-square rounded-xl bg-red-900/30 hover:bg-red-900/50 active:scale-95 transition-all border border-red-800 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"},[...t[3]||(t[3]=[e("span",{class:"text-sm font-medium text-red-400"},"Clear",-1)])],8,ke)):c==="backspace"?(l(),o("button",{key:2,type:"button",onClick:D,disabled:r.value||s.value.length===0,class:"aspect-square rounded-xl bg-gray-700 hover:bg-gray-600 active:scale-95 transition-all border border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-sm"},[...t[4]||(t[4]=[e("i",{class:"pi pi-arrow-left text-xl text-gray-200"},null,-1)])],8,_e)):C("",!0):(l(),o("button",{key:0,type:"button",onClick:Ne=>E(c),disabled:r.value,class:"aspect-square rounded-xl bg-gray-700 hover:bg-gray-600 active:scale-95 transition-all border border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"},[e("span",fe,i(c),1)],8,ye))],64))),128))],64))),64))]),m(g(K),{type:"submit",loading:r.value,disabled:r.value||s.value.length<4,class:"w-full justify-center",size:"large"},{default:H(()=>[r.value?C("",!0):(l(),o("i",we)),t[5]||(t[5]=e("span",null,"Unlock",-1))]),_:1},8,["loading","disabled"]),e("div",{class:"text-center"},[e("button",{type:"button",onClick:M,class:"text-gray-400 hover:text-white text-sm transition-colors inline-flex items-center gap-2"},[...t[6]||(t[6]=[e("i",{class:"pi pi-sign-out"},null,-1),e("span",null,"Sign in with a different account",-1)])])])],32)]),e("div",Ce,[m(X,{textClass:"text-sm text-gray-500"})])])])])],64)}}},Me=Z(Ie,[["__scopeId","data-v-78313727"]]);export{Me as default};
