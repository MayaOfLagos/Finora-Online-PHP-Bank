import{a as V}from"./index-CWTuD0JT.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{j as y,G as F,e as I,y as N,ao as m,E as T,c as d,a as l,b,t as x,F as K,r as L,n as M,g as O,u as $,o as c}from"./app-hixBo1YZ.js";const P={class:"otp-input-wrapper"},z={class:"text-center mb-6"},G={class:"text-sm text-gray-600 mt-1"},U={class:"flex gap-2 sm:gap-3 justify-center"},W=["value","disabled","onInput","onKeydown"],Y={key:0,class:"mt-3 text-sm text-red-600 text-center"},q={key:1,class:"mt-4 flex items-center justify-center gap-2 text-gray-600"},H={class:"mt-6 text-center"},J={key:0,class:"text-sm text-gray-600"},Q={class:"font-semibold text-indigo-600"},X={class:"mt-3"},Z={key:1,class:"text-xs text-gray-500"},ee={__name:"OtpInput",props:{length:{type:Number,default:6},countdown:{type:Number,default:300},disabled:{type:Boolean,default:!1},error:{type:String,default:""},autoFocus:{type:Boolean,default:!0},autoSubmit:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["complete","update:modelValue","resend","expired"],setup(n,{expose:D,emit:B}){const o=n,p=B,u=y([]),i=y(Array(o.length).fill("")),f=y(o.countdown),g=y(!1);let v=null;const _=I(()=>i.value.join("")),R=I(()=>{const e=Math.floor(f.value/60),t=f.value%60;return`${e}:${t.toString().padStart(2,"0")}`});F(_,e=>{p("update:modelValue",e),e.length===o.length&&o.autoSubmit&&p("complete",e)});const A=(e,t)=>{const r=t.target.value;r.length>1?i.value[e]=r.slice(-1):i.value[e]=r,r&&e<o.length-1&&m(()=>{var a;(a=u.value[e+1])==null||a.focus()})},S=(e,t)=>{var r,a;t.key==="Backspace"&&(!i.value[e]&&e>0&&m(()=>{var s;(s=u.value[e-1])==null||s.focus()}),i.value[e]=""),t.key==="ArrowLeft"&&e>0&&((r=u.value[e-1])==null||r.focus()),t.key==="ArrowRight"&&e<o.length-1&&((a=u.value[e+1])==null||a.focus()),!/^\d$/.test(t.key)&&!["Backspace","Delete","Tab","ArrowLeft","ArrowRight"].includes(t.key)&&t.preventDefault()},j=e=>{e.preventDefault();const r=e.clipboardData.getData("text").slice(0,o.length).replace(/\D/g,"").split("");r.forEach((s,w)=>{w<o.length&&(i.value[w]=s)});const a=Math.min(r.length,o.length)-1;m(()=>{var s;(s=u.value[a])==null||s.focus()})},h=()=>{g.value=!1,f.value=o.countdown,v=setInterval(()=>{f.value--,f.value<=0&&(clearInterval(v),g.value=!0,p("expired"))},1e3)},C=()=>{g.value&&(k(),h(),p("resend"))},k=()=>{i.value=Array(o.length).fill(""),m(()=>{var e;(e=u.value[0])==null||e.focus()})};return N(()=>{h(),o.autoFocus&&m(()=>{var e;(e=u.value[0])==null||e.focus()})}),T(()=>{v&&clearInterval(v)}),D({clear:k,startTimer:h}),(e,t)=>(c(),d("div",P,[l("div",z,[t[0]||(t[0]=l("div",{class:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4"},[l("i",{class:"pi pi-envelope text-2xl text-indigo-600"})],-1)),t[1]||(t[1]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Verify Your Identity",-1)),l("p",G," Enter the "+x(n.length)+"-digit code sent to your email ",1)]),l("div",U,[(c(!0),d(K,null,L(n.length,(r,a)=>(c(),d("input",{key:a,ref_for:!0,ref:s=>u.value[a]=s,type:"text",inputmode:"numeric",maxlength:"1",value:i.value[a],disabled:n.disabled||n.loading,class:M(["w-11 h-14 sm:w-12 sm:h-16 text-center text-xl sm:text-2xl font-bold rounded-xl border-2 transition-all","focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.error?"border-red-300 bg-red-50 animate-shake":"border-gray-200 bg-white",n.disabled||n.loading?"opacity-50 cursor-not-allowed bg-gray-100":"hover:border-gray-300",i.value[a]?"border-indigo-300 bg-indigo-50":""]),onInput:s=>A(a,s),onKeydown:s=>S(a,s),onPaste:j},null,42,W))),128))]),n.error?(c(),d("p",Y,x(n.error),1)):b("",!0),n.loading?(c(),d("div",q,[...t[2]||(t[2]=[l("i",{class:"pi pi-spinner pi-spin"},null,-1),l("span",{class:"text-sm"},"Verifying...",-1)])])):b("",!0),l("div",H,[g.value?b("",!0):(c(),d("div",J,[t[3]||(t[3]=l("span",null,"Code expires in ",-1)),l("span",Q,x(R.value),1)])),l("div",X,[g.value?(c(),O($(V),{key:0,label:"Resend Code",icon:"pi pi-refresh",text:"",class:"text-indigo-600",onClick:C})):(c(),d("p",Z," Didn't receive the code? Wait for the timer to resend "))])])]))}},oe=E(ee,[["__scopeId","data-v-db0ad97e"]]);export{oe as O};
