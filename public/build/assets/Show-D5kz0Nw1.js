import{k as st,l as at,m as nt,c as j,d as i,u as s,p as rt,w as u,a as t,s as ot,i as it,n as w,e as P,h as W,b as A,t as l,o as _,j as x,g as lt,F as ct,q as V}from"./app-NYJQ16ZM.js";import{s as N,a as v}from"./index-JtQQzfX7.js";import{s as dt,a as S}from"./index-DlI1oEpI.js";import{s as H}from"./index-Czw3LfWM.js";import{s as ut}from"./index-DoWDdBgJ.js";import{s as J}from"./index-DZhM4bHz.js";import{s as mt}from"./index-CeJCNYwZ.js";import{s as gt}from"./index-BcjpLrDv.js";import{s as yt,D as pt}from"./DashboardLayout-yItA0kgO.js";import{_ as ft}from"./PinInput-DKVi15D7.js";import{u as xt}from"./useCurrency-0zMdEeak.js";import{_ as vt}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-DBKJLPTK.js";import"./index-ByZGLuQ1.js";import"./index-z0fS19z9.js";import"./index-CUV_yM3I.js";import"./index-Bb-lJvu1.js";import"./index-D3dyixap.js";import"./index-JG6u14xs.js";import"./index-CaClOlaQ.js";import"./index-DDoX9g0T.js";import"./index-B9lcndfv.js";import"./index-CIBA5qcn.js";import"./index-DMAT9-9U.js";import"./index-D1SEWPdv.js";import"./index-Ba_rauDu.js";import"./AppLogo-D4YXTwGJ.js";import"./index-B1dAsWOc.js";function bt(){const a=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",y=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",p=n=>n?new Date(n).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):"",f=n=>{if(!n)return"";const c=new Date,m=new Date(n),d=Math.floor((c-m)/1e3),z={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};for(const[g,b]of Object.entries(z)){const k=Math.floor(d/b);if(k>=1)return k===1?`${k} ${g} ago`:`${k} ${g}s ago`}return"Just now"},C=n=>n?new Date(n).toISOString().split("T")[0]:"",D=n=>{if(!n)return!1;const c=new Date(n),m=new Date;return c.toDateString()===m.toDateString()},T=n=>{if(!n)return!1;const c=new Date(n),m=new Date;return m.setDate(m.getDate()-1),c.toDateString()===m.toDateString()};return{formatDate:a,formatDateTime:y,formatTime:p,timeAgo:f,formatISODate:C,isToday:D,isYesterday:T,smartDate:n=>n?D(n)?"Today":T(n)?"Yesterday":a(n):""}}const wt={class:"mb-6"},ht={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},kt={class:"flex items-center gap-4"},_t={class:"flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-600"},Dt={class:"flex items-center gap-2"},Tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},zt={class:"text-sm text-gray-500 dark:text-gray-400"},At={class:"flex gap-2"},St={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2 lg:grid-cols-4"},Ct={class:"p-5 rounded-xl bg-gradient-to-br from-indigo-500 to-indigo-600 shadow-lg"},$t={class:"text-white"},It={class:"text-3xl font-bold"},jt={class:"mt-2 text-xs opacity-70"},Pt={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},Vt={class:"flex items-center gap-3"},Nt={class:"text-xl font-bold text-green-600 dark:text-green-400"},Ut={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},Ft={class:"flex items-center gap-3"},Bt={class:"text-xl font-bold text-red-600 dark:text-red-400"},Ot={class:"p-5 bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm"},Mt={class:"flex items-center gap-3"},Lt={class:"text-xl font-bold text-gray-900 dark:text-white"},Rt={class:"bg-white border border-gray-200 rounded-xl dark:bg-gray-800 dark:border-gray-700 shadow-sm overflow-hidden"},Et={class:"flex flex-col gap-4 mb-4 sm:flex-row sm:items-center sm:justify-between"},Yt={class:"flex flex-wrap gap-2"},qt={class:"font-medium"},Wt={class:"text-xs text-gray-500"},Ht={class:"flex items-center gap-3"},Jt={class:"font-medium text-gray-900 dark:text-white"},Gt={class:"text-xs text-gray-500"},Kt={class:"text-gray-600 dark:text-gray-400"},Qt={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},Xt={class:"space-y-4"},Zt={class:"space-y-3"},te={class:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ee={class:"font-mono font-medium text-gray-900 dark:text-white"},se={key:0,class:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ae={class:"font-mono font-medium text-gray-900 dark:text-white"},ne={key:1,class:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},re={class:"font-mono font-medium text-gray-900 dark:text-white"},oe={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ie={class:"font-medium text-gray-900 dark:text-white"},le={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ce={class:"font-medium text-gray-900 dark:text-white"},de={class:"space-y-4"},ue={class:"space-y-3"},me={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ge={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ye={class:"font-medium text-gray-900 dark:text-white"},pe={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},fe={class:"font-medium text-gray-900 dark:text-white"},xe={class:"p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},ve={class:"font-medium text-gray-900 dark:text-white"},be={class:"space-y-4"},we={class:"text-sm text-gray-600 dark:text-gray-400"},he={key:0,class:"space-y-4"},ke={class:"flex items-center justify-center"},_e={class:"text-center"},De={class:"mt-1 text-gray-500"},Te={class:"pt-4 space-y-3 border-t border-gray-200 dark:border-gray-700"},ze={class:"flex justify-between"},Ae={class:"font-mono text-gray-900 dark:text-white"},Se={class:"flex justify-between"},Ce={class:"text-gray-900 dark:text-white"},$e={class:"flex justify-between"},Ie={class:"flex justify-between"},je={class:"text-gray-900 dark:text-white"},Pe={__name:"Show",props:{account:{type:Object,required:!0},transactions:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({totalIn:0,totalOut:0,transactionCount:0})}},setup(a){const y=a,p=st();at();const{formatCurrency:f}=xt(),{formatDate:C,formatDateTime:D,timeAgo:T}=bt(),h=x(!1),n=x(null),c=x(""),m=x(!1),d=x(null),z=x(!1),g=x(null),b=x(null),k=[{label:"All Types",value:null},{label:"Credits",value:"credit"},{label:"Debits",value:"debit"}],G={savings:"pi-dollar",checking:"pi-wallet",business:"pi-building",fixed_deposit:"pi-lock"},B={active:"success",frozen:"info",pending:"warning",inactive:"danger"},K=P(()=>{var e;const o=((e=y.account.account_type)==null?void 0:e.slug)||"savings";return G[o]||"pi-wallet"}),O=P(()=>y.account.status==="frozen"),Q=P(()=>{let o=y.transactions;if(b.value&&(o=o.filter(e=>e.type===b.value)),g.value&&g.value[0]&&g.value[1]){const e=new Date(g.value[0]),$=new Date(g.value[1]);$.setHours(23,59,59,999),o=o.filter(I=>{const r=new Date(I.created_at);return r>=e&&r<=$})}return o}),M=x(),X=P(()=>{const o=[{label:"Transfer Money",icon:"pi pi-send",command:()=>L()},{label:"Download Statement",icon:"pi pi-download",command:()=>Z()},{separator:!0}];return O.value?o.push({label:"Unfreeze Account",icon:"pi pi-lock-open",command:()=>R("unfreeze")}):o.push({label:"Freeze Account",icon:"pi pi-lock",class:"text-orange-600",command:()=>R("freeze")}),y.account.is_primary||o.push({label:"Set as Primary",icon:"pi pi-star",command:()=>tt()}),o}),L=()=>{V.visit(route("transfers.internal"),{data:{from_account_id:y.account.uuid}})},Z=()=>{V.get(route("accounts.statement",{account:y.account.uuid}),{},{preserveScroll:!0,onSuccess:o=>{var e;(e=o.props.flash)!=null&&e.success&&p.add({severity:"success",summary:"Statement Sent",detail:o.props.flash.success,life:5e3})},onError:o=>{p.add({severity:"error",summary:"Statement Error",detail:o.statement||"Unable to generate statement. Please try again.",life:5e3})}})},tt=()=>{V.patch(route("accounts.set-primary",{account:y.account.uuid}),{},{onSuccess:()=>{p.add({severity:"success",summary:"Primary Account Set",detail:"This account is now your primary account",life:3e3})}})},R=o=>{n.value=o,c.value="",h.value=!0},E=()=>{if(c.value.length!==6){p.add({severity:"error",summary:"Invalid PIN",detail:"Please enter your 6-digit transaction PIN",life:3e3});return}m.value=!0;const o=n.value==="freeze"?route("accounts.freeze",{account:y.account.uuid}):route("accounts.unfreeze",{account:y.account.uuid});V.patch(o,{pin:c.value},{onSuccess:()=>{h.value=!1,p.add({severity:"success",summary:n.value==="freeze"?"Account Frozen":"Account Unfrozen",detail:`Account has been ${n.value==="freeze"?"frozen":"unfrozen"} successfully`,life:3e3})},onError:()=>{p.add({severity:"error",summary:"Action Failed",detail:"Invalid PIN or action could not be completed",life:3e3})},onFinish:()=>{m.value=!1}})},et=o=>{d.value=o,z.value=!0},Y=o=>o==="credit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",q=o=>o==="credit"?"+":"-",U=(o,e)=>{navigator.clipboard.writeText(o),p.add({severity:"success",summary:"Copied",detail:`${e} copied to clipboard`,life:2e3})};return(o,e)=>{const $=nt("tooltip");return _(),j(ct,null,[i(s(rt),{title:`Account - ${a.account.account_number}`},null,8,["title"]),i(pt,{title:"Account Details"},{default:u(()=>{var I;return[t("div",wt,[i(s(ot),{href:"/accounts",class:"inline-flex items-center gap-2 mb-4 text-sm text-gray-500 transition-colors hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"},{default:u(()=>[...e[11]||(e[11]=[t("i",{class:"pi pi-arrow-left"},null,-1),it(" Back to Accounts ",-1)])]),_:1}),t("div",ht,[t("div",kt,[t("div",_t,[t("i",{class:w(["pi",K.value,"text-white text-2xl"])},null,2)]),t("div",null,[t("div",Dt,[t("h1",Tt,l(((I=a.account.account_type)==null?void 0:I.name)||"Account"),1),i(s(N),{value:a.account.status,severity:B[a.account.status]||"secondary",class:"uppercase"},null,8,["value","severity"]),a.account.is_primary?(_(),W(s(N),{key:0,value:"Primary",severity:"warning"})):A("",!0)]),t("p",zt,l(a.account.account_name||a.account.account_number),1)])]),t("div",At,[i(s(v),{label:"Transfer",icon:"pi pi-send",disabled:O.value,onClick:L},null,8,["disabled"]),i(s(v),{icon:"pi pi-ellipsis-v",outlined:"",onClick:e[0]||(e[0]=r=>M.value.toggle(r))}),i(s(yt),{ref_key:"actionMenuRef",ref:M,model:X.value,popup:""},null,8,["model"])])])]),t("div",St,[t("div",Ct,[t("div",$t,[e[12]||(e[12]=t("div",{class:"flex items-center gap-2 mb-2"},[t("i",{class:"pi pi-wallet text-lg opacity-80"}),t("p",{class:"text-sm font-medium opacity-90"},"Available Balance")],-1)),t("p",It,l(s(f)(a.account.balance,a.account.currency)),1),t("p",jt," Last updated "+l(s(T)(a.account.updated_at)),1)])]),t("div",Pt,[t("div",Vt,[e[14]||(e[14]=t("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30"},[t("i",{class:"pi pi-arrow-down-left text-xl text-green-600 dark:text-green-400"})],-1)),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Credits",-1)),t("p",Nt," +"+l(s(f)(a.stats.totalIn,a.account.currency)),1)])])]),t("div",Ut,[t("div",Ft,[e[16]||(e[16]=t("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30"},[t("i",{class:"pi pi-arrow-up-right text-xl text-red-600 dark:text-red-400"})],-1)),t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Debits",-1)),t("p",Bt," -"+l(s(f)(a.stats.totalOut,a.account.currency)),1)])])]),t("div",Ot,[t("div",Mt,[e[18]||(e[18]=t("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30"},[t("i",{class:"pi pi-list text-xl text-blue-600 dark:text-blue-400"})],-1)),t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Transactions",-1)),t("p",Lt,l(a.stats.transactionCount),1)])])])]),t("div",Rt,[i(s(ut),{class:"account-tabs"},{default:u(()=>[i(s(J),{header:"Transactions"},{default:u(()=>[t("div",Et,[t("div",Yt,[i(s(mt),{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=r=>b.value=r),options:k,optionLabel:"label",optionValue:"value",placeholder:"All Types",class:"w-36"},null,8,["modelValue"]),i(s(gt),{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=r=>g.value=r),selectionMode:"range",placeholder:"Date Range",dateFormat:"dd/mm/yy",showIcon:"",showButtonBar:!0},null,8,["modelValue"])]),g.value||b.value?(_(),W(s(v),{key:0,label:"Clear Filters",icon:"pi pi-times",text:"",size:"small",onClick:e[3]||(e[3]=r=>{g.value=null,b.value=null})})):A("",!0)]),i(s(dt),{value:Q.value,paginator:!0,rows:10,rowsPerPageOptions:[10,25,50],stripedRows:"",responsiveLayout:"scroll",class:"p-datatable-sm",emptyMessage:"No transactions found"},{default:u(()=>[i(s(S),{field:"created_at",header:"Date",sortable:"",style:{width:"150px"}},{body:u(({data:r})=>[t("div",null,[t("p",qt,l(s(C)(r.created_at)),1),t("p",Wt,l(s(D)(r.created_at).split(" ").slice(-2).join(" ")),1)])]),_:1}),i(s(S),{field:"description",header:"Description"},{body:u(({data:r})=>[t("div",Ht,[t("div",{class:w(["w-10 h-10 rounded-full flex items-center justify-center",r.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[t("i",{class:w(["pi text-sm",r.type==="credit"?"pi-arrow-down-left text-green-600":"pi-arrow-up-right text-red-600"])},null,2)],2),t("div",null,[t("p",Jt,l(r.description),1),t("p",Gt,l(r.reference),1)])])]),_:1}),i(s(S),{field:"amount",header:"Amount",sortable:"",style:{width:"150px"}},{body:u(({data:r})=>[t("span",{class:w(["font-semibold",Y(r.type)])},l(q(r.type))+l(s(f)(r.amount,a.account.currency)),3)]),_:1}),i(s(S),{field:"balance_after",header:"Balance",style:{width:"150px"}},{body:u(({data:r})=>[t("span",Kt,l(s(f)(r.balance_after,a.account.currency)),1)]),_:1}),i(s(S),{header:"Actions",style:{width:"80px"}},{body:u(({data:r})=>[lt(i(s(v),{icon:"pi pi-eye",text:"",rounded:"",size:"small",onClick:F=>et(r)},null,8,["onClick"]),[[$,"View Details",void 0,{top:!0}]])]),_:1})]),_:1},8,["value"])]),_:1}),i(s(J),{header:"Account Details"},{default:u(()=>{var r;return[t("div",Qt,[t("div",Xt,[e[24]||(e[24]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Account Information",-1)),t("div",Zt,[t("div",te,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Account Number",-1)),t("p",ee,l(a.account.account_number),1)]),i(s(v),{icon:"pi pi-copy",text:"",rounded:"",size:"small",onClick:e[4]||(e[4]=F=>U(a.account.account_number,"Account number"))})]),a.account.routing_number?(_(),j("div",se,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Routing Number",-1)),t("p",ae,l(a.account.routing_number),1)]),i(s(v),{icon:"pi pi-copy",text:"",rounded:"",size:"small",onClick:e[5]||(e[5]=F=>U(a.account.routing_number,"Routing number"))})])):A("",!0),a.account.swift_code?(_(),j("div",ne,[t("div",null,[e[21]||(e[21]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"SWIFT/BIC Code",-1)),t("p",re,l(a.account.swift_code),1)]),i(s(v),{icon:"pi pi-copy",text:"",rounded:"",size:"small",onClick:e[6]||(e[6]=F=>U(a.account.swift_code,"SWIFT code"))})])):A("",!0),t("div",oe,[e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Account Type",-1)),t("p",ie,l((r=a.account.account_type)==null?void 0:r.name),1)]),t("div",le,[e[23]||(e[23]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Currency",-1)),t("p",ce,l(a.account.currency),1)])])]),t("div",de,[e[29]||(e[29]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Account Status",-1)),t("div",ue,[t("div",me,[e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Status",-1)),i(s(N),{value:a.account.status,severity:B[a.account.status]||"secondary",class:"mt-1 uppercase"},null,8,["value","severity"])]),t("div",ge,[e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Primary Account",-1)),t("p",ye,l(a.account.is_primary?"Yes":"No"),1)]),t("div",pe,[e[27]||(e[27]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Opened On",-1)),t("p",fe,l(s(C)(a.account.created_at)),1)]),t("div",xe,[e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Last Activity",-1)),t("p",ve,l(s(T)(a.account.updated_at)),1)])])])])]}),_:1})]),_:1})]),i(s(H),{visible:h.value,"onUpdate:visible":e[9]||(e[9]=r=>h.value=r),modal:"",header:n.value==="freeze"?"Freeze Account":"Unfreeze Account",style:{width:"400px"}},{footer:u(()=>[i(s(v),{label:"Cancel",text:"",onClick:e[8]||(e[8]=r=>h.value=!1),disabled:m.value},null,8,["disabled"]),i(s(v),{label:n.value==="freeze"?"Freeze Account":"Unfreeze Account",icon:n.value==="freeze"?"pi pi-lock":"pi pi-lock-open",severity:n.value==="freeze"?"warning":"success",loading:m.value,onClick:E},null,8,["label","icon","severity","loading"])]),default:u(()=>[t("div",be,[t("p",we,l(n.value==="freeze"?"Enter your transaction PIN to freeze this account. You will not be able to make any transactions until unfrozen.":"Enter your transaction PIN to unfreeze this account and resume normal operations."),1),t("div",null,[e[30]||(e[30]=t("label",{class:"block mb-2 text-sm font-medium text-gray-700 dark:text-gray-300"}," Transaction PIN ",-1)),i(ft,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=r=>c.value=r),length:6,masked:"",onComplete:E},null,8,["modelValue"])])])]),_:1},8,["visible","header"]),i(s(H),{visible:z.value,"onUpdate:visible":e[10]||(e[10]=r=>z.value=r),modal:"",header:"Transaction Details",style:{width:"500px"}},{default:u(()=>[d.value?(_(),j("div",he,[t("div",ke,[t("div",{class:w(["w-16 h-16 rounded-full flex items-center justify-center",d.value.type==="credit"?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"])},[t("i",{class:w(["pi text-2xl",d.value.type==="credit"?"pi-arrow-down-left text-green-600":"pi-arrow-up-right text-red-600"])},null,2)],2)]),t("div",_e,[t("p",{class:w(["text-3xl font-bold",Y(d.value.type)])},l(q(d.value.type))+l(s(f)(d.value.amount,a.account.currency)),3),t("p",De,l(d.value.description),1)]),t("div",Te,[t("div",ze,[e[31]||(e[31]=t("span",{class:"text-gray-500"},"Reference",-1)),t("span",Ae,l(d.value.reference),1)]),t("div",Se,[e[32]||(e[32]=t("span",{class:"text-gray-500"},"Date",-1)),t("span",Ce,l(s(D)(d.value.created_at)),1)]),t("div",$e,[e[33]||(e[33]=t("span",{class:"text-gray-500"},"Type",-1)),i(s(N),{value:d.value.type,severity:d.value.type==="credit"?"success":"danger",class:"uppercase"},null,8,["value","severity"])]),t("div",Ie,[e[34]||(e[34]=t("span",{class:"text-gray-500"},"Balance After",-1)),t("span",je,l(s(f)(d.value.balance_after,a.account.currency)),1)])])])):A("",!0)]),_:1},8,["visible"])]}),_:1})],64)}}},cs=vt(Pe,[["__scopeId","data-v-b88cf408"]]);export{cs as default};
