import{L as U,Y,M as W,c as m,o as d,F as O,r as j,N as q,d as l,n as A,O as G,s as H,j as g,B as J,p as N,w as C,g as Q,a as n,u as c,b as I,e as E,t as S,y as X,h as Z,i as D,v as ee,T as te,z as ne}from"./app-BMfzizai.js";import{u as se}from"./useToast-noJpqXV7.js";import{s as ae,a as re}from"./index-CZrRTf5t.js";import{a as M}from"./index-k4CPwSDg.js";import{s as v}from"./index-1ZoxxvrE.js";import{_ as oe}from"./SeoHead-DUDZDtq3.js";import{_ as ie}from"./CopyrightText-s5DsqPAG.js";import{P as le}from"./PagePreloader-BBrDCs7v.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-BEe5Dxhj.js";var de=`
    .p-inputotp {
        display: flex;
        align-items: center;
        gap: dt('inputotp.gap');
    }

    .p-inputotp-input {
        text-align: center;
        width: dt('inputotp.input.width');
    }

    .p-inputotp-input.p-inputtext-sm {
        text-align: center;
        width: dt('inputotp.input.sm.width');
    }

    .p-inputotp-input.p-inputtext-lg {
        text-align: center;
        width: dt('inputotp.input.lg.width');
    }
`,pe={root:"p-inputotp p-component",pcInputText:"p-inputotp-input"},ce=U.extend({name:"inputotp",style:de,classes:pe}),me={name:"BaseInputOtp",extends:re,props:{readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},length:{type:Number,default:4},mask:{type:Boolean,default:!1},integerOnly:{type:Boolean,default:!1}},style:ce,provide:function(){return{$pcInputOtp:this,$parentInstance:this}}},L={name:"InputOtp",extends:me,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{tokens:[]}},watch:{modelValue:{immediate:!0,handler:function(e){this.tokens=e?e.split(""):new Array(this.length)}}},methods:{getTemplateAttrs:function(e){return{value:this.tokens[e]}},getTemplateEvents:function(e){var t=this;return{input:function(r){return t.onInput(r,e)},keydown:function(r){return t.onKeyDown(r)},focus:function(r){return t.onFocus(r)},blur:function(r){return t.onBlur(r)},paste:function(r){return t.onPaste(r)}}},onInput:function(e,t){this.tokens[t]=e.target.value,this.updateModel(e),e.inputType==="deleteContentBackward"?this.moveToPrev(e):(e.inputType==="insertText"||e.inputType==="deleteContentForward"||Y()&&e instanceof CustomEvent)&&this.moveToNext(e)},updateModel:function(e){var t=this.tokens.join("");this.writeValue(t,e),this.$emit("change",{originalEvent:e,value:t})},moveToPrev:function(e){var t=this.findPrevInput(e.target);t&&(t.focus(),t.select())},moveToNext:function(e){var t=this.findNextInput(e.target);t&&(t.focus(),t.select())},findNextInput:function(e){var t=e.nextElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findNextInput(t)},findPrevInput:function(e){var t=e.previousElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findPrevInput(t)},onFocus:function(e){e.target.select(),this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)},onClick:function(e){setTimeout(function(){return e.target.select()},1)},onKeyDown:function(e){if(!(e.ctrlKey||e.metaKey))switch(e.key){case"ArrowLeft":this.moveToPrev(e),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Backspace":e.target.value.length===0&&(this.moveToPrev(e),e.preventDefault());break;case"ArrowRight":this.moveToNext(e),e.preventDefault();break;case"Enter":case"Tab":break;default:var t=e.target,u=t.selectionStart!==t.selectionEnd,r=this.tokens.join("").length>=this.length,o=this.integerOnly?/^[0-9]$/.test(e.key):!0;(!o||r&&e.key!=="Delete"&&!u)&&e.preventDefault();break}},onPaste:function(e){var t=e.clipboardData.getData("text");if(t.length){var u=t.substring(0,this.length);(!this.integerOnly||!isNaN(u))&&(this.tokens=u.split(""),this.updateModel(e))}e.preventDefault()}},computed:{inputMode:function(){return this.integerOnly?"numeric":"text"},inputType:function(){return this.mask?"password":"text"}},components:{OtpInputText:ae}};function fe(s,e,t,u,r,o){var P=W("OtpInputText");return d(),m("div",G({class:s.cx("root")},s.ptmi("root")),[(d(!0),m(O,null,j(s.length,function(f){return q(s.$slots,"default",{key:f,events:o.getTemplateEvents(f-1),attrs:o.getTemplateAttrs(f-1),index:f},function(){return[l(P,{value:r.tokens[f-1],type:o.inputType,class:A(s.cx("pcInputText")),name:s.$formName,inputmode:o.inputMode,variant:s.variant,readonly:s.readonly,disabled:s.disabled,size:s.size,invalid:s.invalid,tabindex:s.tabindex,unstyled:s.unstyled,onInput:function(h){return o.onInput(h,f-1)},onFocus:e[0]||(e[0]=function(p){return o.onFocus(p)}),onBlur:e[1]||(e[1]=function(p){return o.onBlur(p)}),onPaste:e[2]||(e[2]=function(p){return o.onPaste(p)}),onKeydown:e[3]||(e[3]=function(p){return o.onKeyDown(p)}),onClick:e[4]||(e[4]=function(p){return o.onClick(p)}),pt:s.ptm("pcInputText")},null,8,["value","type","class","name","inputmode","variant","readonly","disabled","size","invalid","tabindex","unstyled","onInput","pt"])]})}),128))],16)}L.render=fe;const ge={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-950 flex flex-col transition-colors duration-300"},ve={class:"w-full py-4 px-6"},he={class:"max-w-md mx-auto flex justify-end"},ye=["title"],xe={class:"flex-1 flex items-center justify-center px-4 pb-8"},be={class:"w-full max-w-md"},ke={key:0,class:"animate-pulse"},we={class:"text-center mb-8"},_e={class:"inline-flex items-center justify-center mb-6"},Ie={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 space-y-6"},Te={class:"flex justify-center"},Pe={class:"flex gap-2"},Ne={class:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between"},Ce={key:1,class:"animate-fade-in"},Ee={class:"text-center mb-8"},Se={class:"inline-flex items-center justify-center mb-6"},De=["src","alt"],Oe=["src","alt"],Be={key:2,class:"flex items-center gap-3"},Ve={class:"text-2xl font-bold text-gray-900 dark:text-white"},Fe={class:"text-gray-700 dark:text-gray-300 font-semibold mt-1"},Me={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-700 p-8 transition-colors duration-300"},je={class:"flex flex-col items-center"},Ae={key:0,class:"pi pi-check mr-2"},Le={class:"text-center space-y-3"},$e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ke={class:"font-semibold"},ze={key:0,class:"pi pi-refresh mr-2"},Re={class:"mt-8 text-center"},Ue={__name:"VerifyEmailOtp",props:{email:String},setup(s){const e=ne(),t=se(),u=E(()=>{var i,a,k,F;return((a=(i=e.props.settings)==null?void 0:i.general)==null?void 0:a.site_name)||((F=(k=e.props.settings)==null?void 0:k.general)==null?void 0:F.app_name)||"Finora Bank"}),r=E(()=>{var i,a;return(a=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:a.logo_light}),o=E(()=>{var i,a;return(a=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:a.logo_dark}),P=g(!0),f=g(!1),p=()=>{setTimeout(()=>{f.value=!0},100)},h=g(!1),B=g(!1);H(()=>{const i=localStorage.getItem("theme");(i==="dark"||!i&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(h.value=!0,document.documentElement.classList.add("dark")),B.value||(B.value=!0,V())});const $=()=>{h.value=!h.value,h.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},y=g(""),w=g(!1),_=g(!1),x=g(60),T=g(!1);let b=null;const K=()=>{T.value=!1,x.value=60,b&&clearInterval(b),b=setInterval(()=>{x.value--,x.value<=0&&(clearInterval(b),T.value=!0)},1e3)};J(()=>{b&&clearInterval(b)});const V=()=>{_.value||!T.value&&x.value>0&&x.value<60||(_.value=!0,N.post(route("verify-email-otp.send"),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.success("Verification code has been sent to your email.","Code Sent"),K()},onError:i=>{t.error(i.otp||"Failed to send OTP. Please try again.","Error")},onFinish:()=>{_.value=!1}}))},z=()=>{if(y.value.length!==6){t.warn("Please enter the complete 6-digit code.","Invalid Code");return}w.value=!0,N.post(route("verify-email-otp.verify"),{otp:y.value},{onError:i=>{t.error(i.otp||"Invalid or expired code. Please try again.","Verification Failed"),y.value=""},onFinish:()=>{w.value=!1}})},R=()=>{N.post(route("logout"))};return(i,a)=>(d(),m(O,null,[l(oe,{title:"Verify Email"}),l(le,{"min-load-time":1200,onComplete:p}),l(te,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100"},{default:C(()=>[Q(n("div",ge,[n("div",ve,[n("div",he,[n("button",{onClick:$,class:"p-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:h.value?"Switch to light mode":"Switch to dark mode"},[n("i",{class:A([h.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,ye)])]),n("div",xe,[n("div",be,[P.value?(d(),m("div",ke,[n("div",we,[n("div",_e,[l(c(v),{width:"3.5rem",height:"3.5rem",class:"rounded-xl"})]),l(c(v),{width:"60%",height:"2rem",class:"mx-auto mb-2"}),l(c(v),{width:"70%",height:"1rem",class:"mx-auto mb-1"}),l(c(v),{width:"50%",height:"1rem",class:"mx-auto"})]),n("div",Ie,[n("div",Te,[n("div",Pe,[(d(),m(O,null,j(6,k=>l(c(v),{key:k,width:"2.5rem",height:"3rem",class:"rounded-lg"})),64))])]),l(c(v),{height:"3rem",class:"w-full"}),l(c(v),{width:"50%",height:"1rem",class:"mx-auto"}),n("div",Ne,[l(c(v),{width:"5rem",height:"1rem"}),l(c(v),{width:"4rem",height:"1rem"})])])])):(d(),m("div",Ce,[n("div",Ee,[n("div",Se,[r.value?(d(),m("img",{key:0,src:r.value,alt:u.value,class:"h-14 w-auto dark:hidden"},null,8,De)):I("",!0),o.value?(d(),m("img",{key:1,src:o.value,alt:u.value,class:"h-14 w-auto hidden dark:block"},null,8,Oe)):I("",!0),!r.value&&!o.value?(d(),m("div",Be,[a[1]||(a[1]=n("div",{class:"w-12 h-12 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25"},[n("span",{class:"text-2xl font-bold text-white"},"F")],-1)),n("span",Ve,S(u.value),1)])):I("",!0)]),a[2]||(a[2]=n("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Email Verification ",-1)),a[3]||(a[3]=n("p",{class:"text-gray-500 dark:text-gray-400"}," Enter the 6-digit code we sent to ",-1)),n("p",Fe,S(s.email),1)]),n("div",Me,[n("form",{onSubmit:X(z,["prevent"]),class:"space-y-6"},[n("div",je,[l(c(L),{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=k=>y.value=k),length:6,integerOnly:!0,autofocus:""},null,8,["modelValue"])]),l(c(M),{type:"submit",loading:w.value,disabled:w.value||y.value.length!==6,class:"w-full justify-center",size:"large"},{default:C(()=>[w.value?I("",!0):(d(),m("i",Ae)),a[4]||(a[4]=n("span",null,"Verify Code",-1))]),_:1},8,["loading","disabled"]),n("div",Le,[T.value?(d(),Z(c(M),{key:1,type:"button",loading:_.value,onClick:V,severity:"secondary",outlined:"",class:"w-full justify-center"},{default:C(()=>[_.value?I("",!0):(d(),m("i",ze)),a[6]||(a[6]=n("span",null,"Resend Code",-1))]),_:1},8,["loading"])):(d(),m("div",$e,[a[5]||(a[5]=D(" Resend code in ",-1)),n("span",Ke,S(x.value)+"s",1)]))])],32),a[8]||(a[8]=n("div",{class:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700"},[n("div",{class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800"},[n("i",{class:"pi pi-info-circle text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),n("div",{class:"text-sm text-blue-800 dark:text-blue-300"},[n("strong",null,"Security Tip:"),D(" Never share your verification code with anyone. We will never ask for your code via phone. ")])])],-1)),n("div",{class:"mt-6 text-center"},[n("button",{onClick:R,class:"text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"},[...a[7]||(a[7]=[n("i",{class:"pi pi-sign-out mr-2"},null,-1),D(" Sign Out ",-1)])])])])])),n("div",Re,[l(ie,{textClass:"text-sm text-gray-500 dark:text-gray-400"})])])])],512),[[ee,f.value]])]),_:1})],64))}},nt=ue(Ue,[["__scopeId","data-v-3f9544a6"]]);export{nt as default};
