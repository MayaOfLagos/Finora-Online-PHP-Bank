import{K as z,Y as R,L as U,c as f,o as c,F as B,r as M,M as Y,d as u,n as j,N as W,s as q,j as h,B as G,p as P,a as n,u as m,b as _,e as E,t as S,y as H,w as V,h as J,i as C,z as Q}from"./app-pKJNfMRl.js";import{u as X}from"./useToast-Clsx83_F.js";import{s as Z,a as ee}from"./index-CfAZwmyf.js";import{a as F}from"./index-0Wu5cDGM.js";import{s as g}from"./index-BX7aPWpF.js";import{_ as te}from"./SeoHead-ChAvh1iH.js";import{_ as ne}from"./CopyrightText-BgjqrfdI.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-C89qVnDF.js";var re=`
    .p-inputotp {
        display: flex;
        align-items: center;
        gap: dt('inputotp.gap');
    }

    .p-inputotp-input {
        text-align: center;
        width: dt('inputotp.input.width');
    }

    .p-inputotp-input.p-inputtext-sm {
        text-align: center;
        width: dt('inputotp.input.sm.width');
    }

    .p-inputotp-input.p-inputtext-lg {
        text-align: center;
        width: dt('inputotp.input.lg.width');
    }
`,ae={root:"p-inputotp p-component",pcInputText:"p-inputotp-input"},oe=z.extend({name:"inputotp",style:re,classes:ae}),ie={name:"BaseInputOtp",extends:ee,props:{readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},length:{type:Number,default:4},mask:{type:Boolean,default:!1},integerOnly:{type:Boolean,default:!1}},style:oe,provide:function(){return{$pcInputOtp:this,$parentInstance:this}}},A={name:"InputOtp",extends:ie,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{tokens:[]}},watch:{modelValue:{immediate:!0,handler:function(e){this.tokens=e?e.split(""):new Array(this.length)}}},methods:{getTemplateAttrs:function(e){return{value:this.tokens[e]}},getTemplateEvents:function(e){var t=this;return{input:function(a){return t.onInput(a,e)},keydown:function(a){return t.onKeyDown(a)},focus:function(a){return t.onFocus(a)},blur:function(a){return t.onBlur(a)},paste:function(a){return t.onPaste(a)}}},onInput:function(e,t){this.tokens[t]=e.target.value,this.updateModel(e),e.inputType==="deleteContentBackward"?this.moveToPrev(e):(e.inputType==="insertText"||e.inputType==="deleteContentForward"||R()&&e instanceof CustomEvent)&&this.moveToNext(e)},updateModel:function(e){var t=this.tokens.join("");this.writeValue(t,e),this.$emit("change",{originalEvent:e,value:t})},moveToPrev:function(e){var t=this.findPrevInput(e.target);t&&(t.focus(),t.select())},moveToNext:function(e){var t=this.findNextInput(e.target);t&&(t.focus(),t.select())},findNextInput:function(e){var t=e.nextElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findNextInput(t)},findPrevInput:function(e){var t=e.previousElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findPrevInput(t)},onFocus:function(e){e.target.select(),this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)},onClick:function(e){setTimeout(function(){return e.target.select()},1)},onKeyDown:function(e){if(!(e.ctrlKey||e.metaKey))switch(e.key){case"ArrowLeft":this.moveToPrev(e),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Backspace":e.target.value.length===0&&(this.moveToPrev(e),e.preventDefault());break;case"ArrowRight":this.moveToNext(e),e.preventDefault();break;case"Enter":case"Tab":break;default:var t=e.target,l=t.selectionStart!==t.selectionEnd,a=this.tokens.join("").length>=this.length,o=this.integerOnly?/^[0-9]$/.test(e.key):!0;(!o||a&&e.key!=="Delete"&&!l)&&e.preventDefault();break}},onPaste:function(e){var t=e.clipboardData.getData("text");if(t.length){var l=t.substring(0,this.length);(!this.integerOnly||!isNaN(l))&&(this.tokens=l.split(""),this.updateModel(e))}e.preventDefault()}},computed:{inputMode:function(){return this.integerOnly?"numeric":"text"},inputType:function(){return this.mask?"password":"text"}},components:{OtpInputText:Z}};function le(s,e,t,l,a,o){var I=U("OtpInputText");return c(),f("div",W({class:s.cx("root")},s.ptmi("root")),[(c(!0),f(B,null,M(s.length,function(d){return Y(s.$slots,"default",{key:d,events:o.getTemplateEvents(d-1),attrs:o.getTemplateAttrs(d-1),index:d},function(){return[u(I,{value:a.tokens[d-1],type:o.inputType,class:j(s.cx("pcInputText")),name:s.$formName,inputmode:o.inputMode,variant:s.variant,readonly:s.readonly,disabled:s.disabled,size:s.size,invalid:s.invalid,tabindex:s.tabindex,unstyled:s.unstyled,onInput:function(N){return o.onInput(N,d-1)},onFocus:e[0]||(e[0]=function(p){return o.onFocus(p)}),onBlur:e[1]||(e[1]=function(p){return o.onBlur(p)}),onPaste:e[2]||(e[2]=function(p){return o.onPaste(p)}),onKeydown:e[3]||(e[3]=function(p){return o.onKeyDown(p)}),onClick:e[4]||(e[4]=function(p){return o.onClick(p)}),pt:s.ptm("pcInputText")},null,8,["value","type","class","name","inputmode","variant","readonly","disabled","size","invalid","tabindex","unstyled","onInput","pt"])]})}),128))],16)}A.render=le;const ue={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-950 flex flex-col transition-colors duration-300"},de={class:"w-full py-4 px-6"},pe={class:"max-w-md mx-auto flex justify-end"},ce=["title"],me={class:"flex-1 flex items-center justify-center px-4 pb-8"},fe={class:"w-full max-w-md"},ge={key:0,class:"animate-pulse"},he={class:"text-center mb-8"},ve={class:"inline-flex items-center justify-center mb-6"},ye={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 space-y-6"},xe={class:"flex justify-center"},be={class:"flex gap-2"},ke={class:"pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-between"},we={key:1,class:"animate-fade-in"},_e={class:"text-center mb-8"},Ie={class:"inline-flex items-center justify-center mb-6"},Te=["src","alt"],Ne=["src","alt"],Pe={key:2,class:"flex items-center gap-3"},Ee={class:"text-2xl font-bold text-gray-900 dark:text-white"},Se={class:"text-gray-700 dark:text-gray-300 font-semibold mt-1"},Ce={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-700 p-8 transition-colors duration-300"},Be={class:"flex flex-col items-center"},De={key:0,class:"pi pi-check mr-2"},Oe={class:"text-center space-y-3"},Ve={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Fe={class:"font-semibold"},Me={key:0,class:"pi pi-refresh mr-2"},je={class:"mt-8 text-center"},Ae={__name:"VerifyEmailOtp",props:{email:String},setup(s){const e=Q(),t=X(),l=E(()=>{var i,r,b,O;return((r=(i=e.props.settings)==null?void 0:i.general)==null?void 0:r.site_name)||((O=(b=e.props.settings)==null?void 0:b.general)==null?void 0:O.app_name)||"Finora Bank"}),a=E(()=>{var i,r;return(r=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:r.logo_light}),o=E(()=>{var i,r;return(r=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:r.logo_dark}),I=h(!0),d=h(!1),p=h(!1);q(()=>{const i=localStorage.getItem("theme");(i==="dark"||!i&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(d.value=!0,document.documentElement.classList.add("dark")),setTimeout(()=>{I.value=!1},300),p.value||(p.value=!0,D())});const N=()=>{d.value=!d.value,d.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},v=h(""),k=h(!1),w=h(!1),y=h(60),T=h(!1);let x=null;const L=()=>{T.value=!1,y.value=60,x&&clearInterval(x),x=setInterval(()=>{y.value--,y.value<=0&&(clearInterval(x),T.value=!0)},1e3)};G(()=>{x&&clearInterval(x)});const D=()=>{w.value||!T.value&&y.value>0&&y.value<60||(w.value=!0,P.post(route("verify-email-otp.send"),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.success("Verification code has been sent to your email.","Code Sent"),L()},onError:i=>{t.error(i.otp||"Failed to send OTP. Please try again.","Error")},onFinish:()=>{w.value=!1}}))},K=()=>{if(v.value.length!==6){t.warn("Please enter the complete 6-digit code.","Invalid Code");return}k.value=!0,P.post(route("verify-email-otp.verify"),{otp:v.value},{onError:i=>{t.error(i.otp||"Invalid or expired code. Please try again.","Verification Failed"),v.value=""},onFinish:()=>{k.value=!1}})},$=()=>{P.post(route("logout"))};return(i,r)=>(c(),f(B,null,[u(te,{title:"Verify Email"}),n("div",ue,[n("div",de,[n("div",pe,[n("button",{onClick:N,class:"p-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:d.value?"Switch to light mode":"Switch to dark mode"},[n("i",{class:j([d.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,ce)])]),n("div",me,[n("div",fe,[I.value?(c(),f("div",ge,[n("div",he,[n("div",ve,[u(m(g),{width:"3.5rem",height:"3.5rem",class:"rounded-xl"})]),u(m(g),{width:"60%",height:"2rem",class:"mx-auto mb-2"}),u(m(g),{width:"70%",height:"1rem",class:"mx-auto mb-1"}),u(m(g),{width:"50%",height:"1rem",class:"mx-auto"})]),n("div",ye,[n("div",xe,[n("div",be,[(c(),f(B,null,M(6,b=>u(m(g),{key:b,width:"2.5rem",height:"3rem",class:"rounded-lg"})),64))])]),u(m(g),{height:"3rem",class:"w-full"}),u(m(g),{width:"50%",height:"1rem",class:"mx-auto"}),n("div",ke,[u(m(g),{width:"5rem",height:"1rem"}),u(m(g),{width:"4rem",height:"1rem"})])])])):(c(),f("div",we,[n("div",_e,[n("div",Ie,[a.value?(c(),f("img",{key:0,src:a.value,alt:l.value,class:"h-14 w-auto dark:hidden"},null,8,Te)):_("",!0),o.value?(c(),f("img",{key:1,src:o.value,alt:l.value,class:"h-14 w-auto hidden dark:block"},null,8,Ne)):_("",!0),!a.value&&!o.value?(c(),f("div",Pe,[r[1]||(r[1]=n("div",{class:"w-12 h-12 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25"},[n("span",{class:"text-2xl font-bold text-white"},"F")],-1)),n("span",Ee,S(l.value),1)])):_("",!0)]),r[2]||(r[2]=n("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Email Verification ",-1)),r[3]||(r[3]=n("p",{class:"text-gray-500 dark:text-gray-400"}," Enter the 6-digit code we sent to ",-1)),n("p",Se,S(s.email),1)]),n("div",Ce,[n("form",{onSubmit:H(K,["prevent"]),class:"space-y-6"},[n("div",Be,[u(m(A),{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=b=>v.value=b),length:6,integerOnly:!0,autofocus:""},null,8,["modelValue"])]),u(m(F),{type:"submit",loading:k.value,disabled:k.value||v.value.length!==6,class:"w-full justify-center",size:"large"},{default:V(()=>[k.value?_("",!0):(c(),f("i",De)),r[4]||(r[4]=n("span",null,"Verify Code",-1))]),_:1},8,["loading","disabled"]),n("div",Oe,[T.value?(c(),J(m(F),{key:1,type:"button",loading:w.value,onClick:D,severity:"secondary",outlined:"",class:"w-full justify-center"},{default:V(()=>[w.value?_("",!0):(c(),f("i",Me)),r[6]||(r[6]=n("span",null,"Resend Code",-1))]),_:1},8,["loading"])):(c(),f("div",Ve,[r[5]||(r[5]=C(" Resend code in ",-1)),n("span",Fe,S(y.value)+"s",1)]))])],32),r[8]||(r[8]=n("div",{class:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700"},[n("div",{class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800"},[n("i",{class:"pi pi-info-circle text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),n("div",{class:"text-sm text-blue-800 dark:text-blue-300"},[n("strong",null,"Security Tip:"),C(" Never share your verification code with anyone. We will never ask for your code via phone. ")])])],-1)),n("div",{class:"mt-6 text-center"},[n("button",{onClick:$,class:"text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"},[...r[7]||(r[7]=[n("i",{class:"pi pi-sign-out mr-2"},null,-1),C(" Sign Out ",-1)])])])])])),n("div",je,[u(ne,{textClass:"text-sm text-gray-500 dark:text-gray-400"})])])])])],64))}},He=se(Ae,[["__scopeId","data-v-c1c21b88"]]);export{He as default};
