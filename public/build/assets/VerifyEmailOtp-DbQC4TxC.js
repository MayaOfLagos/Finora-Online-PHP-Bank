import{E as j,Y as K,G as L,c,o as d,F as B,r as $,H as z,d as h,n as D,I as R,k as U,y as Y,j as v,B as q,q as T,a,e as _,u as b,p as G,b as w,t as E,z as H,w as S,h as W,i as N,A as J}from"./app-CA1i2YFa.js";import{s as Q,a as X}from"./index-Dwux84ML.js";import{a as C}from"./index--P6FZV4c.js";import{s as Z}from"./index-DTnnwFGf.js";import{_ as ee}from"./CopyrightText-CtsPt2Gl.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-Ci-OdYiI.js";var ne=`
    .p-inputotp {
        display: flex;
        align-items: center;
        gap: dt('inputotp.gap');
    }

    .p-inputotp-input {
        text-align: center;
        width: dt('inputotp.input.width');
    }

    .p-inputotp-input.p-inputtext-sm {
        text-align: center;
        width: dt('inputotp.input.sm.width');
    }

    .p-inputotp-input.p-inputtext-lg {
        text-align: center;
        width: dt('inputotp.input.lg.width');
    }
`,ae={root:"p-inputotp p-component",pcInputText:"p-inputotp-input"},re=j.extend({name:"inputotp",style:ne,classes:ae}),se={name:"BaseInputOtp",extends:X,props:{readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},length:{type:Number,default:4},mask:{type:Boolean,default:!1},integerOnly:{type:Boolean,default:!1}},style:re,provide:function(){return{$pcInputOtp:this,$parentInstance:this}}},O={name:"InputOtp",extends:se,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{tokens:[]}},watch:{modelValue:{immediate:!0,handler:function(e){this.tokens=e?e.split(""):new Array(this.length)}}},methods:{getTemplateAttrs:function(e){return{value:this.tokens[e]}},getTemplateEvents:function(e){var t=this;return{input:function(s){return t.onInput(s,e)},keydown:function(s){return t.onKeyDown(s)},focus:function(s){return t.onFocus(s)},blur:function(s){return t.onBlur(s)},paste:function(s){return t.onPaste(s)}}},onInput:function(e,t){this.tokens[t]=e.target.value,this.updateModel(e),e.inputType==="deleteContentBackward"?this.moveToPrev(e):(e.inputType==="insertText"||e.inputType==="deleteContentForward"||K()&&e instanceof CustomEvent)&&this.moveToNext(e)},updateModel:function(e){var t=this.tokens.join("");this.writeValue(t,e),this.$emit("change",{originalEvent:e,value:t})},moveToPrev:function(e){var t=this.findPrevInput(e.target);t&&(t.focus(),t.select())},moveToNext:function(e){var t=this.findNextInput(e.target);t&&(t.focus(),t.select())},findNextInput:function(e){var t=e.nextElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findNextInput(t)},findPrevInput:function(e){var t=e.previousElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findPrevInput(t)},onFocus:function(e){e.target.select(),this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)},onClick:function(e){setTimeout(function(){return e.target.select()},1)},onKeyDown:function(e){if(!(e.ctrlKey||e.metaKey))switch(e.key){case"ArrowLeft":this.moveToPrev(e),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Backspace":e.target.value.length===0&&(this.moveToPrev(e),e.preventDefault());break;case"ArrowRight":this.moveToNext(e),e.preventDefault();break;case"Enter":case"Tab":break;default:var t=e.target,l=t.selectionStart!==t.selectionEnd,s=this.tokens.join("").length>=this.length,o=this.integerOnly?/^[0-9]$/.test(e.key):!0;(!o||s&&e.key!=="Delete"&&!l)&&e.preventDefault();break}},onPaste:function(e){var t=e.clipboardData.getData("text");if(t.length){var l=t.substring(0,this.length);(!this.integerOnly||!isNaN(l))&&(this.tokens=l.split(""),this.updateModel(e))}e.preventDefault()}},computed:{inputMode:function(){return this.integerOnly?"numeric":"text"},inputType:function(){return this.mask?"password":"text"}},components:{OtpInputText:Q}};function oe(n,e,t,l,s,o){var m=L("OtpInputText");return d(),c("div",R({class:n.cx("root")},n.ptmi("root")),[(d(!0),c(B,null,$(n.length,function(p){return z(n.$slots,"default",{key:p,events:o.getTemplateEvents(p-1),attrs:o.getTemplateAttrs(p-1),index:p},function(){return[h(m,{value:s.tokens[p-1],type:o.inputType,class:D(n.cx("pcInputText")),name:n.$formName,inputmode:o.inputMode,variant:n.variant,readonly:n.readonly,disabled:n.disabled,size:n.size,invalid:n.invalid,tabindex:n.tabindex,unstyled:n.unstyled,onInput:function(f){return o.onInput(f,p-1)},onFocus:e[0]||(e[0]=function(u){return o.onFocus(u)}),onBlur:e[1]||(e[1]=function(u){return o.onBlur(u)}),onPaste:e[2]||(e[2]=function(u){return o.onPaste(u)}),onKeydown:e[3]||(e[3]=function(u){return o.onKeyDown(u)}),onClick:e[4]||(e[4]=function(u){return o.onClick(u)}),pt:n.ptm("pcInputText")},null,8,["value","type","class","name","inputmode","variant","readonly","disabled","size","invalid","tabindex","unstyled","onInput","pt"])]})}),128))],16)}O.render=oe;const ie={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-950 flex flex-col transition-colors duration-300"},le={class:"w-full py-4 px-6"},ue={class:"max-w-md mx-auto flex justify-end"},de=["title"],pe={class:"flex-1 flex items-center justify-center px-4 pb-8"},ce={class:"w-full max-w-md"},me={class:"text-center mb-8"},fe={class:"inline-flex items-center justify-center mb-6"},ve=["src","alt"],ge=["src","alt"],ye={key:2,class:"flex items-center gap-3"},he={class:"text-2xl font-bold text-gray-900 dark:text-white"},xe={class:"text-gray-700 dark:text-gray-300 font-semibold mt-1"},ke={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-700 p-8 transition-colors duration-300"},be={class:"flex flex-col items-center"},we={key:0,class:"pi pi-check mr-2"},Ie={class:"text-center space-y-3"},Te={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},_e={class:"font-semibold"},Ee={key:0,class:"pi pi-refresh mr-2"},Ne={class:"mt-8 text-center"},Pe={__name:"VerifyEmailOtp",props:{email:String},setup(n){const e=J(),t=U(),l=_(()=>{var i,r;return((r=(i=e.props.settings)==null?void 0:i.general)==null?void 0:r.site_name)||"Finora Bank"}),s=_(()=>{var i,r;return(r=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:r.site_logo}),o=_(()=>{var i,r;return(r=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:r.site_logo_dark}),m=v(!1),p=v(!1);Y(()=>{const i=localStorage.getItem("theme");(i==="dark"||!i&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(m.value=!0,document.documentElement.classList.add("dark")),p.value||(p.value=!0,P())});const u=()=>{m.value=!m.value,m.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},f=v(""),x=v(!1),k=v(!1),g=v(60),I=v(!1);let y=null;const V=()=>{I.value=!1,g.value=60,y&&clearInterval(y),y=setInterval(()=>{g.value--,g.value<=0&&(clearInterval(y),I.value=!0)},1e3)};q(()=>{y&&clearInterval(y)});const P=()=>{k.value||!I.value&&g.value>0&&g.value<60||(k.value=!0,T.post(route("verify-email-otp.send"),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.add({severity:"success",summary:"Code Sent",detail:"Verification code has been sent to your email.",life:4e3}),V()},onError:i=>{t.add({severity:"error",summary:"Error",detail:i.otp||"Failed to send OTP. Please try again.",life:4e3})},onFinish:()=>{k.value=!1}}))},F=()=>{if(f.value.length!==6){t.add({severity:"warn",summary:"Invalid Code",detail:"Please enter the complete 6-digit code.",life:3e3});return}x.value=!0,T.post(route("verify-email-otp.verify"),{otp:f.value},{onError:i=>{t.add({severity:"error",summary:"Verification Failed",detail:i.otp||"Invalid or expired code. Please try again.",life:4e3}),f.value=""},onFinish:()=>{x.value=!1}})},M=()=>{T.post(route("logout"))};return(i,r)=>(d(),c(B,null,[h(b(G),{title:"Verify Email - "+l.value},null,8,["title"]),h(b(Z)),a("div",ie,[a("div",le,[a("div",ue,[a("button",{onClick:u,class:"p-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:m.value?"Switch to light mode":"Switch to dark mode"},[a("i",{class:D([m.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,de)])]),a("div",pe,[a("div",ce,[a("div",me,[a("div",fe,[s.value?(d(),c("img",{key:0,src:s.value,alt:l.value,class:"h-14 w-auto dark:hidden"},null,8,ve)):w("",!0),o.value?(d(),c("img",{key:1,src:o.value,alt:l.value,class:"h-14 w-auto hidden dark:block"},null,8,ge)):w("",!0),!s.value&&!o.value?(d(),c("div",ye,[r[1]||(r[1]=a("div",{class:"w-12 h-12 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25"},[a("span",{class:"text-2xl font-bold text-white"},"F")],-1)),a("span",he,E(l.value),1)])):w("",!0)]),r[2]||(r[2]=a("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Email Verification ",-1)),r[3]||(r[3]=a("p",{class:"text-gray-500 dark:text-gray-400"}," Enter the 6-digit code we sent to ",-1)),a("p",xe,E(n.email),1)]),a("div",ke,[a("form",{onSubmit:H(F,["prevent"]),class:"space-y-6"},[a("div",be,[h(b(O),{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=A=>f.value=A),length:6,integerOnly:!0,autofocus:""},null,8,["modelValue"])]),h(b(C),{type:"submit",loading:x.value,disabled:x.value||f.value.length!==6,class:"w-full justify-center",size:"large"},{default:S(()=>[x.value?w("",!0):(d(),c("i",we)),r[4]||(r[4]=a("span",null,"Verify Code",-1))]),_:1},8,["loading","disabled"]),a("div",Ie,[I.value?(d(),W(b(C),{key:1,type:"button",loading:k.value,onClick:P,severity:"secondary",outlined:"",class:"w-full justify-center"},{default:S(()=>[k.value?w("",!0):(d(),c("i",Ee)),r[6]||(r[6]=a("span",null,"Resend Code",-1))]),_:1},8,["loading"])):(d(),c("div",Te,[r[5]||(r[5]=N(" Resend code in ",-1)),a("span",_e,E(g.value)+"s",1)]))])],32),r[8]||(r[8]=a("div",{class:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700"},[a("div",{class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800"},[a("i",{class:"pi pi-info-circle text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),a("div",{class:"text-sm text-blue-800 dark:text-blue-300"},[a("strong",null,"Security Tip:"),N(" Never share your verification code with anyone. We will never ask for your code via phone. ")])])],-1)),a("div",{class:"mt-6 text-center"},[a("button",{onClick:M,class:"text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"},[...r[7]||(r[7]=[a("i",{class:"pi pi-sign-out mr-2"},null,-1),N(" Sign Out ",-1)])])])]),a("div",Ne,[h(ee,{textClass:"text-sm text-gray-500 dark:text-gray-400"})])])])])],64))}},Ae=te(Pe,[["__scopeId","data-v-a234bd40"]]);export{Ae as default};
