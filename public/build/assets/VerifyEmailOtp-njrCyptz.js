import{B as $,Y as K,M as L,c,o as d,F as O,r as z,N as R,d as h,n as V,C as U,k as Y,y as q,j as v,E as W,q as _,a as r,u as T,b,e as E,t as N,z as G,w as B,h as H,i as P,A as J}from"./app-C8_YI8N-.js";import{s as Q,a as X}from"./index-C8QerdRZ.js";import{a as D}from"./index-DXK8Q9K_.js";import{s as Z}from"./index-DrT5wC6Z.js";import{_ as ee}from"./SeoHead-CraZbR6x.js";import{_ as te}from"./CopyrightText-CgyEkc8A.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-DUpdi1BB.js";import"./index-BjgIoK0t.js";var re=`
    .p-inputotp {
        display: flex;
        align-items: center;
        gap: dt('inputotp.gap');
    }

    .p-inputotp-input {
        text-align: center;
        width: dt('inputotp.input.width');
    }

    .p-inputotp-input.p-inputtext-sm {
        text-align: center;
        width: dt('inputotp.input.sm.width');
    }

    .p-inputotp-input.p-inputtext-lg {
        text-align: center;
        width: dt('inputotp.input.lg.width');
    }
`,ae={root:"p-inputotp p-component",pcInputText:"p-inputotp-input"},se=$.extend({name:"inputotp",style:re,classes:ae}),oe={name:"BaseInputOtp",extends:X,props:{readonly:{type:Boolean,default:!1},tabindex:{type:Number,default:null},length:{type:Number,default:4},mask:{type:Boolean,default:!1},integerOnly:{type:Boolean,default:!1}},style:se,provide:function(){return{$pcInputOtp:this,$parentInstance:this}}},F={name:"InputOtp",extends:oe,inheritAttrs:!1,emits:["change","focus","blur"],data:function(){return{tokens:[]}},watch:{modelValue:{immediate:!0,handler:function(e){this.tokens=e?e.split(""):new Array(this.length)}}},methods:{getTemplateAttrs:function(e){return{value:this.tokens[e]}},getTemplateEvents:function(e){var t=this;return{input:function(s){return t.onInput(s,e)},keydown:function(s){return t.onKeyDown(s)},focus:function(s){return t.onFocus(s)},blur:function(s){return t.onBlur(s)},paste:function(s){return t.onPaste(s)}}},onInput:function(e,t){this.tokens[t]=e.target.value,this.updateModel(e),e.inputType==="deleteContentBackward"?this.moveToPrev(e):(e.inputType==="insertText"||e.inputType==="deleteContentForward"||K()&&e instanceof CustomEvent)&&this.moveToNext(e)},updateModel:function(e){var t=this.tokens.join("");this.writeValue(t,e),this.$emit("change",{originalEvent:e,value:t})},moveToPrev:function(e){var t=this.findPrevInput(e.target);t&&(t.focus(),t.select())},moveToNext:function(e){var t=this.findNextInput(e.target);t&&(t.focus(),t.select())},findNextInput:function(e){var t=e.nextElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findNextInput(t)},findPrevInput:function(e){var t=e.previousElementSibling;if(t)return t.nodeName==="INPUT"?t:this.findPrevInput(t)},onFocus:function(e){e.target.select(),this.$emit("focus",e)},onBlur:function(e){this.$emit("blur",e)},onClick:function(e){setTimeout(function(){return e.target.select()},1)},onKeyDown:function(e){if(!(e.ctrlKey||e.metaKey))switch(e.key){case"ArrowLeft":this.moveToPrev(e),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Backspace":e.target.value.length===0&&(this.moveToPrev(e),e.preventDefault());break;case"ArrowRight":this.moveToNext(e),e.preventDefault();break;case"Enter":case"Tab":break;default:var t=e.target,l=t.selectionStart!==t.selectionEnd,s=this.tokens.join("").length>=this.length,o=this.integerOnly?/^[0-9]$/.test(e.key):!0;(!o||s&&e.key!=="Delete"&&!l)&&e.preventDefault();break}},onPaste:function(e){var t=e.clipboardData.getData("text");if(t.length){var l=t.substring(0,this.length);(!this.integerOnly||!isNaN(l))&&(this.tokens=l.split(""),this.updateModel(e))}e.preventDefault()}},computed:{inputMode:function(){return this.integerOnly?"numeric":"text"},inputType:function(){return this.mask?"password":"text"}},components:{OtpInputText:Q}};function ie(n,e,t,l,s,o){var m=L("OtpInputText");return d(),c("div",U({class:n.cx("root")},n.ptmi("root")),[(d(!0),c(O,null,z(n.length,function(p){return R(n.$slots,"default",{key:p,events:o.getTemplateEvents(p-1),attrs:o.getTemplateAttrs(p-1),index:p},function(){return[h(m,{value:s.tokens[p-1],type:o.inputType,class:V(n.cx("pcInputText")),name:n.$formName,inputmode:o.inputMode,variant:n.variant,readonly:n.readonly,disabled:n.disabled,size:n.size,invalid:n.invalid,tabindex:n.tabindex,unstyled:n.unstyled,onInput:function(f){return o.onInput(f,p-1)},onFocus:e[0]||(e[0]=function(u){return o.onFocus(u)}),onBlur:e[1]||(e[1]=function(u){return o.onBlur(u)}),onPaste:e[2]||(e[2]=function(u){return o.onPaste(u)}),onKeydown:e[3]||(e[3]=function(u){return o.onKeyDown(u)}),onClick:e[4]||(e[4]=function(u){return o.onClick(u)}),pt:n.ptm("pcInputText")},null,8,["value","type","class","name","inputmode","variant","readonly","disabled","size","invalid","tabindex","unstyled","onInput","pt"])]})}),128))],16)}F.render=ie;const le={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-950 flex flex-col transition-colors duration-300"},ue={class:"w-full py-4 px-6"},de={class:"max-w-md mx-auto flex justify-end"},pe=["title"],ce={class:"flex-1 flex items-center justify-center px-4 pb-8"},me={class:"w-full max-w-md"},fe={class:"text-center mb-8"},ve={class:"inline-flex items-center justify-center mb-6"},ge=["src","alt"],ye=["src","alt"],he={key:2,class:"flex items-center gap-3"},xe={class:"text-2xl font-bold text-gray-900 dark:text-white"},ke={class:"text-gray-700 dark:text-gray-300 font-semibold mt-1"},be={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-700 p-8 transition-colors duration-300"},we={class:"flex flex-col items-center"},Ie={key:0,class:"pi pi-check mr-2"},Te={class:"text-center space-y-3"},_e={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Ee={class:"font-semibold"},Ne={key:0,class:"pi pi-refresh mr-2"},Pe={class:"mt-8 text-center"},Ce={__name:"VerifyEmailOtp",props:{email:String},setup(n){const e=J(),t=Y(),l=E(()=>{var i,a,I,S;return((a=(i=e.props.settings)==null?void 0:i.general)==null?void 0:a.site_name)||((S=(I=e.props.settings)==null?void 0:I.general)==null?void 0:S.app_name)||"Finora Bank"}),s=E(()=>{var i,a;return(a=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:a.logo_light}),o=E(()=>{var i,a;return(a=(i=e.props.settings)==null?void 0:i.branding)==null?void 0:a.logo_dark}),m=v(!1),p=v(!1);q(()=>{const i=localStorage.getItem("theme");(i==="dark"||!i&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(m.value=!0,document.documentElement.classList.add("dark")),p.value||(p.value=!0,C())});const u=()=>{m.value=!m.value,m.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},f=v(""),x=v(!1),k=v(!1),g=v(60),w=v(!1);let y=null;const M=()=>{w.value=!1,g.value=60,y&&clearInterval(y),y=setInterval(()=>{g.value--,g.value<=0&&(clearInterval(y),w.value=!0)},1e3)};W(()=>{y&&clearInterval(y)});const C=()=>{k.value||!w.value&&g.value>0&&g.value<60||(k.value=!0,_.post(route("verify-email-otp.send"),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{t.add({severity:"success",summary:"Code Sent",detail:"Verification code has been sent to your email.",life:4e3}),M()},onError:i=>{t.add({severity:"error",summary:"Error",detail:i.otp||"Failed to send OTP. Please try again.",life:4e3})},onFinish:()=>{k.value=!1}}))},A=()=>{if(f.value.length!==6){t.add({severity:"warn",summary:"Invalid Code",detail:"Please enter the complete 6-digit code.",life:3e3});return}x.value=!0,_.post(route("verify-email-otp.verify"),{otp:f.value},{onError:i=>{t.add({severity:"error",summary:"Verification Failed",detail:i.otp||"Invalid or expired code. Please try again.",life:4e3}),f.value=""},onFinish:()=>{x.value=!1}})},j=()=>{_.post(route("logout"))};return(i,a)=>(d(),c(O,null,[h(ee,{title:"Verify Email"}),h(T(Z)),r("div",le,[r("div",ue,[r("div",de,[r("button",{onClick:u,class:"p-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:m.value?"Switch to light mode":"Switch to dark mode"},[r("i",{class:V([m.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,pe)])]),r("div",ce,[r("div",me,[r("div",fe,[r("div",ve,[s.value?(d(),c("img",{key:0,src:s.value,alt:l.value,class:"h-14 w-auto dark:hidden"},null,8,ge)):b("",!0),o.value?(d(),c("img",{key:1,src:o.value,alt:l.value,class:"h-14 w-auto hidden dark:block"},null,8,ye)):b("",!0),!s.value&&!o.value?(d(),c("div",he,[a[1]||(a[1]=r("div",{class:"w-12 h-12 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25"},[r("span",{class:"text-2xl font-bold text-white"},"F")],-1)),r("span",xe,N(l.value),1)])):b("",!0)]),a[2]||(a[2]=r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Email Verification ",-1)),a[3]||(a[3]=r("p",{class:"text-gray-500 dark:text-gray-400"}," Enter the 6-digit code we sent to ",-1)),r("p",ke,N(n.email),1)]),r("div",be,[r("form",{onSubmit:G(A,["prevent"]),class:"space-y-6"},[r("div",we,[h(T(F),{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=I=>f.value=I),length:6,integerOnly:!0,autofocus:""},null,8,["modelValue"])]),h(T(D),{type:"submit",loading:x.value,disabled:x.value||f.value.length!==6,class:"w-full justify-center",size:"large"},{default:B(()=>[x.value?b("",!0):(d(),c("i",Ie)),a[4]||(a[4]=r("span",null,"Verify Code",-1))]),_:1},8,["loading","disabled"]),r("div",Te,[w.value?(d(),H(T(D),{key:1,type:"button",loading:k.value,onClick:C,severity:"secondary",outlined:"",class:"w-full justify-center"},{default:B(()=>[k.value?b("",!0):(d(),c("i",Ne)),a[6]||(a[6]=r("span",null,"Resend Code",-1))]),_:1},8,["loading"])):(d(),c("div",_e,[a[5]||(a[5]=P(" Resend code in ",-1)),r("span",Ee,N(g.value)+"s",1)]))])],32),a[8]||(a[8]=r("div",{class:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700"},[r("div",{class:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800"},[r("i",{class:"pi pi-info-circle text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),r("div",{class:"text-sm text-blue-800 dark:text-blue-300"},[r("strong",null,"Security Tip:"),P(" Never share your verification code with anyone. We will never ask for your code via phone. ")])])],-1)),r("div",{class:"mt-6 text-center"},[r("button",{onClick:j,class:"text-sm font-medium text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors"},[...a[7]||(a[7]=[r("i",{class:"pi pi-sign-out mr-2"},null,-1),P(" Sign Out ",-1)])])])]),r("div",Pe,[h(te,{textClass:"text-sm text-gray-500 dark:text-gray-400"})])])])])],64))}},Ke=ne(Ce,[["__scopeId","data-v-b2e9bd76"]]);export{Ke as default};
