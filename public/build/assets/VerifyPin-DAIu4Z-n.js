import{k as z,y as T,j as f,c as r,d as i,a as e,e as y,u as c,p as $,n as Y,b as u,t as g,z as A,F as m,r as N,w as h,o,i as O,A as G,q as P}from"./app-CuJU7OPU.js";import{a as _}from"./index-BZ6REAaS.js";import{s as H}from"./index-NPNmwZAY.js";import{_ as J}from"./CopyrightText-CNXYu1CT.js";/* empty css            */import"./index-8JZQWkLq.js";const K={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-950 dark:via-gray-900 dark:to-slate-950 flex flex-col transition-colors duration-300"},Q={class:"w-full py-4 px-6"},R={class:"max-w-md mx-auto flex justify-end"},U=["title"],W={class:"flex-1 flex items-center justify-center px-4 pb-8"},X={class:"w-full max-w-md"},Z={class:"text-center mb-8"},ee={class:"inline-flex items-center justify-center mb-6"},te=["src","alt"],ae=["src","alt"],se={key:2,class:"flex items-center gap-3"},re={class:"text-2xl font-bold text-gray-900 dark:text-white"},oe={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-700 p-8 transition-colors duration-300"},le={class:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},de={class:"text-center"},ie={class:"text-4xl font-mono tracking-[0.5em] text-gray-900 dark:text-white min-h-[3rem] flex items-center justify-center select-none"},ne={class:"text-xs text-gray-500 dark:text-gray-400 mt-3"},ce={class:"grid grid-cols-3 gap-3"},ue=["onClick","disabled"],ge={class:"text-2xl font-semibold text-gray-900 dark:text-white"},me=["disabled"],be=["disabled"],ye={key:0,class:"pi pi-check mr-2"},pe={class:"grid grid-cols-2 gap-3"},ve={class:"mt-8 text-center"},w=6,Ie={__name:"VerifyPin",setup(xe){const p=G(),v=z(),b=y(()=>{var a,t;return((t=(a=p.props.settings)==null?void 0:a.general)==null?void 0:t.site_name)||"Finora Bank"}),x=y(()=>{var a,t;return(t=(a=p.props.settings)==null?void 0:a.branding)==null?void 0:t.site_logo}),k=y(()=>{var a,t;return(t=(a=p.props.settings)==null?void 0:a.branding)==null?void 0:t.site_logo_dark}),d=f(!1);T(()=>{const a=localStorage.getItem("theme");(a==="dark"||!a&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(d.value=!0,document.documentElement.classList.add("dark"))});const I=()=>{d.value=!d.value,d.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},s=f(""),l=f(!1),C=y(()=>"•".repeat(s.value.length).padEnd(w,"·")),j=a=>{s.value.length<w&&(s.value+=a)},S=()=>{s.value=""},V=()=>{s.value.length>0&&(s.value=s.value.slice(0,-1))},E=()=>{if(s.value.length<4){v.add({severity:"warn",summary:"Invalid PIN",detail:"PIN must be at least 4 digits.",life:3e3});return}l.value=!0,P.post(route("verify-pin.verify"),{pin:s.value},{onError:a=>{v.add({severity:"error",summary:"Verification Failed",detail:a.pin||"Invalid PIN code. Please try again.",life:4e3}),s.value=""},onFinish:()=>{l.value=!1}})},L=()=>{s.value="",v.add({severity:"info",summary:"Cancelled",detail:"PIN entry cancelled.",life:2e3})},D=()=>{P.post(route("logout"))},F=[["1","2","3"],["4","5","6"],["7","8","9"],["clear","0","backspace"]];return(a,t)=>(o(),r(m,null,[i(c($),{title:"Verify PIN - "+b.value},null,8,["title"]),i(c(H)),e("div",K,[e("div",Q,[e("div",R,[e("button",{onClick:I,class:"p-2.5 rounded-xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 shadow-sm hover:shadow-md",title:d.value?"Switch to light mode":"Switch to dark mode"},[e("i",{class:Y([d.value?"pi pi-sun":"pi pi-moon","text-lg"])},null,2)],8,U)])]),e("div",W,[e("div",X,[e("div",Z,[e("div",ee,[x.value?(o(),r("img",{key:0,src:x.value,alt:b.value,class:"h-14 w-auto dark:hidden"},null,8,te)):u("",!0),k.value?(o(),r("img",{key:1,src:k.value,alt:b.value,class:"h-14 w-auto hidden dark:block"},null,8,ae)):u("",!0),!x.value&&!k.value?(o(),r("div",se,[t[0]||(t[0]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-primary-600 to-primary-700 rounded-xl flex items-center justify-center shadow-lg shadow-primary-500/25"},[e("span",{class:"text-2xl font-bold text-white"},"F")],-1)),e("span",re,g(b.value),1)])):u("",!0)]),t[1]||(t[1]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Enter Your PIN ",-1)),t[2]||(t[2]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Please enter your transaction PIN to continue ",-1))]),e("div",oe,[e("form",{onSubmit:A(E,["prevent"]),class:"space-y-6"},[e("div",le,[e("div",de,[e("div",ie,g(C.value),1),e("div",ne,g(s.value.length)+" / "+g(w)+" digits ",1)])]),e("div",ce,[(o(),r(m,null,N(F,(q,M)=>(o(),r(m,{key:M},[(o(!0),r(m,null,N(q,(n,B)=>(o(),r(m,{key:B},[isNaN(n)?n==="clear"?(o(),r("button",{key:1,type:"button",onClick:S,disabled:l.value||s.value.length===0,class:"aspect-square rounded-xl bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 active:scale-95 transition-all border border-red-200 dark:border-red-800 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"},[...t[3]||(t[3]=[e("span",{class:"text-sm font-medium text-red-700 dark:text-red-400"},"Clear",-1)])],8,me)):n==="backspace"?(o(),r("button",{key:2,type:"button",onClick:V,disabled:l.value||s.value.length===0,class:"aspect-square rounded-xl bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 active:scale-95 transition-all border border-gray-200 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center shadow-sm"},[...t[4]||(t[4]=[e("i",{class:"pi pi-arrow-left text-xl text-gray-700 dark:text-gray-200"},null,-1)])],8,be)):u("",!0):(o(),r("button",{key:0,type:"button",onClick:ke=>j(n),disabled:l.value,class:"aspect-square rounded-xl bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 active:scale-95 transition-all border border-gray-200 dark:border-gray-600 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"},[e("span",ge,g(n),1)],8,ue))],64))),128))],64))),64))]),i(c(_),{type:"submit",loading:l.value,disabled:l.value||s.value.length<4,class:"w-full justify-center",size:"large"},{default:h(()=>[l.value?u("",!0):(o(),r("i",ye)),t[5]||(t[5]=e("span",null,"Verify PIN",-1))]),_:1},8,["loading","disabled"]),e("div",pe,[i(c(_),{type:"button",onClick:L,disabled:l.value,severity:"secondary",outlined:"",class:"w-full justify-center"},{default:h(()=>[...t[6]||(t[6]=[e("i",{class:"pi pi-times mr-2"},null,-1),e("span",null,"Cancel",-1)])]),_:1},8,["disabled"]),i(c(_),{type:"button",onClick:D,severity:"danger",outlined:"",class:"w-full justify-center"},{default:h(()=>[...t[7]||(t[7]=[e("i",{class:"pi pi-sign-out mr-2"},null,-1),e("span",null,"Sign Out",-1)])]),_:1})])],32),t[8]||(t[8]=e("div",{class:"mt-6 pt-6 border-t border-gray-100 dark:border-gray-700"},[e("div",{class:"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800"},[e("i",{class:"pi pi-exclamation-triangle text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),e("div",{class:"text-sm text-amber-800 dark:text-amber-300"},[e("strong",null,"Security Notice:"),O(" Your transaction PIN is required to access your dashboard. If you've forgotten your PIN, please contact support. ")])])],-1))]),e("div",ve,[i(J,{textClass:"text-sm text-gray-500 dark:text-gray-400"})])])])])],64))}};export{Ie as default};
